(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61051],{39134:()=>{},64240:(e,t,i)=>{"use strict";i.d(t,{e:()=>l});var a=i(2635),r=i(21731),s=i(99515);let n=["#FF454B","#FF8F50","#FAC819","#47C279","#14B8A6","#3B82F6","#8B5CF6","#EC4899"];function l(e){let{className:t,size:i=24,onClick:l,avatar:o,name:c}=e,d=c.charAt(0),u=(0,s.useMemo)(()=>{let e=c.charCodeAt(0)%n.length;return n[e]},[c]);return o?(0,a.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center font-bold flex-shrink-0",l&&"cursor-pointer",t),onClick:l,style:{width:i,height:i},children:(0,a.jsx)("img",{src:o,className:(0,r.cn)("w-full h-full object-cover overflow-hidden ")})}):(0,a.jsx)("div",{className:(0,r.cn)("relative flex items-center justify-center font-bold flex-shrink-0",l&&"cursor-pointer",t),style:{width:i,height:i,fontSize:Math.floor(.5*i),color:"rgba(255, 255, 255, 0.90)",backgroundColor:u},onClick:l,children:d.toUpperCase()})}},41047:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});var a=i(2635),r=i(91452),s=i(40757),n=i(72551),l=i(21731),o=i(64240);function c(e){let{size:t=24,className:i,onClick:c}=e,d=(0,r.GV)(s.R.selectors.isTeamAccount),u=(0,r.GV)(n.u.selectors.currentTeamInfo);if(!d||!u)return null;let{name:p,avatar:m}=u;return(0,a.jsx)("div",{className:(0,l.cn)("relative flex items-center justify-center rounded-[8px] font-bold flex-shrink-0 overflow-hidden border border-[var(--border-dark)]",c&&"cursor-pointer",i),onClick:c,children:(0,a.jsx)(o.e,{name:p,avatar:m,size:t})})}},35497:(e,t,i)=>{"use strict";i.d(t,{H8:()=>h});var a=i(2635),r=i(40757),s=i(29298),n=i(21731),l=i(93165),o=i(81762),c=i(61086),d=i(53708),u=i(95040),p=i(25850),m=i(88672),x=i(64240);function h(e){let{className:t,size:i=24,onClick:s,badgeSize:l="default"}=e,o=(0,m.d4)(r.R.selectors.userName)||"",c=(0,m.d4)(r.R.selectors.userAvatar),d=(0,m.d4)(r.R.selectors.isTeamAccount);return(0,a.jsxs)("div",{className:(0,n.cn)("relative flex items-center justify-center font-bold cursor-pointer flex-shrink-0",t),onClick:s,children:[(0,a.jsx)(x.e,{name:o,avatar:c,size:i,className:"rounded-full overflow-hidden"}),d?(0,a.jsx)(f,{size:l}):(0,a.jsx)(v,{size:l})]})}function v(e){let{size:t}=e,i=(0,m.d4)(r.R.selectors.membershipVersion),d=null;return(i===s.b.Lite?d=l.A:i===s.b.Casual?d=c.A:i===s.b.Pro&&(d=o.A),d)?(0,a.jsx)("img",{src:(0,p.AV)(d),className:(0,n.cn)("absolute bottom-[-2px] right-[-2px] w-[18px] h-[18px]",{"w-[12px] h-[12px]":"small"===t,"w-[18px] h-[18px]":"default"===t,"w-[20px] h-[20px]":"large"===t}),alt:"vip"}):null}function f(e){let{size:t}=e,i=(0,d.W)(()=>"small"===t?7.5:"default"===t?10:14);return(0,a.jsx)("div",{className:(0,n.cn)("absolute p-[3px] bottom-[-2px] right-[-2px] flex justify-center items-center"," rounded-full border-[1px] border-[var(--background-menu-white)] bg-[#1A1A19]","small"===t&&"p-[2.25px]"),children:(0,a.jsx)(u.O,{size:i,color:"var(--icon-white)"})})}},87001:(e,t,i)=>{"use strict";i.d(t,{eu:()=>a.e});var a=i(64240);i(41047),i(35497)},76743:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var a=i(2635),r=i(21731),s=i(48734),n=i(7487);let l=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap font-medium transition-colors hover:opacity-90 active:opacity-80",{variants:{color:{brand:"bg-[var(--Button-primary-brand)] text-[var(--text-white)]",black:"bg-[var(--Button-primary-black)] text-[var(--text-onblack)]",danger:"bg-[var(--function-error)] text-[var(--text-white)]",gray:"bg-[var(--Button-secondary-gray)] text-[var(--text-primary)]",blue:"bg-[var(--fill-blue)] text-[var(--text-blue)]",white:"bg-[var(--Button-primary-white)] text-[var(--text-primary)] shadow-[0px_0.5px_3px_0px_var(--shadow-S)] hover:opacity-70 active:hover-60"},size:{extraSmall:"h-[28px] px-[8px] rounded-[8px] gap-[4px] text-[13px] leading-[18px]",small:"h-[32px] px-[8px] rounded-[8px] gap-[4px] text-[13px] leading-[18px]",medium:"h-[36px] px-[12px] rounded-[10px] gap-[6px] text-sm",large:"h-[40px] px-[16px] rounded-[10px] gap-[6px] text-sm",extraLarge:"h-[48px] px-[24px] rounded-[48px] gap-[6px] text-base font-[500]"},variant:{default:"min-w-16",outline:"min-w-16 outline outline-1 -outline-offset-1 hover:bg-[var(--fill-tsp-white-light)]",text:"hover:opacity-80 bg-inherit p-0 h-max",link:"hover:opacity-80 bg-inherit p-0 h-max underline leading-[22px]",icon:"p-0"},shape:{default:"",round:"rounded-full"},disabled:{true:"opacity-50 cursor-not-allowed hover:opacity-50 active:opacity-50"},loading:{true:"opacity-50 cursor-not-allowed hover:opacity-50 active:opacity-50"}},defaultVariants:{variant:"default",size:"medium",color:"gray",shape:"default",disabled:!1},compoundVariants:[{variant:"outline",color:"gray",className:"text-[var(--text-primary)] outline-[var(--border-btn-main)] bg-transparent"},{variant:"outline",color:"gray",disabled:!1,loading:!1,className:"hover:bg-[var(--fill-tsp-white-light)]"},{variant:"outline",color:"danger",className:"text-[var(--function-error)] outline-[var(--Button-secondary-error-border)] bg-transparent"},{variant:"outline",color:"danger",disabled:!1,loading:!1,className:"hover:bg-[var(--fill-tsp-white-light)]"},{variant:"icon",size:"small",className:"w-[32px] h-[32px]"},{variant:"icon",size:"medium",className:"w-[36px] h-[36px]"},{variant:"icon",size:"large",className:"w-[40px] h-[40px]"},{variant:"link",color:"brand",className:"text-[var(--text-blue)]"},{variant:"text",color:"brand",className:"text-[var(--text-blue)]"},{shape:"round",size:"small",variant:"default",className:"px-3"}]}),o=e=>{let{color:t="gray",variant:i="default",size:s="medium",shape:o="default",children:c,icon:d,iconPosition:u="left",onClick:p,disabled:m,className:x,loading:h,loadingColor:v,...f}=e;return(0,a.jsxs)("button",{className:(0,r.cn)(l({variant:i,size:s,color:t,disabled:m,shape:o,loading:h}),x),onClick:p,disabled:m||h,...f,children:[d&&!h&&"left"===u&&d,h&&(0,a.jsx)(n.R,{color:v||("gray"===t?"var(--icon-tertiary)":"brand"===t?"var(--icon-white)":"black"===t?"var(--text-onblack)":"danger"===t?"outline"===i?"var(--function-error)":"var(--icon-white)":"white"===t?"var(--icon-primary)":"var(--icon-white)")}),c,d&&!h&&"right"===u&&d]})}},90293:(e,t,i)=>{"use strict";i.d(t,{p:()=>m});var a=i(2635),r=i(75958),s=i(9205),n=i(59496),l=i(21731),o=i(57271),c=i(99515),d=i(76743),u=i(33890),p=i(41661);function m(e){let{title:t,description:i,onConfirm:m,onCancel:x,variant:h="default",type:v="default",cancelText:f=o.I.t("Cancel"),confirmText:g="default"===h?o.I.t("Confirm"):o.I.t("Delete"),inputInitialValue:w="",enterKeyConfirm:y,inputProps:b,content:C,className:S="",autoFocusButton:j}=e,I=()=>{if(null==x||x(),e.onDisposed(),"alert"===h&&!e.onCancel){var t;null===(t=e.onConfirm)||void 0===t||t.call(e)}},[N,k]=(0,c.useState)(!1),[_,T]=(0,c.useState)(w),P=(0,c.useRef)(null);(0,c.useEffect)(()=>{"input"===v&&setTimeout(()=>{var e;null===(e=P.current)||void 0===e||e.select()},100)},[v]);let L=(0,r.w)(async()=>{if(m){k(!0);try{await m("input"===v?_:void 0)&&I()}catch(e){(0,s.oR)({title:n.P.formatErrorToString(e),variant:"warning"})}finally{k(!1)}}});return(0,c.useEffect)(()=>{if(!y)return;let e=e=>{"Enter"===e.key&&L()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[y,L]),(0,a.jsxs)(u.l,{title:t,description:i,onDisposed:I,className:(0,l.cn)("w-[400px]",S),headerClassName:(0,l.cn)("px-5",e.headerClassName),children:["input"===v&&(0,a.jsx)("div",{className:"px-5 pb-3",children:(0,a.jsx)(p.p,{onInputRef:P,value:_,onKeyDown:e=>{"Enter"===e.key&&L()},onChange:e=>{T(e.target.value)},onClear:()=>{T("")},...b})}),C&&(0,a.jsx)("div",{className:(0,l.cn)("px-5 py-3","text-[var(--text-tertiary)] text-sm"),children:C}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 p-5",children:["alert"!==h&&(0,a.jsx)(d.A,{variant:"outline",color:"gray",size:"medium",onClick:()=>{null==x||x(),I()},disabled:N,children:f}),(0,a.jsx)(d.A,{variant:"default",color:"danger"===h?"danger":"black",size:"medium",onClick:L,disabled:N,loading:N,autoFocus:"confirm"===j,children:g})]})]})}},33890:(e,t,i)=>{"use strict";i.d(t,{l:()=>v,M:()=>h});var a=i(2635),r=i(75958),s=i(21731);function n(e){return(0,a.jsx)("svg",{className:(0,s.cn)("icon-manus-arrow-left",e.className),width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.6368 5.36517C15.9883 5.71664 15.9883 6.28649 15.6368 6.63796L10.2732 12.0016L15.6368 17.3652C15.9883 17.7166 15.9883 18.2865 15.6368 18.638C15.2853 18.9894 14.7155 18.9894 14.364 18.638L8.36399 12.638C8.01252 12.2865 8.01252 11.7166 8.36399 11.3652L14.364 5.36517C14.7155 5.01369 15.2853 5.01369 15.6368 5.36517Z",fill:e.color||"currentColor"})})}var l=i(41838),o=i(33605),c=i(57271),d=i(8398),u=i(99515),p=i(17260),m=i(37114);let x=e=>{var t,i;let{container:a,children:r}=e,[s,n]=u.useState(!1);(0,u.useLayoutEffect)(()=>n(!0),[]);let l=a||s&&(null===(i=globalThis)||void 0===i?void 0:null===(t=i.document)||void 0===t?void 0:t.body);return l?m.createPortal(r,l):null},h=(0,u.createContext)(null);function v(e){var t,i,m;let{closeIconVisible:h=!0,style:v,closeOnMaskClick:f=!0,overlayChildren:g}=e,[w,y]=(0,u.useState)(!0),b=(0,r.w)(()=>{y(!1),e.onDisposed()});return w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{container:l.b.getDialogRoot(),children:(0,a.jsx)(o.zR,{lockScroll:!0,className:(0,s.cn)("w-full h-full bg-black/60 backdrop-blur-[4px] fixed inset-0","data-[state=open]:animate-dialog-bg-fade-in","data-[state=closed]:animate-dialog-bg-fade-out",e.overlayClassName||(null===(t=e.classNames)||void 0===t?void 0:t.overlay)),onClick:()=>{f&&e.onDisposed()},children:g})}),(0,a.jsx)(x,{container:l.b.getDialogRoot(),children:(0,a.jsxs)("div",{role:"dialog",className:(0,s.cn)("bg-[var(--background-menu-white)] rounded-[20px] border border-white/5","fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","max-w-[95%] max-h-[95%] overflow-auto ","data-[state=open]:animate-dialog-slide-in-from-bottom","data-[state=closed]:animate-dialog-slide-out-to-bottom",e.className||(null===(i=e.classNames)||void 0===i?void 0:i.content)),style:{width:e.width,...v},children:[(0,a.jsxs)("div",{className:(0,s.cn)("pt-5 px-[24px] pb-[10px]",e.hasBack&&"ps-3",h&&"pe-8",e.headerClassName||(null===(m=e.classNames)||void 0===m?void 0:m.header)),children:[(0,a.jsxs)("h3",{className:(0,s.cn)("text-[var(--text-primary)] text-[18px] leading-[24px] font-semibold","flex items-center",e.headerTitleClassName),children:[e.hasBack&&(0,a.jsx)(p.K,{icon:n,title:c.I.t("Back"),iconClassName:"w-6 h-6 text-[var(--icon-primary)]",className:(0,s.cn)("me-[4px]"),onClick:()=>{var t;null===(t=e.onBack)||void 0===t||t.call(e)}}),e.title]}),!!e.description&&(0,a.jsx)("p",{className:(0,s.cn)("mt-[5px] text-[var(--text-tertiary)] text-[13px] font-normal leading-[18px]",e.hasBack&&"ps-3"),children:e.description}),h&&(0,a.jsx)(p.K,{className:(0,s.cn)("absolute top-[18px] ltr:right-[20px] rtl:left-[20px]",e.closeIconClass),title:c.I.t("Close"),icon:d.A,iconClassName:e.closeIconBtnClass,onClick:()=>{b()}})]}),e.children]})})]})}v.displayName="Dialog"},38933:(e,t,i)=>{"use strict";i.d(t,{r:()=>c});var a=i(2635),r=i(21731),s=i(48046),n=i(99515),l=i(78308),o=i(1972);function c(e){let{className:t,items:i=[],width:c,children:d,childrenClassName:u,headerSlot:p}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("bg-[var(--background-menu-white)] shadow-[0_4px_11px_0px_var(--shadow-S)]","rounded-xl border border-[var(--border-dark)] dark:border-[var(--border-light)]","min-w-[110px]",t),style:{width:c},children:[p,(0,a.jsxs)("div",{className:(0,r.cn)("p-1",u),children:[i.map((e,t)=>{if(e.hidden)return null;let i="error"===e.variant,c=(0,a.jsxs)(o._,{className:(0,r.cn)("text-[".concat(i?"var(--function-error)":"var(--text-secondary)","]"),e.className),icon:e.icon,iconColor:e.iconColor||(i?"var(--function-error)":"var(--icon-secondary)"),iconSize:16,onClick:e.onClick,children:[e.label,(0,a.jsx)(s.A,{className:(0,r.cn)("ml-auto",!e.checked&&"invisible"),size:16,color:"var(--icon-primary)"})]});return e.tooltipTitle?(0,a.jsx)(l.m,{placement:"right",title:e.tooltipTitle,children:(0,a.jsx)("div",{children:c})},"".concat(t,"-tooltip")):(0,a.jsx)(n.Fragment,{children:c},"".concat(t,"-menu"))}),d]})]})}},1972:(e,t,i)=>{"use strict";i.d(t,{_:()=>l});var a=i(2635),r=i(21731),s=i(48046),n=i(7487);function l(e){let{children:t,icon:i,iconColor:l,iconSize:o=16,className:c,activeClassName:d,onClick:u,active:p,asChild:m,childrenWrapperClassName:x,loading:h,...v}=e;return(0,a.jsxs)("div",{onClick:u,className:(0,r.cn)("flex items-center gap-2 w-full p-2 rounded-[8px] hover:bg-[var(--fill-tsp-white-main)] cursor-pointer","text-sm text-[var(--text-secondary)]",p&&"bg-[var(--fill-tsp-white-main)] text-[var(--text-primary)",p&&d,c),...m?v:null,children:[(0,a.jsxs)("div",{className:(0,r.cn)("flex-1 flex items-center gap-2",x),children:[h&&(0,a.jsx)(n.R,{size:o,color:l}),i&&!h&&(0,a.jsx)(i,{color:l,size:o}),t]}),p&&(0,a.jsx)(s.A,{size:o,color:"currentColor"})]})}},683:(e,t,i)=>{"use strict";i.d(t,{y:()=>c});var a=i(2635);let r=e=>{let{size:t=24}=e;return(0,a.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.29331 2.29289C2.68383 1.90237 3.317 1.90237 3.70752 2.29289L7.34625 5.93162C7.40455 5.97793 7.45837 6.03139 7.50637 6.09174L17.8974 16.4828C17.9652 16.5347 18.0272 16.5962 18.0813 16.6667L21.7075 20.2929C22.098 20.6834 22.098 21.3166 21.7075 21.7071C21.317 22.0976 20.6838 22.0976 20.2933 21.7071L17.1396 18.5534C15.6947 19.3988 13.972 20 12.0004 20C9.13874 20 6.80576 18.7353 5.07716 17.2926C3.35091 15.8518 2.16738 14.1857 1.57463 13.2472C1.5668 13.2348 1.55876 13.2221 1.55055 13.2092C1.43291 13.024 1.28018 12.7836 1.20298 12.4467C1.14065 12.1748 1.14067 11.825 1.20303 11.553C1.28028 11.2161 1.43344 10.9751 1.55139 10.7895C1.55967 10.7765 1.56777 10.7637 1.57567 10.7512C2.17804 9.79766 3.40132 8.07525 5.19576 6.60955L2.29331 3.70711C1.90278 3.31658 1.90278 2.68342 2.29331 2.29289ZM6.61828 8.03208C4.97911 9.32619 3.83406 10.921 3.26654 11.8194C3.23105 11.8755 3.20617 11.915 3.18537 11.9492C3.17149 11.9721 3.16235 11.9878 3.15625 11.9988C3.15625 11.9992 3.15625 11.9996 3.15625 12C3.15625 12.0004 3.15625 12.0008 3.15625 12.0012C3.16227 12.012 3.17127 12.0276 3.1849 12.05C3.20556 12.084 3.23029 12.1232 3.26563 12.1792C3.7983 13.0226 4.8524 14.4999 6.35869 15.7571C7.86263 17.0123 9.75708 18 12.0004 18C13.3533 18 14.5778 17.6414 15.6674 17.0812L14.0322 15.446C13.4368 15.7977 12.7418 16 12.0004 16C9.79128 16 8.00042 14.2091 8.00042 12C8.00042 11.2586 8.20271 10.5636 8.55438 9.96818L6.61828 8.03208ZM10.068 11.4818C10.0239 11.647 10.0004 11.8207 10.0004 12C10.0004 13.1046 10.8958 14 12.0004 14C12.1798 14 12.3534 13.9765 12.5186 13.9324L10.068 11.4818ZM12.0004 6C11.6186 6 11.2482 6.02849 10.8892 6.08156C10.3429 6.16234 9.83448 5.78492 9.7537 5.23858C9.67292 4.69223 10.0503 4.18385 10.5967 4.10307C11.0505 4.03597 11.5187 4 12.0004 4C14.8621 4 17.1951 5.26472 18.9237 6.70743C20.6499 8.14818 21.8335 9.81429 22.4262 10.7528C22.434 10.7652 22.4421 10.7779 22.4503 10.7908C22.5679 10.976 22.7207 11.2164 22.7979 11.5533C22.8602 11.8253 22.8602 12.1751 22.7978 12.4471C22.7205 12.7841 22.5671 13.0254 22.449 13.2113C22.4407 13.2243 22.4325 13.2371 22.4246 13.2497C22.1063 13.7536 21.6232 14.4581 20.9832 15.2224C20.6287 15.6459 19.998 15.7017 19.5745 15.3472C19.1511 14.9926 19.0952 14.3619 19.4498 13.9385C20.0211 13.2561 20.4524 12.6267 20.7338 12.1814C20.7694 12.1251 20.7943 12.0855 20.8152 12.0512C20.8292 12.0281 20.8384 12.0122 20.8446 12.0012C20.8446 12.0008 20.8446 12.0004 20.8446 12C20.8446 11.9996 20.8446 11.9992 20.8446 11.9988C20.8386 11.988 20.8296 11.9725 20.8159 11.95C20.7953 11.916 20.7705 11.8768 20.7352 11.8208C20.2025 10.9774 19.1484 9.50007 17.6421 8.24291C16.1382 6.9877 14.2437 6 12.0004 6Z",fill:"currentColor"})})},s=e=>{let{size:t=24}=e;return(0,a.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.35868 8.24291C4.85239 9.50007 3.79828 10.9774 3.26562 11.8208C3.23028 11.8768 3.20556 11.916 3.1849 11.95C3.17127 11.9724 3.16227 11.988 3.15625 11.9988C3.15625 11.9992 3.15625 11.9996 3.15625 12C3.15625 12.0004 3.15625 12.0008 3.15625 12.0012C3.16227 12.012 3.17127 12.0276 3.1849 12.05C3.20556 12.084 3.23028 12.1232 3.26562 12.1792C3.79828 13.0226 4.85239 14.4999 6.35868 15.7571C7.86262 17.0123 9.75707 18 12.0004 18C14.2437 18 16.1382 17.0123 17.6421 15.7571C19.1484 14.4999 20.2025 13.0226 20.7352 12.1792C20.7705 12.1232 20.7952 12.084 20.8159 12.05C20.8295 12.0276 20.8385 12.012 20.8446 12.0012C20.8446 12.0008 20.8446 12.0004 20.8446 12C20.8446 11.9996 20.8446 11.9992 20.8446 11.9988C20.8385 11.988 20.8295 11.9724 20.8159 11.95C20.7952 11.916 20.7705 11.8768 20.7352 11.8208C20.2025 10.9774 19.1484 9.50007 17.6421 8.24291C16.1382 6.9877 14.2437 6 12.0004 6C9.75707 6 7.86262 6.9877 6.35868 8.24291ZM5.07715 6.70743C6.80575 5.26472 9.13873 4 12.0004 4C14.8621 4 17.1951 5.26472 18.9237 6.70743C20.6499 8.14818 21.8334 9.81429 22.4262 10.7528C22.434 10.7653 22.4421 10.7779 22.4503 10.7908C22.5679 10.976 22.7206 11.2164 22.7978 11.5532C22.8601 11.8251 22.8601 12.1749 22.7978 12.4468C22.7206 12.7836 22.5679 13.024 22.4503 13.2092C22.4421 13.2221 22.434 13.2347 22.4262 13.2472C21.8334 14.1857 20.6499 15.8518 18.9237 17.2926C17.1951 18.7353 14.8621 20 12.0004 20C9.13873 20 6.80575 18.7353 5.07715 17.2926C3.3509 15.8518 2.16737 14.1857 1.57462 13.2472C1.56679 13.2348 1.55875 13.2221 1.55054 13.2092C1.43292 13.024 1.2802 12.7836 1.203 12.4468C1.14067 12.1749 1.14067 11.8251 1.203 11.5532C1.2802 11.2164 1.43292 10.976 1.55054 10.7908C1.55875 10.7779 1.56679 10.7652 1.57462 10.7528C2.16737 9.81429 3.3509 8.14818 5.07715 6.70743ZM12.0004 10C10.8958 10 10.0004 10.8954 10.0004 12C10.0004 13.1046 10.8958 14 12.0004 14C13.105 14 14.0004 13.1046 14.0004 12C14.0004 10.8954 13.105 10 12.0004 10ZM8.0004 12C8.0004 9.79086 9.79126 8 12.0004 8C14.2095 8 16.0004 9.79086 16.0004 12C16.0004 14.2091 14.2095 16 12.0004 16C9.79126 16 8.0004 14.2091 8.0004 12Z",fill:"currentColor"})})};var n=i(21731),l=i(99515),o=i(41661);function c(e){let{className:t,error:i,type:r,onEnter:s,iconSize:c,...u}=e,[p,m]=(0,l.useState)(!1),x="password"===r;return(0,a.jsxs)("div",{className:(0,n.cn)("relative w-full"),children:[(0,a.jsx)(o.p,{error:!!i,paddingSize:"thin",bgColor:"white",className:(0,n.cn)("pr-[40px]",t),type:x?p?"text":"password":r,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||null==s||s()},...u}),x&&(0,a.jsx)(d,{size:"large"===c?20:16,className:"large"===c?"right-[10px]":"",visible:p,onClick:()=>{m(!p)}})]})}function d(e){let{className:t,visible:i,onClick:l,size:o=16}=e;return(0,a.jsx)("div",{className:(0,n.cn)("text-[var(--icon-tertiary)] absolute z-30 right-[6px] top-[50%] p-[6px] rounded-md transform -translate-y-1/2 cursor-pointer hover:text-[--icon-primary] active:opacity-90 transition-all",t),onClick:e=>{e.stopPropagation(),e.preventDefault(),l()},children:i?(0,a.jsx)(s,{size:o}):(0,a.jsx)(r,{size:o})})}},17260:(e,t,i)=>{"use strict";i.d(t,{K:()=>n});var a=i(2635),r=i(78308),s=i(21731);function n(e){let{icon:t,title:i,iconClassName:n,className:l,tooltipSide:o,disabled:c,variant:d,size:u,bg:p="gray",children:m,...x}=e,h=(0,a.jsxs)("div",{className:(0,s.cn)("flex h-7 w-7 items-center justify-center cursor-pointer rounded-md","gray"===p?"hover:bg-[var(--fill-tsp-gray-main)]":"","white"===p?"bg-[var(--Button-primary-white)] shadow-[0px_0.5px_3px_0px_var(--shadow-S)] hover:opacity-80 active:opacity-70 transition-opacity":"","outline"===d?"outline outline-1 -outline-offset-1 outline-[var(--border-main)]":"","small"===u?"size-8":"","medium"===u?"size-9 rounded-[10px]":"",c?"opacity-50 cursor-not-allowed hover:opacity-50":"",l),...x,children:[(0,a.jsx)(t,{className:(0,s.cn)("size-5 text-[var(--icon-tertiary)]",n)}),m]});return i?(0,a.jsx)(r.m,{title:i,placement:o,dismissProps:x.onClick?{referencePress:!0}:void 0,children:h}):h}},41661:(e,t,i)=>{"use strict";i.d(t,{p:()=>u});var a=i(2635),r=i(44616),s=i(56163),n=i(21731),l=i(48734),o=i(99515),c=i(93607);let d=(0,l.F)("rounded-[10px] overflow-hidden text-sm leading-[22px] text-[var(--text-primary)] placeholder:text-[var(--text-disable)]",{variants:{inputSize:{small:"h-8",medium:"h-10"},root:{div:"w-full flex items-center gap-[10px]",input:"w-full disabled:cursor-not-allowed placeholder:text-[var(--text-disable)]"},disabled:{true:"border border-[var(--border-main)] bg-[var(--fill-tsp-white-dark)] text-[var(--text-tertiary)] cursor-not-allowed"},error:{true:"ring-[1.5px] ring-[var(--Button-secondary-error-border)]",false:""},bgColor:{gray:"bg-[var(--fill-tsp-white-main)]",white:"bg-[var(--fill-input-chat)]"},paddingSize:{thin:"pt-1 pr-1.5 pb-1 pl-3",medium:"pt-2 pr-3 pb-2 pl-4"},outline:{true:"",false:""}},compoundVariants:[{root:"div",error:!1,outline:!0,class:"focus-within:ring-[1.5px] focus-within:ring-[var(--border-dark)]"},{root:"input",error:!1,outline:!0,class:"focus:ring-[1.5px] focus:ring-[var(--border-dark)]"}],defaultVariants:{inputSize:"medium",root:"div",disabled:!1,error:!1,bgColor:"gray",paddingSize:"medium",outline:!0}});function u(e){let{onClear:t,className:i,inputSize:l,paddingSize:u,bgColor:p,outline:m,error:x,onInputRef:h,prefixIcon:v,suffixIcon:f,onKeyDown:g,onCompositionStart:w,onCompositionEnd:y,...b}=e,C=(0,o.useRef)(null),{onCompositionStart:S,onCompositionEnd:j,onKeyDown:I}=(0,r.o)({onKeyDown:g,onCompositionStart:w,onCompositionEnd:y}),N=!!t||!!v||!!f,k={...b,onKeyDown:I,onCompositionStart:S,onCompositionEnd:j};return N?(0,a.jsxs)("div",{className:(0,n.cn)("group",d({root:"div",disabled:b.disabled,error:x,bgColor:p,inputSize:l,paddingSize:u,outline:m}),i),onClick:()=>{var e;null===(e=C.current)||void 0===e||e.focus()},children:[v,(0,a.jsx)("input",{...k,className:(0,n.cn)("h-full min-w-1 flex-1 bg-transparent disabled:cursor-not-allowed placeholder:text-[var(--text-disable)]"),ref:e=>{C.current=e,h&&("function"==typeof h?h(e):h.current=e)}}),f,(0,a.jsx)(c.j,{condition:!!t&&!b.disabled,children:(0,a.jsx)(s.$,{className:(0,n.cn)(b.value?"":"hidden","cursor-pointer opacity-0 hover:opacity-90 group-hover:opacity-100 group-focus-within:opacity-100"),onClick:e=>{null==t||t(e)},size:16})})]}):(0,a.jsx)("input",{className:(0,n.cn)(d({root:"input",disabled:b.disabled,error:x,bgColor:p,inputSize:l,paddingSize:u,outline:m}),i),ref:h,...k})}},7487:(e,t,i)=>{"use strict";i.d(t,{R:()=>u});var a=i(2635),r=i(21731),s=i(99515);let n=new Map,l=e=>{let t=n.get(e);if(!t)return;let i=()=>{let a=(performance.now()-t.startTime)/1e3*360,r=[];t.elements.forEach(e=>{e.isConnected?e.style.transform="rotate(".concat(a,"deg)"):r.push(e)}),r.forEach(e=>{t.elements.delete(e)}),t.elements.size>0?t.animationId=requestAnimationFrame(i):o(e)};null===t.animationId&&(t.animationId=requestAnimationFrame(i))},o=e=>{let t=n.get(e);t&&(null!==t.animationId&&cancelAnimationFrame(t.animationId),n.delete(e))},c=(e,t)=>{if(!e||!t){console.warn("[useSyncedLoadingController] Invalid key or element provided");return}n.has(e)||n.set(e,{startTime:performance.now(),elements:new Set,animationId:null});let i=n.get(e);i&&(i.elements.add(t),l(e))},d=(e,t)=>{if(!e||!t)return;let i=n.get(e);i&&(i.elements.delete(t),0===i.elements.size&&o(e))};function u(e){let{text:t="",size:i=16,fullScreen:n=!1,mask:l=!1,maskColor:o="bg-[linear-gradient(180deg,#F3F3F3_0%,#EDEDED_100%)]",className:u,color:p="var(--icon-primary)",syncedAnimationKey:m}=e,{elementRef:x,shouldUseCSSAnimation:h}=function(e){let{syncedAnimationKey:t}=e,i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=i.current;if(t&&e)return c(t,e),()=>{d(t,e)}},[t]),{elementRef:t?i:void 0,shouldUseCSSAnimation:!t}}({syncedAnimationKey:m}),v=Math.max(2,Math.floor(i/8));return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center gap-4 ",n?"min-h-full":"",l?"absolute min-h-full min-w-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-70 z-10":"",l&&o,u),children:[(0,a.jsx)("div",{ref:x,style:{width:i,height:i,borderWidth:v,borderColor:p.startsWith("var(")?"color-mix(in srgb, ".concat(p," 20%, transparent)"):p,borderTopColor:p},className:(0,r.cn)("border rounded-full",h&&"animate-spin")}),t&&(0,a.jsx)("div",{className:(0,r.cn)("text-[var(--text-tertiary)]",i<=24?"text-sm":i<=32?"text-base":i<=48?"text-lg":i<=64?"text-xl":"text-2xl"),children:t})]})}},12138:(e,t,i)=>{"use strict";i.d(t,{I:()=>u,m:()=>p});var a=i(2635),r=i(91452),s=i(40757),n=i(17923),l=i(93847),o=i(21731),c=i(25850),d=i(57271);let u=e=>{var t;let{className:i,style:u}=e,p=(0,r.GV)(s.R.selectors.planKey),m=(0,r.GV)(n.M.selectors.planList),x=e.planKey||p,h=null===(t=m.find(e=>e.plan===(0,l.wZ)(x)))||void 0===t?void 0:t.planName;return h?(0,a.jsx)("span",{className:(0,o.cn)("font-georgia text-base w-max max-w-full font-bold leading-[22px]",i),style:u,children:d.I.t("{product} {planName}",{product:c.KR,planName:h})}):null},p=e=>{var t;let{className:i,style:c}=e,d=(0,r.GV)(s.R.selectors.planKey),u=(0,r.GV)(n.M.selectors.planList),p=e.planKey||d,m=null===(t=u.find(e=>e.plan===(0,l.wZ)(p)))||void 0===t?void 0:t.planName;return m?(m=m.toUpperCase(),(0,a.jsx)("span",{className:(0,o.cn)("flex items-center justify-center px-1.5 py-0 rounded-full font-georgia","text-[var(--text-primary)] font-bold border border-[var(--border-dark)] text-[10px] leading-4",i),style:c,children:m})):null}},32595:(e,t,i)=>{"use strict";i.d(t,{b:()=>v});var a=i(2635),r=i(75958),s=i(21731),n=i(2495),l=i(25850),o=i(57271),c=i(32971),d=i(8398),u=i(84317),p=i(1566),m=i(99515),x=i(76743),h=i(78308);function v(e){var t,i,o,u,p;let{onDisposed:x,mediaList:h=[],src:v,videoAutoPlay:g,imageClassName:w}=e,[y,b]=(0,m.useState)(()=>{var e;return null!==(e=h.findIndex(e=>e.url===v))&&void 0!==e?e:0}),C=(0,r.w)(e=>{"Escape"===e.key?x():"ArrowLeft"===e.key?y>0&&b(y-1):"ArrowRight"===e.key&&y<h.length-1&&b(y+1)});(0,m.useEffect)(()=>(window.addEventListener("keydown",C),()=>{window.removeEventListener("keydown",C)}),[C]);let S=(0,r.w)(e=>(0,l.AE)(e)?"video":(0,l.L8)(e)?"audio":"image"),j=h[y];return(0,a.jsx)("div",{className:"fixed inset-0 bg-[var(--background-preview-mask)] backdrop-blur-[4px] flex items-center justify-center",onClick:()=>{e.onDisposed()},children:(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)(n.A,{isMultipleImages:h.length>1,videoAutoPlay:!!g&&((0,c.A)(g)?g:g()),data:{originalFilename:null!==(i=null!==(t=null==j?void 0:j.filename)&&void 0!==t?t:e.filename)&&void 0!==i?i:"",type:S(null!==(u=null!==(o=null==j?void 0:j.filetype)&&void 0!==o?o:e.filetype)&&void 0!==u?u:""),url:null!==(p=null==j?void 0:j.url)&&void 0!==p?p:e.src},mediaClassName:w}),(0,a.jsx)("button",{className:"absolute top-8 right-8 text-[var(--text-white)] bg-[#B9B9B7] rounded-full p-2 hover:opacity-85 cursor-pointer",onClick:()=>{e.onDisposed()},children:(0,a.jsx)(d.A,{size:24,color:"#535350"})}),h.length>1&&(0,a.jsx)(f,{className:(0,s.cn)("absolute left-1/2 -translate-x-1/2 w-full"),selectedIndex:y,images:h,onSelectImage:e=>{b(e)}})]})})}function f(e){let{images:t,onSelectImage:i,selectedIndex:n,className:l}=e,c=(0,m.useRef)([]);(0,m.useEffect)(()=>{c.current=Array(t.length).fill(null).map((e,t)=>c.current[t]||null)},[t.length]);let d=(0,r.w)(()=>{n>0&&i(n-1)}),v=(0,r.w)(()=>{n<t.length-1&&i(n+1)});return(0,a.jsxs)("div",{className:(0,s.cn)("relative",l),onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)("div",{className:"absolute left-8 top-1/2 -translate-y-1/2",children:(0,a.jsx)(h.m,{title:o.I.t({message:"Prev",comment:"Previous one"}),placement:"right",children:(0,a.jsx)(x.A,{className:(0,s.cn)("flex items-center justify-center w-10 h-10 p-0 rounded-full clickable","bg-[#535350] shadow-[0px_0px_1.25px_0px_rgba(0, 0, 0, 0.15),_0px_5px_16px_0px_rgba(0, 0, 0, 0.15)] backdrop-blur-2xl"),disabled:0===n,onClick:d,icon:(0,a.jsx)(u.A,{size:24,color:"white"}),variant:"icon"})})}),(0,a.jsx)("div",{className:"absolute right-8 top-1/2 -translate-y-1/2",children:(0,a.jsx)(h.m,{title:o.I.t({message:"Next",comment:"Next one"}),placement:"left",children:(0,a.jsx)(x.A,{className:(0,s.cn)("flex items-center justify-center w-10 h-10 p-0 rounded-full clickable","bg-[#535350] shadow-[0px_0px_1.25px_0px_rgba(0, 0, 0, 0.15),_0px_5px_16px_0px_rgba(0, 0, 0, 0.15)] backdrop-blur-2xl"),disabled:n===t.length-1,onClick:v,icon:(0,a.jsx)(p.A,{size:24,color:"white"}),variant:"icon"})})})]})}},61640:(e,t,i)=>{"use strict";i.d(t,{u:()=>o});var a=i(2635),r=i(75958),s=i(21731),n=i(99515);let l=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];function o(e){let{className:t,classNames:i,value:o=0,disabled:c,onValueChange:d,min:u=0,max:p=100,step:m=1,onKeyDown:x,onPointerDown:h,onPointerMove:v,onPointerUp:f,children:g}=e,w=(0,n.useRef)(null),y=(0,n.useRef)(),b=(0,n.useRef)(null),C=void 0===o?0:(o-u)/(p-u)*100,S=(0,r.w)(e=>{var t,i;if(!w.current)return 0;let a=y.current||w.current.getBoundingClientRect();y.current=a;let r=(t=[0,a.width],i=[u,p],e=>{if(t[0]===t[1]||i[0]===i[1])return i[0];let a=(i[1]-i[0])/(t[1]-t[0]);return i[0]+a*(e-t[0])})(e-a.left),s=u+Math.round((r-u)/m)*m;return Math.min(p,Math.max(u,s))});return(0,a.jsxs)("span",{ref:w,className:(0,s.cn)("group relative hover:z-10 flex h-1 flex-1 min-w-0 cursor-pointer select-none items-center",t),onKeyDown:e=>{if(null==x||x(e),!e.defaultPrevented&&l.includes(e.key)&&!c){e.preventDefault();let t=Math.min(p,Math.max(u,o+("ArrowUp"===e.key||"ArrowRight"===e.key?m:-m)));null==d||d(t)}},onPointerDown:e=>{if(null==h||h(e),!e.defaultPrevented&&(e.target.setPointerCapture(e.pointerId),e.preventDefault(),b.current&&b.current.focus(),!c)){let t=S(e.clientX);null==d||d(t)}},onPointerMove:e=>{if(null==v||v(e),!e.defaultPrevented&&e.target.hasPointerCapture(e.pointerId)){let t=S(e.clientX);null==d||d(t)}},onPointerUp:e=>{if(null==f||f(e),e.defaultPrevented)return;let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),y.current=void 0)},children:[g,(0,a.jsx)("span",{"data-disabled":c?"":void 0,className:(0,s.cn)("relative h-full w-full rounded-full bg-[var(--fill-tsp-gray-dark)]",null==i?void 0:i.track),children:(0,a.jsx)("span",{"data-disabled":c?"":void 0,className:(0,s.cn)("absolute h-full rounded-full bg-[var(--text-blue)]",null==i?void 0:i.range),style:{left:"0%",right:100-(o-u)/(p-u)*100+"%"}})}),(0,a.jsx)("span",{className:(0,s.cn)("absolute -translate-x-1/2 p-[3px]",null==i?void 0:i.thumbWrapper),style:{left:"".concat(C,"%")},children:(0,a.jsx)("span",{role:"slider",ref:b,tabIndex:c?void 0:0,"data-disabled":c?"":void 0,className:(0,s.cn)("relative block h-[14px] w-[14px] rounded-full bg-[var(--text-blue)] transition-all focus:outline-none border-2 border-[var(--fill-input-chat)] drop-shadow-[0px_1px_4px_rgba(0,0,0,0.06)]",null==i?void 0:i.thumb),style:void 0===o?{display:"none"}:e.style})})]})}},67260:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var a=i(2635),r=i(44616),s=i(21731);function n(e){let{className:t,onKeyDown:i,onCompositionStart:n,onCompositionEnd:l,...o}=e,{onCompositionStart:c,onCompositionEnd:d,onKeyDown:u}=(0,r.o)({onKeyDown:i,onCompositionStart:n,onCompositionEnd:l});return(0,a.jsx)("textarea",{className:(0,s.cn)("resize-none px-4 py-3","rounded-[10px] bg-[var(--fill-tsp-white-main)]","text-sm leading-[22px]","text-[var(--text-primary)]","disabled:text-[var(--text-tertiary)]","disabled:cursor-not-allowed","placeholder:text-[var(--text-disable)]","focus:ring-[1.5px] focus:ring-[var(--border-dark)]",t),onKeyDown:u,onCompositionStart:c,onCompositionEnd:d,...o})}},88387:(e,t,i)=>{"use strict";i.d(t,{d:()=>o});var a=i(2635),r=i(21731),s=i(48734);let n=(0,s.F)("rounded-[16px] transition-colors",{variants:{size:{small:"w-[22px] h-[14px] p-[1px]",medium:"w-[26px] h-[16px] p-[1px]",large:"w-[36px] h-[20px] p-[2px]"},disabled:{true:"opacity-50 cursor-not-allowed"},checked:{true:"bg-[var(--icon-blue)]",false:"bg-[var(--icon-disable)]"}},defaultVariants:{size:"medium"}}),l=(0,s.F)("block pointer-events-none rounded-full bg-[var(--icon-white)] transition-transform",{variants:{size:{small:"size-3",medium:"size-3.5",large:"size-4"},checked:{true:"",false:""}},compoundVariants:[{size:"small",checked:!0,className:"translate-x-2 rtl:-translate-x-2"},{size:"medium",checked:!0,className:"translate-x-2.5 rtl:-translate-x-2.5"},{size:"large",checked:!0,className:"translate-x-4 rtl:-translate-x-4"}],defaultVariants:{size:"medium"}});function o(e){let{size:t="medium",label:i,className:s,checked:o,onCheckedChange:c,onClick:d,disabled:u,...p}=e;return(0,a.jsxs)("button",{type:"button",role:"switch","data-checked":o?"":void 0,"data-disabled":u?"":void 0,className:(0,r.cn)("group flex items-center gap-2 cursor-pointer",s),onClick:e=>{null==d||d(e),u||e.defaultPrevented||null==c||c(!o)},...p,children:[(0,a.jsx)("div",{className:n({size:t,disabled:u,checked:o}),children:(0,a.jsx)("span",{className:l({size:t,checked:o})})}),i&&(0,a.jsx)("span",{className:"text-[var(--text-secondary)] group-data-[checked]:text-[var(--text-primary)] text-[13px] leading-[18px] select-none ",children:i})]})}},24683:(e,t,i)=>{"use strict";i.d(t,{t:()=>c});var a=i(2635),r=i(75958),s=i(21731),n=i(65623),l=i(99515),o=i(93607);function c(e){let{disabled:t,options:i,value:c,onChange:d,className:u,classNames:p}=e,m=(0,l.useId)(),x="tab-item-bg-".concat(m),h=(0,r.w)(e=>{t||null==d||d(e)});return(0,a.jsx)("div",{className:(0,s.cn)("rounded-[8px] border-[1px] border-[var(--border-main)] bg-[var(--fill-tsp-gray-main)]","h-8 p-[2px] flex items-center",t?"cursor-not-allowed opacity-50":"",null==p?void 0:p.root),children:i.map(e=>(0,a.jsxs)("li",{className:"relative list-none flex items-center h-full",children:[(0,a.jsx)("button",{onClick:()=>h(e.value),"data-active":c===e.value?"":void 0,className:(0,s.cn)("min-w-12 px-4","text-[13px] leading-[18px] font-[400] text-[var(--text-tertiary)] hover:text-[var(--text-secondary)]","data-[active]:text-[var(--text-primary)] data-[active]:font-[500] transition-colors duration-200","clickable relative z-10",t?"cursor-not-allowed":"",u||(null==p?void 0:p.item)),children:"function"==typeof e.label?e.label(c===e.value,e):e.label}),(0,a.jsx)(o.j,{condition:c===e.value,children:(0,a.jsx)(n.P.div,{className:(0,s.cn)("absolute inset-0 bg-[var(--fill-white)] rounded-[6px] shadow-[0px_0.5px_3px_0px_var(--shadow-S)]",null==p?void 0:p.activeBg),layout:"position",layoutId:x,layoutDependency:c,transition:{type:"spring",stiffness:300,damping:30}},String(e.value))})]},String(e.value)))})}},19737:(e,t,i)=>{"use strict";i.d(t,{T:()=>l});var a=i(2635),r=i(44616),s=i(21731),n=i(99515);let l=n.forwardRef((e,t)=>{let{className:i,autoResize:l,value:o,autoFocus:c,onKeyDown:d,onCompositionStart:u,onCompositionEnd:p,...m}=e,x=n.useRef(null);n.useImperativeHandle(t,()=>x.current);let{onCompositionStart:h,onCompositionEnd:v,onKeyDown:f}=(0,r.o)({onKeyDown:d,onCompositionStart:u,onCompositionEnd:p}),g=n.useCallback(()=>{let e=x.current;if(!e||!l)return;let t=e.scrollTop,i=window.getComputedStyle(e),a=parseInt(i.borderTopWidth,10),r=parseInt(i.borderBottomWidth,10),s=e.cloneNode(),n=window.getComputedStyle(e);s.style.position="absolute",s.style.visibility="hidden",s.style.height="auto",s.style.width=n.width,s.style.minHeight=n.minHeight,s.style.maxHeight=n.maxHeight,s.style.padding=n.padding,s.style.border=n.border,s.style.boxSizing=n.boxSizing,s.value=e.value,document.body.appendChild(s);let o=s.scrollHeight+a+r;document.body.removeChild(s),e.style.height="".concat(o,"px"),e.scrollTop=t},[l]);return n.useEffect(()=>{l&&g()},[o,g,l]),n.useEffect(()=>{if(l)return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[g,l]),n.useEffect(()=>{if(c){let e=x.current;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))}},[c,t]),(0,a.jsx)("textarea",{className:(0,s.cn)("flex w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",l&&"overflow-hidden",i),ref:x,value:o,autoFocus:c,onKeyDown:f,onCompositionStart:h,onCompositionEnd:v,...m})});l.displayName="Textarea"},93607:(e,t,i)=>{"use strict";function a(e){let{condition:t,children:i}=e;return t?i:null}i.d(t,{j:()=>a})},85078:(e,t,i)=>{"use strict";i.d(t,{W:()=>l});var a=i(59496),r=i(99515),s=i(75958),n=i(9205);function l(){let[e,t]=(0,r.useState)(!1),i=(0,s.w)(async function(i){if(e)return null;t(!0);try{return await i()}catch(e){(0,n.oR)({variant:"warning",title:a.P.formatErrorToString(e)})}finally{t(!1)}return null});return{isLoading:e,run:i}}},44616:(e,t,i)=>{"use strict";i.d(t,{o:()=>s});var a=i(99515),r=i(75958);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onKeyDown:t,onCompositionStart:i,onCompositionEnd:s}=e,n=(0,a.useRef)(!1),l=(0,a.useRef)(null),o=(0,a.useRef)(null),c=(0,r.w)(e=>{l.current&&(clearTimeout(l.current),l.current=null),o.current&&(clearTimeout(o.current),o.current=null),n.current=!0,null==i||i(e)});return{onCompositionStart:c,onCompositionEnd:(0,r.w)(e=>{l.current=setTimeout(()=>{o.current=setTimeout(()=>{n.current=!1})}),null==s||s(e)}),onKeyDown:(0,r.w)(e=>{if(n.current&&("Escape"===e.key||"Enter"===e.key&&!e.shiftKey)){e.stopPropagation();return}null==t||t(e)}),isComposing:(0,r.w)(()=>n.current)}}},98637:(e,t,i)=>{"use strict";i.d(t,{x:()=>n});var a=i(94794),r=i(99515),s=i(75958);function n(e,t,i){let n=(0,s.w)(e);return(0,r.useMemo)(()=>(0,a.A)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(...t)},t,i),[])}},51416:(e,t,i)=>{"use strict";i.d(t,{s:()=>n});var a=i(33890),r=i(99515),s=i(75958);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.useRef)(null),n=(0,r.useContext)(a.M);if(!n)throw Error("useDialog must be used within a DialogProvider");let l=(0,s.w)(()=>{i.current&&n.close(i.current),i.current=null}),o=(0,s.w)(()=>{n.closeAll()});return{open:(0,s.w)(a=>{let{singleton:s,closeWhenNextTrigger:c,closeBeforeDialog:d,ignoreWhenOpen:u}=t;if(s&&i.current&&n.exist(i.current)&&(u||(c||d)&&(l(),i.current=null,c)))return;let p=(0,r.createElement)(e,{...a,onDisposed:l,onDisposedAll:o});i.current=n.open(p,t)}),close:l,closeAll:o,exist:(0,s.w)(()=>!!i.current&&n.exist(i.current))}}},63364:(e,t,i)=>{"use strict";i.d(t,{m:()=>s});var a=i(99515),r=i(75958);function s(e){let[t,i]=(0,a.useState)(e.initValues||{}),[s,n]=(0,a.useState)({}),l=(0,r.w)((t,i)=>{let a={};return Object.entries(e.validator).forEach(e=>{let[r,s]=e,n=i[r];if("onBlur"!==t&&"onChange"!==t||n)for(let e=0;e<s.length;e++){let t=s[e];if(t&&("required"in t&&t.required&&!n||"validator"in t&&t.validator&&!t.validator(n))){a[r]=t.message;break}}}),n(a),!!Object.keys(a).length}),o=(0,r.w)((e,a)=>{let r={...t,[e]:a};(null==s?void 0:s[e])&&n({...s,[e]:void 0}),i(r)});return{formValues:t,formError:s,setFormError:n,handleValidate:l,handleChange:o}}},27168:(e,t,i)=>{"use strict";i.d(t,{D:()=>s,a:()=>n});var a=i(35014),r=i(43441);let s=960;function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,{isMobile:t}=(0,r.V)(),i=(0,a.U)("(max-width: ".concat(e-1,"px)")),n=t();return!0===n?n:i}},35014:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});var a=i(99515);function r(e){let[t,i]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{let t=window.matchMedia(e),a=e=>{i(e.matches)};return t.addEventListener("change",a),i(t.matches),()=>t.removeEventListener("change",a)},[e]),t}},43441:(e,t,i)=>{"use strict";i.d(t,{V:()=>s});var a=i(81820),r=i(62121);function s(){function e(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r.G.userAgent)}function t(){return a.d.isInApp()}return{isMobile:e,isMac:function(){return/Mac/i.test(r.G.userAgent)},isWindows:function(){return/Win/i.test(r.G.userAgent)},isInApp:t,getPlatform:function(){return t()?"app":e()?"h5":"web"}}}},31867:(e,t,i)=>{"use strict";i.d(t,{D:()=>s});var a=i(44678),r=i(99515);function s(){return(0,r.useContext)(a.D)}},72522:(e,t,i)=>{"use strict";i.d(t,{k:()=>n});var a=i(67813),r=i(99515),s=i(75958);function n(e,t,i){let n=(0,s.w)(e);return(0,r.useMemo)(()=>(0,a.A)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(...t)},t,i),[])}},95370:(e,t,i)=>{"use strict";i.d(t,{$:()=>d,s:()=>c});var a=i(16834),r=i(21731),s=i(81820),n=i(62121),l=i(74958),o=i(99515);function c(){let e=(0,l.usePathname)();(0,o.useEffect)(()=>{let e=new URL(location.href).searchParams,t=e.get("utm_source"),i=e.get("utm_campaign");t&&localStorage.setItem(a.d5.utmSource,t),i&&localStorage.setItem(a.d5.utmCampaign,i)},[e])}function d(){return{firstFromPlatform:n.G.isRunInServerSide?"":s.d.isInApp()?s.d.isIosApp()?"ios":s.d.isAndroidApp()?"android":"app":(0,r.Fr)()?"h5":new URL(location.href).searchParams.get("from")||"web",utmSource:localStorage.getItem(a.d5.utmSource)||void 0,utmCampaign:localStorage.getItem(a.d5.utmCampaign)||void 0}}},78140:(e,t,i)=>{"use strict";i.d(t,{S:()=>r});var a=i(2635);function r(e){let{size:t=16,...i}=e;return(0,a.jsx)("svg",{width:t,height:t,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8081 3.57564C14.0424 3.80995 14.0424 4.18985 13.8081 4.42417L6.47478 11.7575C6.24047 11.9918 5.86057 11.9918 5.62626 11.7575L2.29292 8.42417C2.05861 8.18985 2.05861 7.80995 2.29292 7.57564C2.52724 7.34132 2.90714 7.34132 3.14145 7.57564L6.05052 10.4847L12.9596 3.57564C13.1939 3.34132 13.5738 3.34132 13.8081 3.57564Z",fill:i.color||"#25BA3B"})})}},55866:(e,t,i)=>{"use strict";i.d(t,{K:()=>s});var a=i(2635),r=i(99515);function s(e){let{size:t=16,color:i="currentColor",className:s}=e,n=(0,r.useId)();return(0,a.jsxs)("svg",{className:s,height:t,width:t,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{clipPath:"url(#".concat(n,"_clip0_1152_60258)"),children:[(0,a.jsx)("path",{d:"M10.0013 18.3332C14.6037 18.3332 18.3346 14.6022 18.3346 9.99984C18.3346 5.39746 14.6037 1.6665 10.0013 1.6665C5.39893 1.6665 1.66797 5.39746 1.66797 9.99984C1.66797 14.6022 5.39893 18.3332 10.0013 18.3332Z",stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.66667"}),(0,a.jsx)("path",{d:"M10 6.6665V9.99984",stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.66667"}),(0,a.jsx)("path",{d:"M10 13.3335H10.0083",stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.66667"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"".concat(n,"_clip0_1152_60258"),children:(0,a.jsx)("rect",{height:"20",width:"20",fill:"white"})})})]})}},56163:(e,t,i)=>{"use strict";i.d(t,{$:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-tertiary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("g",{clipPath:"url(#35f4cef44cbf3246b803c5b8237652ea0)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99994 0.733322C3.98667 0.733322 0.733276 3.98672 0.733276 7.99999C0.733276 12.0133 3.98667 15.2667 7.99994 15.2667C12.0132 15.2667 15.2666 12.0133 15.2666 7.99999C15.2666 3.98672 12.0132 0.733322 7.99994 0.733322ZM6.42421 5.57573C6.18989 5.34141 5.80999 5.34141 5.57568 5.57573C5.34136 5.81004 5.34136 6.18994 5.57568 6.42425L7.15141 7.99999L5.57568 9.57572C5.34136 9.81004 5.34136 10.1899 5.57568 10.4243C5.80999 10.6586 6.18989 10.6586 6.42421 10.4243L7.99994 8.84852L9.57568 10.4243C9.80999 10.6586 10.1899 10.6586 10.4242 10.4243C10.6585 10.1899 10.6585 9.81004 10.4242 9.57572L8.84847 7.99999L10.4242 6.42425C10.6585 6.18994 10.6585 5.81004 10.4242 5.57573C10.1899 5.34141 9.80999 5.34141 9.57568 5.57573L7.99994 7.15146L6.42421 5.57573Z",fill:"currentColor"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"35f4cef44cbf3246b803c5b8237652ea0",children:(0,a.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})}r._id="35f4cef44cbf3246b803c5b8237652ea"},63226:(e,t,i)=>{"use strict";i.d(t,{m:()=>r});var a=i(2635);function r(e){let{size:t=16,color:i="currentColor"}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 20 20",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_28_5587)",children:[(0,a.jsx)("path",{d:"M9.99996 18.3332C14.6023 18.3332 18.3333 14.6022 18.3333 9.99984C18.3333 5.39746 14.6023 1.6665 9.99996 1.6665C5.39759 1.6665 1.66663 5.39746 1.66663 9.99984C1.66663 14.6022 5.39759 18.3332 9.99996 18.3332Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10 13.3333V10",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M10 6.6665H10.0083",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_28_5587",children:(0,a.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}},46859:(e,t,i)=>{"use strict";i.d(t,{f:()=>r});var a=i(2635);let r=e=>{let{size:t=24,color:i="currentColor"}=e;return(0,a.jsxs)("svg",{height:t,width:t,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M17.6334 22.5843C19.2956 21.5298 20.4448 15.8741 20.192 14.1899C20.192 14.1899 19.9285 13.2858 19.2857 13.2857C18.6428 13.2857 18.3754 13.963 18.3754 13.963C18.3754 13.963 18.2062 14.5883 17.9406 15.3756C17.5298 16.5934 17.3571 18.0962 16.2857 18.4767C15.2143 18.8571 14.1429 18.4971 14.1429 18.4971C14.8714 21.2602 15.9713 23.6389 17.6334 22.5843Z",fill:i}),(0,a.jsx)("path",{d:"M9.39785 12.235C8.78721 12.3035 8.46558 12.5343 8.35707 12.6428C7.9285 13.0714 7.71422 13.5 7.71422 13.7143C7.71422 13.9286 7.21009 12.7111 7.09932 12.597C6.76953 12.2574 6.7775 11.7148 7.11711 11.385C7.59386 10.922 8.37354 10.6249 9.20685 10.5314C10.0711 10.4345 11.096 10.5425 12.1331 11.0019C13.3435 11.5381 13.9917 12.6685 14.2366 13.7016C14.3609 14.226 14.3926 14.7649 14.3289 15.256C14.2671 15.7328 14.1044 16.2427 13.7658 16.6307C13.0605 17.4391 12.0203 17.348 11.4575 17.2286C11.1404 17.1614 10.8607 17.0626 10.664 16.9832C10.5642 16.943 10.4823 16.9063 10.4235 16.8788C10.394 16.865 10.3701 16.8534 10.3524 16.8446C10.3436 16.8402 10.3363 16.8366 10.3306 16.8337L10.3234 16.83L10.3207 16.8286L10.319 16.8277C10.319 16.8277 10.3186 16.8275 10.7144 16.0672L10.3186 16.8275C9.89868 16.6089 9.73553 16.0912 9.95414 15.6714C10.1723 15.2523 10.6883 15.089 11.1078 15.3057M11.1078 15.3057L11.1088 15.3062ZM11.1078 15.3057L11.1139 15.3087C11.1209 15.3122 11.1332 15.3182 11.1504 15.3263C11.185 15.3425 11.2382 15.3664 11.3052 15.3934C11.4421 15.4486 11.6229 15.5113 11.8133 15.5517C12.2654 15.6476 12.4279 15.5566 12.474 15.5037C12.5112 15.4611 12.5921 15.3191 12.6289 15.0356C12.6638 14.7665 12.649 14.4366 12.5685 14.0969C12.4037 13.4017 12.0093 12.822 11.4388 12.5693C10.6951 12.2399 9.9775 12.1701 9.39785 12.235",fill:i,fillRule:"evenodd"}),(0,a.jsx)("path",{d:"M3.73099 3.37839C3.52251 3.80339 3.69804 4.31694 4.12304 4.52542C4.73349 4.82486 5.26324 5.12013 5.78774 5.71148C6.10186 6.06563 6.6436 6.09809 6.99776 5.78397C7.35191 5.46985 7.38436 4.92811 7.07024 4.57395C6.32282 3.73128 5.55348 3.31767 4.87802 2.98633C4.45301 2.77785 3.93947 2.95338 3.73099 3.37839Z",fill:i,fillRule:"evenodd"}),(0,a.jsx)("path",{d:"M8.3635 0.882627C7.90425 0.99744 7.62503 1.46281 7.73984 1.92207C7.82005 2.24292 7.89486 2.51727 7.96334 2.76842C8.09441 3.24911 8.20231 3.6448 8.28056 4.11886C8.35767 4.58592 8.7988 4.90205 9.26587 4.82494C9.73294 4.74784 10.0491 4.3067 9.97196 3.83964C9.87946 3.27934 9.73543 2.74921 9.59087 2.21711C9.52686 1.98149 9.46274 1.74548 9.40294 1.50629C9.28813 1.04704 8.82275 0.767814 8.3635 0.882627Z",fill:i,fillRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.0002 4.28568C12.2145 3.42854 12.4288 2.78568 12.8188 2.14282",stroke:i,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"1.71429"}),(0,a.jsx)("path",{d:"M15.1487 8.35727C16.8491 8.69706 16.8494 8.6958 16.8494 8.6958L16.8496 8.69453L16.8501 8.69193L16.8511 8.68653L16.8531 8.67496C16.8545 8.66689 16.856 8.65812 16.8575 8.64867C16.8606 8.6298 16.8638 8.60805 16.867 8.58372C16.8734 8.53539 16.8798 8.475 16.884 8.40509C16.8922 8.27039 16.8939 8.07464 16.8594 7.84762C16.7941 7.41756 16.5437 6.60238 15.661 6.12983L15.4864 6.03634L15.2956 5.98352L14.8568 7.61871C15.2481 7.82818 15.1487 8.35727 15.1487 8.35727ZM14.8768 9.43607L15.1487 8.35727L16.8491 8.69706L16.8398 8.74684L16.5653 9.83594C16.5124 10.1036 16.5055 10.2566 16.5084 10.3375C16.5107 10.4033 16.5193 10.4249 16.5235 10.4355L16.524 10.4367C16.5347 10.4641 16.5625 10.5234 16.664 10.6773C16.7053 10.74 16.7483 10.8029 16.8031 10.883C16.8176 10.9042 16.8329 10.9266 16.8493 10.9505C16.9229 11.0584 17.009 11.1856 17.1003 11.3278C17.6706 12.2166 17.7266 13.0696 17.7236 13.6163C17.7236 13.6243 17.7235 13.6323 17.7234 13.6402C17.7916 13.6636 17.864 13.6872 17.9409 13.7117C17.9663 13.7198 18 13.7304 18.0353 13.7415C18.0849 13.7572 18.1378 13.7739 18.1756 13.786C18.2499 13.8098 18.3448 13.8409 18.4366 13.8751C18.5005 13.8989 18.5618 13.9226 18.6195 13.9465C18.6748 13.9695 18.7424 13.9989 18.8136 14.0348C18.8687 14.0626 18.9585 14.1103 19.0601 14.1808L19.9532 14.5651L19.9403 15.7093C19.9327 16.382 19.662 17.0912 19.4701 17.5302C19.2584 18.0143 18.9788 18.5305 18.7214 18.8736C18.3619 19.3529 17.9545 19.8588 17.4645 20.1824C17.1756 20.3732 16.8268 20.5248 16.4152 20.5745C16.0485 20.6188 15.7311 20.5697 15.498 20.513L15.4292 20.4989C15.3601 20.4847 15.2612 20.4643 15.1407 20.4392C14.9 20.3891 14.572 20.3201 14.2241 20.2445C13.5827 20.1052 12.7133 19.9104 12.3032 19.7743L12.2735 19.7644L12.2443 19.7536C12.0624 19.6861 11.7549 19.6103 11.2455 19.4941C11.2147 19.4871 11.1833 19.48 11.1514 19.4727C10.7119 19.3727 10.1711 19.2496 9.659 19.0945C9.1286 18.9339 8.47257 18.695 7.91553 18.3057C7.33086 17.8972 6.66614 17.1767 6.62912 16.0959C6.62358 15.9342 6.6273 15.7778 6.6373 15.6294C6.37402 15.3441 6.15304 14.971 6.04136 14.4932C5.93256 14.0278 5.99274 13.6152 6.06907 13.3256C6.14561 13.0352 6.26188 12.7814 6.35905 12.5917C6.39184 12.5277 6.42586 12.4645 6.4598 12.4035C6.1384 12.3021 5.77538 12.1768 5.42207 12.0262C4.96063 11.8295 4.3059 11.505 3.8171 10.9811C3.55384 10.699 3.27819 10.2946 3.16674 9.76591C3.0501 9.21264 3.14701 8.68179 3.37414 8.22725C3.92701 7.12076 4.98308 6.72982 5.92235 6.696C6.77048 6.66546 7.67298 6.90278 8.48162 7.1864C9.21839 7.4448 10.2729 7.92543 11.1687 8.34407C11.4638 7.86023 11.8527 7.3135 12.221 6.87194L12.2941 6.78423L12.3788 6.70718C13.0123 6.13055 13.7239 5.93668 14.2662 5.8951C14.5321 5.87472 14.761 5.88992 14.9322 5.91216C15.0187 5.92339 15.0933 5.93678 15.1539 5.94944C15.1843 5.95579 15.2114 5.96202 15.235 5.96779C15.2469 5.97067 15.2578 5.97345 15.2679 5.97609L15.2824 5.97992L15.2892 5.98176L15.2924 5.98265L15.294 5.98309C15.294 5.98309 15.2956 5.98352 14.8568 7.61871C14.8568 7.61871 14.1726 7.42928 13.5844 7.94851C13.5785 7.95374 13.5725 7.95904 13.5666 7.96442C13.5484 7.9863 13.5301 8.00845 13.5118 8.03085C13.4855 8.06308 13.4591 8.09583 13.4328 8.12899C13.425 8.13873 13.4173 8.1485 13.4096 8.15831C12.8225 8.90308 12.8574 9.21422 11.7858 10.5001C11.7858 10.5001 11.2277 10.2416 10.8938 10.0847C10.6647 9.97699 10.4226 9.86316 10.1758 9.74844C9.37984 9.37832 8.53597 8.99879 7.9287 8.7858C6.43357 8.26142 5.33126 8.19486 4.92892 9.00008C4.39818 10.0623 6.5534 10.6777 7.63639 10.987C7.86446 11.0521 8.04497 11.1037 8.14284 11.1429C8.69829 11.3659 8.73705 11.8133 8.57164 12.2142C8.47511 12.4482 8.42008 12.5801 8.14306 12.8571C7.71449 13.2856 7.64421 13.7931 7.72606 14.1432C7.76703 14.3185 7.84809 14.446 7.94445 14.5386C8.20295 14.7873 8.57155 14.7858 8.57155 14.7858C8.57155 14.7858 8.33388 15.3932 8.35711 16.0716C8.36223 16.2209 8.40239 16.3568 8.4716 16.4811C8.88249 17.2188 10.3173 17.5456 11.5228 17.8202C12.0292 17.9356 12.495 18.0417 12.8276 18.1651C13.4238 18.363 15.857 18.8572 15.857 18.8572C16.306 18.9751 16.5844 18.8325 17.3228 17.848C17.6295 17.4392 18.2043 16.2826 18.2114 15.6575C18.1181 15.6174 18.1116 15.6034 18.1051 15.5893C18.0961 15.57 18.087 15.5506 17.8512 15.4627C17.7724 15.4334 17.6668 15.4001 17.546 15.362C17.0432 15.2034 16.2764 14.9616 16.0715 14.5715C15.972 14.3822 15.9798 14.1281 15.989 13.831C16.0032 13.369 16.0207 12.803 15.643 12.2144C15.5503 12.0699 15.4613 11.9398 15.3781 11.8182C14.9045 11.1258 14.6172 10.7056 14.8768 9.43607ZM6.9568 11.5272C6.9579 11.5241 6.95748 11.5248 6.95611 11.5291L6.9568 11.5272ZM17.7149 14.1614C17.7149 14.1614 17.7148 14.1547 17.7135 14.1431C17.714 14.1559 17.7149 14.1614 17.7149 14.1614Z",fill:i,fillRule:"evenodd"})]})}},96962:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});var a=i(2635);function r(e){let{size:t,bgColor:i="var(--icon-blue)",checkIconColor:r="var(--text-white)",...s}=e;return(0,a.jsxs)("svg",{height:t,width:t,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",...s,children:[(0,a.jsx)("circle",{cx:"10",cy:"10",fill:i,r:"9"}),(0,a.jsx)("path",{d:"M13.4667 8L8.33333 13.1333L6 10.8",stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}},16001:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});var a=i(2635);function r(e){let{color:t="rgba(0,0,0,0.16)",size:i,...r}=e;return(0,a.jsx)("svg",{height:i,width:i,fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,a.jsx)("circle",{cx:"10",cy:"10",r:"8.5",stroke:t})})}},19463:(e,t,i)=>{"use strict";i.d(t,{L:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M14.0914 0.721827C14.1534 0.535432 14.4171 0.535433 14.4791 0.721828L14.8291 1.77428C15.0324 2.38523 15.5117 2.8646 16.1227 3.06782L17.1751 3.41791C17.3615 3.47991 17.3615 3.74357 17.1751 3.80557L16.1227 4.15565C15.5117 4.35888 15.0324 4.83825 14.8291 5.4492L14.4791 6.50165C14.4171 6.68804 14.1534 6.68804 14.0914 6.50165L13.7413 5.4492C13.5381 4.83825 13.0587 4.35888 12.4478 4.15565L11.3953 3.80557C11.2089 3.74357 11.2089 3.47991 11.3953 3.41791L12.4478 3.06782C13.0587 2.8646 13.5381 2.38523 13.7413 1.77428L14.0914 0.721827Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M7.775 2.61733C7.93004 2.15141 8.58899 2.15137 8.74399 2.61733L9.68369 5.44228C10.1511 6.84743 11.2537 7.94995 12.6588 8.41738L15.4837 9.35781C15.9497 9.51282 15.9497 10.1718 15.4837 10.3268L15.1212 10.4469L12.6588 11.2665L12.3988 11.3617C11.1182 11.8732 10.1219 12.9243 9.68369 14.2416L8.86411 16.704L8.74399 17.0666L8.70883 17.1486C8.5215 17.5054 7.99668 17.5055 7.80942 17.1486L7.775 17.0666L6.83457 14.2416C6.39635 12.9243 5.40012 11.8731 4.11948 11.3617L3.85947 11.2665L1.03452 10.3268C0.568551 10.1718 0.568594 9.51286 1.03452 9.35781L1.39633 9.23696L3.85947 8.41738C5.17688 7.97916 6.22869 6.98304 6.74008 5.70229L6.83457 5.44228L7.775 2.61733ZM8.25839 5.91616C7.68028 7.65406 6.36564 9.04128 4.67612 9.71596L4.33335 9.84121L4.32968 9.84194L4.33335 9.84341L4.67612 9.96865C6.36559 10.6434 7.68031 12.0306 8.25839 13.7685L8.25913 13.7714L8.26059 13.7685L8.38584 13.4257C9.06049 11.736 10.4476 10.4215 12.1856 9.84341L12.1886 9.84194L12.1856 9.84121C10.4478 9.26312 9.06055 7.9484 8.38584 6.25893L8.26059 5.91616L8.25913 5.9125L8.25839 5.91616Z",fill:"currentColor"})]})}r._id="c89cbf09a50c6eed6b050c6d5285b7c2"},95040:(e,t,i)=>{"use strict";i.d(t,{O:()=>r});var a=i(2635);function r(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M3.09961 4H4.5",stroke:"url(#8362e9eb7a2f53954866ea50a265b5f10)",strokeWidth:"0.76",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M3.09961 5.5H4.5",stroke:"url(#8362e9eb7a2f53954866ea50a265b5f11)",strokeWidth:"0.76",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6.52051 3.9248H7.56738C7.88495 3.9248 8.14258 4.18244 8.14258 4.5V8.0752H5.94531V4.5C5.94531 4.18244 6.20294 3.9248 6.52051 3.9248Z",stroke:"url(#8362e9eb7a2f53954866ea50a265b5f12)",strokeWidth:"0.85"}),(0,a.jsx)("path",{d:"M2.36719 1.9248H5.36719C5.68475 1.9248 5.94238 2.18244 5.94238 2.5V8.0752H1.79199V2.5C1.79199 2.18244 2.04962 1.9248 2.36719 1.9248Z",stroke:"currentColor",strokeWidth:"0.85"}),(0,a.jsx)("path",{d:"M1.2002 8.09961H8.86719",stroke:"currentColor",strokeWidth:"0.85",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"8362e9eb7a2f53954866ea50a265b5f10",x1:"4",y1:"2.75",x2:"2.09501",y2:"3.74385",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#999999"})]}),(0,a.jsxs)("linearGradient",{id:"8362e9eb7a2f53954866ea50a265b5f11",x1:"4",y1:"4.25",x2:"2.09501",y2:"5.24385",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#999999"})]}),(0,a.jsxs)("linearGradient",{id:"8362e9eb7a2f53954866ea50a265b5f12",x1:"8",y1:"4.5",x2:"5.5",y2:"3",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#999999"})]})]})]})}r._id="8362e9eb7a2f53954866ea50a265b5f1"},99820:(e,t,i)=>{"use strict";i.d(t,{i:()=>r});var a=i(2635);function r(e){let{color:t="var(--icon-disable)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("circle",{cx:"40",cy:"40",r:"29",stroke:"currentColor",strokeWidth:"5.5"}),(0,a.jsx)("path",{d:"M40 43L40 26",stroke:"currentColor",strokeWidth:"5.5",strokeLinecap:"round"}),(0,a.jsx)("circle",{cx:"40",cy:"52.9678",r:"2.96777",fill:"currentColor"})]})}r._id="3fcf70132f0501aedeff371dcf7c9c43"},97603:(e,t,i)=>{"use strict";i.d(t,{K:()=>x,d:()=>u});var a=i(67725),r=i(47059),s=i(32693),n=i(18952),l=i(60040),o=i(12766),c=i(29298),d=i(36076),u=function(e){return e.Plan="plan",e}({});let p={[c.b.Free]:d.A.VipVersionForTrack.free,[c.b.Pro]:d.A.VipVersionForTrack.pro,[c.b.Casual]:d.A.VipVersionForTrack.starter};class m{static createPageViewTrackingEnrichment(){return{name:"page-view-tracking-enrichment",type:"enrichment",setup:async()=>void 0,execute:async e=>{if(e.event_properties)for(let t of m.PROPERTIES_TO_REMOVE)delete e.event_properties[t];return e}}}init(){!this.inited&&o.a.amplitudeKey&&((0,a.WQ)(m.createPageViewTrackingEnrichment()),(0,a.Ts)(o.a.amplitudeKey,{transport:"beacon",autocapture:{elementInteractions:!0},identityStorage:"none",deviceId:l.n.clientId}),this.inited=!0)}async initExperiment(){if(!o.a.amplitudeKey)return null;this.experiment=s.aj.initializeWithAmplitudeAnalytics(o.a.amplitudeKey);try{var e;return await (null===(e=this.experiment)||void 0===e?void 0:e.fetch({})),this.experiment.all()}catch(e){console.error("Amplitude experiment initialization failed:",e)}return null}reset(){this.inited=!1,this.storageUserId=null,this.storageUserProperties={},(0,a.cL)()}setUserId(e){e&&this.storageUserId!==e&&(this.inited||this.init(),this.storageUserId=e,(0,a.do)(e))}trackOnce(e){this.inited||this.init(),(0,a.u4)(e)}batchTrack(e){for(let t of(this.inited||this.init(),e))(0,a.u4)(t)}customUserProperties(e){let t;if(!e||0===Object.keys(e).length)return;this.inited||this.init(),t=this.storageUserProperties?this.extractChangedValues(this.storageUserProperties,e):e,this.storageUserProperties=e;let i=new r.T$;Object.entries(t).forEach(e=>{let[t,a]=e;i.set(t,"number"==typeof a?"".concat(a):a)}),(0,a.ls)(i)}customUserPropertyOne(e,t){if(!e||(this.inited||this.init(),this.storageUserProperties[e]===t))return;this.storageUserProperties[e]=t;let i=new r.T$;i.set(e,t),(0,a.ls)(i)}extractChangedValues(e,t){let i={};return Object.keys(t).forEach(a=>{a in e&&e[a]===t[a]||(i[a]=t[a])}),i}formatToAmplitude(e){let{events:t,clientInfo:i,userInfo:a}=e;return(0,n.T)("server",t.map(e=>{let{eventName:t,extData:r}=e;return{event_type:t,event_properties:{ext_data:r,client_info:i,user_info:a}}}))}formatMemberShipToNumber(e){var t;return null!==(t=p[e])&&void 0!==t?t:d.A.VipVersionForTrack.unknown}constructor(){this.inited=!1,this.storageUserId=null,this.storageUserProperties={},this.experiment=null}}m.PROPERTIES_TO_REMOVE=["page_title","[Amplitude] Page Title"];let x=new m},71348:(e,t,i)=>{"use strict";i.d(t,{f:()=>r});class a{preprocessBracketContent(e){return e.replace(/\[([^\]]*)\]/g,(e,t)=>'<input type="text" default-attrs="'.concat(t,'" />')).replace(/\n/g,"<br>")}parseHtml(e){let t=document.createElement("div");t.innerHTML=e;let i=e=>{let t="";for(let r of e.childNodes)if(r.nodeType===Node.TEXT_NODE){var a;t+=(null===(a=r.textContent)||void 0===a?void 0:a.trim())+" "}else if(r.nodeType===Node.ELEMENT_NODE){if("INPUT"===r.tagName){let e=r.getAttribute("value")||"",i=r.getAttribute("default-attrs")||r.getAttribute("defaultAttrs")||"",a=this.splitByEquals(i),s=this.isSelectComp(i)&&!i.includes("=");e.trim()||(e=s?this.getSelectOption(i)[0]||"":(null==a?void 0:a[1])||""),t+=e+" "}else"BR"===r.tagName?t+="\n":"P"===r.tagName?(t+=i(r),r.nextSibling&&(t+="\n")):t+=i(r)}return t};return i(t)}splitByEquals(e){if(!e)return[];let t=e.split("=");return t.length>1?t:[e]}isSelectComp(e){return!!e&&/^[^,]+(?:[,][^,]+)+$/.test(e.trim())}getSelectOption(e){return e?e.split(/[,]/).map(e=>e.trim()):[]}findInputElement(e){if(!e)return null;let t=null;return e.nodeType===Node.ELEMENT_NODE?t=e.querySelector("input"):e.parentElement&&(t=e.parentElement.querySelector("input")),t}focusInputWithCursor(e,t){e&&setTimeout(()=>{if(e){e.focus();let i=e.value;"start"===t?e.setSelectionRange(0,0):e.setSelectionRange(i.length,i.length)}},0)}handleAdjacentInputFocus(e,t,i){try{let a=e.view.domAtPos(t);if(!a.node)return!1;let r=this.findInputElement(a.node);if(!r)return!1;return this.focusInputWithCursor(r,i),!0}catch(e){return console.error("Error focusing adjacent input element:",e),!1}}}let r=new a},18341:(e,t,i)=>{"use strict";i.d(t,{i:()=>a});class a{static isSupport(){return"Notification"in window}static async checkPermission(){if(!this.isSupport())throw Error("This browser does not support notifications.");return"granted"===Notification.permission}static async requestPermission(){if(!this.isSupport())throw Error("This browser does not support notifications.");return await Notification.requestPermission()}static async send(e,t){try{if(!await this.checkPermission())return console.warn("User denied the permission request"),null;return new Notification(e,t)}catch(e){return console.error("[NotificationHelper] send",e),null}}static async show(e){var t;let{body:i,title:a,data:r}=e,s=await this.send(a,{body:i,data:r});s&&(s.onclick=null!==(t=null==e?void 0:e.onClick)&&void 0!==t?t:null,s.onshow=()=>{})}}},36105:(e,t,i)=>{"use strict";i.d(t,{I:()=>n});var a=i(91452),r=i(25087),s=i(20900);let n={sessionDelete:e=>{let{sessionId:t}=e;if(!t)return;let i=a.M_.getState().sessions.sessions.entities[t];i&&(0,s.Cu)({eventName:"session_delete",extData:{sessionId:(null==i?void 0:i.uid)||"",model:null==i?void 0:i.agentTaskMode}})},sessionRename:e=>{let{sessionId:t}=e;if(!t)return;let i=a.M_.getState().sessions.sessions.entities[t];i&&(0,s.Cu)({eventName:"session_rename",extData:{sessionId:(null==i?void 0:i.uid)||"",model:null==i?void 0:i.agentTaskMode}})},sessionFavorite:e=>{let{sessionId:t,action:i}=e;if(!t)return;let r=a.M_.getState().sessions.sessions.entities[t];r&&(0,s.Cu)({eventName:"session_favorite",extData:{sessionId:(null==r?void 0:r.uid)||"",model:null==r?void 0:r.agentTaskMode,action:i}})},sessionFileClick:e=>{let{action:t,type:i,from:r}=e,n=a.M_.getState().sessions.currentSessionId;if(!n)return;let l=a.M_.getState().sessions.sessions.entities[n];l&&(0,s.Cu)({eventName:"session_file_click",extData:{sessionId:(null==l?void 0:l.uid)||"",sessionTitle:l.displayTitle||l.title,model:null==l?void 0:l.agentTaskMode,action:t,type:i,from:r}})},sessionFileDownload:e=>{let{fileType:t,downloadMethod:i,from:n}=e;(0,s.Cu)({eventName:"session_file_download",extData:{sessionId:r.uT.selectors.currentSessionid(a.M_.getState())||"",fileType:t,downloadMethod:i,from:n}})}}},20900:(e,t,i)=>{"use strict";i.d(t,{Cu:()=>g,l4:()=>w});var a=i(81820),r=i(57271),s=i(60040),n=i(91452),l=i(29298),o=i(21731),c=i(36076),d=i(97603),u=i(18952),p=i(12766),m=i(25511);class x{async getId(){if(null!==this.fp)return this.fp;if(this.fpPromise)return await this.fpPromise;this.fpPromise=(0,m.Hd)();let e=await this.fpPromise;return this.fp=e,this.fpPromise=null,e}async getJsonData(){return await (0,m.n5)()}initOption(){this.currentIncludeOption=[...this.defaultIncludeOption],(0,m.qN)("exclude",["fonts","locales","permissions","plugins","system.browser.name","system.browser.version"])}changeIncludeOption(e){"string"==typeof e?this.currentIncludeOption=this.currentIncludeOption.includes(e)?this.currentIncludeOption.filter(t=>t!==e):[...this.currentIncludeOption,e]:this.currentIncludeOption=[...e],(0,m.qN)("include",this.currentIncludeOption)}constructor(){this.defaultIncludeOption=["audio","canvas","fonts","hardware","locales","math","permissions","plugins","screen","system","webgl"],this.currentIncludeOption=[],this.fp=null,this.fpPromise=null,this.initOption()}}let h=new x;class v{push(e){e.extData||(e.extData={}),e.extData.url=window.location.href,this.events.push(e),this.doChecking()}sendOnBeforeUnload(){this.send()}doChecking(){this.timer&&this.clearTimer(),this.timer=setTimeout(()=>{this.send(),this.clearTimer()},this.interval)}clearTimer(){clearTimeout(this.timer),this.timer=null}async send(){var e,t;let i={...this.getClientInfo(),tmToken:await h.getId()},a={events:this.events,userInfo:this.getUserInfo(),clientInfo:i},r=d.K.formatToAmplitude(a);d.K.batchTrack(r),null===(t=navigator)||void 0===t||null===(e=t.sendBeacon)||void 0===e||e.call(t,"".concat(p.a.rpcServerUrl,"/api/user_behavior/batch_create_event_v2"),JSON.stringify((0,u.T)("server",a))),this.events=[]}constructor(e,t,i){this.interval=e,this.getUserInfo=t,this.getClientInfo=i,this.events=[],this.timer=null}}let f=new v(200,function(){var e,t,i;let a=n.M_.getState(),r=(null===(e=a.auth.userInfo)||void 0===e?void 0:e.membershipVersion)||l.b.Free,s=c.A.VipVersionForTrack.unknown;switch(r){case l.b.Free:s=c.A.VipVersionForTrack.free;break;case l.b.Casual:s=c.A.VipVersionForTrack.starter;break;case l.b.Pro:s=c.A.VipVersionForTrack.pro;break;case l.b.Team:s=c.A.VipVersionForTrack.team}return{plan:s,knowledgeEntryCount:a.knowledge.userKnowledgeList.length,sessionCount:a.sessions.sessions.ids.length,teamUid:null===(t=a.team.currentTeam)||void 0===t?void 0:t.teamUid,teamUserId:null===(i=a.team.currentTeam)||void 0===i?void 0:i.teamUserId}},function(){let e=new Date;return{clientId:s.n.clientId,clientType:a.d.isInApp()?a.d.isIosApp()?"ios":a.d.isAndroidApp()?"android":"app":(0,o.Fr)()?"h5":"web",clientVersion:"",clientLocale:r.I.translationManager.locale,productName:"Manus",timezone:(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}})(),timezoneOffset:e.getTimezoneOffset()}});function g(e){(Array.isArray(e)?e:[e]).map(e=>({...e,extData:{...e.extData},eventAt:new Date().toISOString()})).forEach(e=>{f.push(e)})}function w(e){(Array.isArray(e)?e:[e]).forEach(e=>{f.push(e)}),f.sendOnBeforeUnload()}},59260:(e,t,i)=>{"use strict";i.d(t,{C:()=>n.Cu,y:()=>l});var a=i(91452),r=i(92749),s=i(21731),n=i(20900);let l={chatBox:{sendMsg:(e,t)=>{let i=a.M_.getState().sessions.currentSessionId;if(!i)return;let l=a.M_.getState().sessions.sessions.entities[i];if(!l)return;let o=Object.values((null==t?void 0:t.files)||{}).map(e=>({filename:e.fileObject.name,id:e.id,type:(0,s.cj)(e.fileObject.name),size:e.fileObject.size})),c={sessionId:l.uid,model:l.agentTaskMode,fileNum:o.length,fileType:o.map(e=>e.type).join(","),fileSize:o.map(e=>e.size).join(",")};if("new_session"===e){let e=r.V.selectors.inputPlaybookId(a.M_.getState());(0,n.Cu)({eventName:"new_session",extData:{...c,inputPlaybookId:e}})}else{var d;(0,n.Cu)({eventName:"send_msg",extData:{...c,onboarding:(null==t?void 0:null===(d=t.extData)||void 0===d?void 0:d.from)==="experiment"}})}}},chatOperation:i(36105).I}},19417:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var a=i(16834),r=i(18184),s=i(20900);let n={formatPlan:e=>({[r.zl.LITE_MONTHLY]:"basic_monthly",[r.zl.LITE_YEARLY]:"basic_yearly",[r.zl.CASUAL_MONTHLY]:"plus_monthly",[r.zl.CASUAL_YEARLY]:"plus_yearly",[r.zl.PRO_MONTHLY]:"pro_monthly",[r.zl.PRO_YEARLY]:"pro_yearly",[r.zl.TEAM_MONTHLY]:"team_monthly",[r.zl.TEAM_YEARLY]:"team_yearly",[r.zl.TEAM_ADDON]:"team_addon",[r.zl.CREDITS_2000]:"1900_credits",[r.zl.CREDITS_10000]:"9900_credits",[r.zl.CREDITS_19900]:"19900_credits"})[e]||e,setMotivation:e=>{localStorage.setItem(a.d5.paymentMotivation,JSON.stringify(e))},getMotivation:e=>{let t=localStorage.getItem(a.d5.paymentMotivation);if(t){if(!e)return t||void 0;try{return JSON.parse(t)}catch(e){return}}},trackPayment:async e=>{try{(0,s.Cu)({eventName:"payment",extData:e})}catch(e){console.error("[tracePayment] error",e)}},trackSwitchInterval:async e=>{(0,s.Cu)({eventName:e?"plan_yearly":"plan_monthly"})}}},36076:(e,t,i)=>{"use strict";var a;i.d(t,{A:()=>a}),function(e){var t;(t=e.VipVersionForTrack||(e.VipVersionForTrack={}))[t.free=0]="free",t[t.pro=1]="pro",t[t.starter=2]="starter",t[t.basic=3]="basic",t[t.team=4]="team",t[t.unknown=-1]="unknown"}(a||(a={}))},18704:(e,t,i)=>{"use strict";i.d(t,{C:()=>p});var a=i(16834),r=i(25850),s=i(57271),n=i(59413),l=i(87124),o=i(29800);class c{start(){this.isRunning||(this.isRunning=!0,this.scheduleNext())}stop(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.isRunning=!1}reset(){this.stop(),this.currentStepIndex=0,this.currentCount=0}scheduleNext(){var e;if(!this.isRunning)return;let t=null!==(e=this.timeSteps[this.currentStepIndex])&&void 0!==e?e:0;this.timer=setTimeout(()=>{var e;this.callback(),this.currentCount++;let t=this.currentStepIndex===this.timeSteps.length-1,i=t?1/0:null!==(e=this.countLimits[this.currentStepIndex])&&void 0!==e?e:1/0;this.currentCount>=i&&!t&&(this.currentStepIndex++,this.currentCount=0),this.scheduleNext()},1e3*t)}constructor(e){this.timeSteps=[1,2,5,10,20,30,60,120,180,240,300],this.countLimits=[7,6,5,4,3,2,1,1,1,1],this.currentStepIndex=0,this.currentCount=0,this.timer=null,this.isRunning=!1,this.callback=e}}var d=i(36498);async function u(){let e=n.A.get(a.eu.devBranch)||"";return{withCredentials:!0,reconnection:!1,query:{token:await (0,d.getToken)(),locale:"".concat(s.I.translationManager.locale),tz:Intl.DateTimeFormat().resolvedOptions().timeZone,clientType:"web",branch:e},transports:["websocket"]}}class p{get initialized(){return this.ready.ready}get isConnected(){var e,t;return null!==(t=null===(e=this.socket)||void 0===e?void 0:e.connected)&&void 0!==t&&t}async init(e,t){let i=await u(),a=(0,l.A)(i,t);this.socket=(0,o.io)(e,a),this.disposer=this.initReconnectionEvents(),this.ready.markReady()}destroy(){var e,t,i;null===(e=this.socket)||void 0===e||e.close(),null===(t=this.disposer)||void 0===t||t.call(this),null===(i=this.stepTimer)||void 0===i||i.reset()}restartReconnection(){var e,t;null===(e=this.stepTimer)||void 0===e||e.reset(),this.isConnected||null===(t=this.stepTimer)||void 0===t||t.start()}async emit(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.emit(e,t)}async on(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.on(e,t)}async once(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.once(e,t)}async off(e,t){var i;await this.waitInitialized(),null===(i=this.socket)||void 0===i||i.off(e,t)}waitInitialized(){return this.ready.waitReady()}async waitConnected(){return this.connectReadySource.waitReady()}disconnect(){var e;null===(e=this.socket)||void 0===e||e.disconnect()}initReconnectionEvents(){if(!this.socket)return()=>{};let e=()=>{this.socket.connect()},t=new c(()=>{e()});this.stepTimer=t;let i=()=>{t.reset(),t.start(),this.connectReadySource.clearWithoutPromise()},a=()=>{t.reset()},r=()=>{t.reset(),this.connectReadySource.markReady()},s=()=>{t.reset()},n=()=>{e()},l=()=>{var e;null===(e=this.socket)||void 0===e||e.disconnect()};return this.on("disconnect",i),this.on("reconnect",a),this.on("connect",r),this.on("error",s),window.addEventListener("online",n),window.addEventListener("offline",l),()=>{t.reset(),this.off("disconnect",i),this.off("reconnect",a),this.off("connect",r),this.off("error",s),window.removeEventListener("online",n),window.removeEventListener("offline",l)}}constructor(){this.socket=null,this.connectReadySource=(0,r.tu)(),this.ready=(0,r.tu)(),this.disposer=()=>{},this.stepTimer=null}}},18952:(e,t,i)=>{"use strict";i.d(t,{T:()=>function e(t,i){return i?Array.isArray(i)?i.map(i=>e(t,i)):"object"==typeof i?Object.keys(i).reduce((r,s)=>{let n=i[s];return r["client"===t?a.snakeToCamel(s):a.camelToSnake(s)]=e(t,n),r},{}):i:i}});let a={snakeToCamel:e=>e.replace(/(_[a-z])/g,e=>e.toUpperCase().replace("_","")),camelToSnake:e=>e.replace(/([A-Z])/g,e=>"_".concat(e.toLowerCase())).replace(/^_/,"")}},13435:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var a=i(25850);class r{detectFileTypeByFilename(e){return".env"===e?"code":null}detectFileTypeByExtension(e){let t=(0,a.vE)(e)||"";if(!t)return null;if("pdf"===t)return"pdf";if("html"===t||"htm"===t)return"html";if("md"===t||"markdown"===t||"mdx"===t)return"markdown";if(["csv","xlsx","xls","ods"].includes(t))return"table";if("svg"===t)return"svg";if((0,a.u)(t))return"image";if((0,a.KJ)(t)||"txt"===t)return"code";else if((0,a.AE)(t))return"video";else if((0,a.L8)(t))return"audio";else if("slides"===t)return"slides";else if("space"===t)return"space";return null}detectFileTypeByContentType(e){if(e.includes("application/pdf"))return"pdf";if(e.includes("text/html"))return"html";if(e.includes("text/markdown")||e.includes("text/x-markdown"))return"markdown";if(e.includes("text/csv"))return"table";if(e.includes("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")||e.includes("application/vnd.ms-excel"))return"table";if(e.includes("image/svg+xml"))return"svg";if(e.includes("image/"))return"image";else if(e.includes("text/plain")||e.includes("application/json")||e.includes("text/javascript")||e.includes("application/javascript")||e.includes("text/typescript")||e.includes("application/x-httpd-php")||e.includes("text/x-python")||e.includes("text/x-java-source")||e.includes("text/css"))return"code";else if(e.includes("video/"))return"video";else if(e.includes("audio/"))return"audio";return null}}let s=new r},34424:(e,t,i)=>{"use strict";i.d(t,{X:()=>l,w:()=>n});var a=i(92816),r=i(23693),s=i(76656);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1300;return Promise.race([e,new Promise((e,i)=>{setTimeout(()=>{i(Error("idb timeout"))},t)})])}async function l(e,t){var i;let l=async()=>{let i=await e(r.R.endpoints.getSession.initiate({sessionId:t,type:"private"},{forceRefetch:!0})).unwrap();try{await n(a.xA.updateSession(i,!0))}catch(e){console.error(e)}return i},o=async e=>{try{return await n(a.xA.get(e))}catch(e){return console.error(e),null}},c=await o(t);if(c&&(null===(i=c.events)||void 0===i?void 0:i.length)>0){let e=c.s3UrlExpireAt-Date.now();if(c.agentTaskMode===s.Ku.UNSPECIFIED)l();else{if(e<0)return await l();e<a.Al/2&&l()}return c}return await l()}},35874:(e,t,i)=>{"use strict";i.d(t,{qc:()=>r.qc,X7:()=>a.X,Om:()=>d});var a=i(34424),r=i(92816),s=i(23693);let n=[],l=null,o=null,c=null,d={receiveNewEvent:async function(e,t,i){if(l!==t&&(l=t,n=[],c=null),o!==e&&(o=e,c=null,n=[]),"eventsNotifyEventsAfter"===i.type){c=i.eventId,await r.xA.pushConfirmedEvents(e,[...n,...i.events],i.eventId),n=[];return}if("chatDelta"!==i.type){if(c){await r.xA.pushConfirmedEvents(e,[...n,i],c),n=[];return}n.push(i)}},joinNewSession:async function(e,t){o!==e&&(o=e,n=[],c=null),l!==t&&(l=t,n=[],c=null)},startNewSession:async function(e,t,i){l=t,o=e,n=[]},updateSessionInNotify:async function(e,t){let{sessionId:i,type:a,title:n,iconInfo:l,costedCredits:c}=t;switch(a){case"info":return await r.xA.updateMeta(i,{title:n,iconInfo:l,costedCredits:c});case"deleted":return await r.xA.removeId(i);case"update":{if(i===o)return;let t=await r.xA.getLastEventId(i),a=await e(s.R.endpoints.getSession.initiate({sessionId:i,startEventId:t||void 0,type:"private"},{forceRefetch:!0})).unwrap();if(t)return await r.xA.pushConfirmedEvents(i,a.events,t);return await r.xA.updateSession(a,!0)}}}}},92816:(e,t,i)=>{"use strict";i.d(t,{Al:()=>n,qc:()=>w,xA:()=>g});var a=i(76656),r=i(45571);let s=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i]},n=432e6,l=(e,t)=>{let i=new Map;for(let a of e){let e=t(a);i.set(e,a)}return Array.from(i.values())},o="sessions",c="sessionEvents",d="metadata",u="session-list",p=null,m=15,x=async()=>(p||(await (0,r.MR)("session-cache"),p=await (0,r.P2)("session-cache-v2",1,{upgrade(e){e.createObjectStore(o,{keyPath:"id"}),e.createObjectStore(c,{keyPath:"id"}).createIndex("by-session","sessionId"),e.createObjectStore(d).put({sessionIds:[]},u)}})),p);async function h(e){s("updateAccessTime",e);let t=(await x()).transaction([d],"readwrite"),i=t.objectStore(d),a=await i.get(u)||{sessionIds:[]};a.sessionIds=a.sessionIds.filter(t=>t!==e),a.sessionIds.unshift(e),await i.put(a,u),await t.done}async function v(){let e=(await x()).transaction([o,d,c],"readwrite"),t=e.objectStore(d),i=await t.get(u);if(i&&i.sessionIds.length>m){let a=i.sessionIds.slice(m),r=e.objectStore(o);s("remove",a),await Promise.all(a.map(async t=>{let i=e.objectStore(c).index("by-session"),a=await i.openCursor(t);for(;a;)await a.delete(),a=await a.continue();return r.delete(t)})),i.sessionIds=i.sessionIds.slice(0,m),await t.put(i,u)}await e.done}async function f(e){let t=await x(),i=await t.getAllFromIndex(c,"by-session",e);return s("getSessionEvents",e,i.length),i}let g={configure(e){e.maxSessions&&(m=e.maxSessions,v().catch(console.error))},async get(e){let t=await x(),i=await t.get(o,e);if(!i)return null;let a=await f(e);return await h(e),{...i,events:a,s3UrlExpireAt:i.s3UrlsExpiredAt||0}},async updateSession(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=await x(),{events:r,...s}=e,l=a.transaction([o,c],"readwrite"),d=await l.objectStore(o).get(e.id),u=[...e.events].sort((e,t)=>e.timestamp-t.timestamp);await l.objectStore(o).put({...s,lastEventId:null===(t=u[u.length-1])||void 0===t?void 0:t.id,s3UrlsExpiredAt:i?Date.now()+n:null==d?void 0:d.s3UrlsExpiredAt}),await Promise.all(u.map(t=>l.objectStore(c).put({...t,sessionId:e.id}))),await l.done,await h(e.id),await v()},async pushConfirmedEvents(e,t,i){let r=(await x()).transaction([o,c],"readwrite"),n=r.objectStore(o),d=await n.get(e),u=r.objectStore(c).index("by-session"),p=await u.getAll(e);if(d){if(!p.find(e=>e.id===i)&&"NEW_SESSION_EVENT"!==i){await r.done;return}let a=null;for(let e of t)a?e.timestamp>a.timestamp&&(a=e):a=e;s("append events",d.id,t.length),await Promise.all(t.map(async t=>await r.objectStore(c).put({...t,sessionId:e}))),a&&(d.lastEventId=a.id),await n.put(d)}else{var m;let i=l(t,e=>e.id).sort((e,t)=>e.timestamp-t.timestamp);await n.put({id:e,title:"",lastEventId:null===(m=i[i.length-1])||void 0===m?void 0:m.id,agentTaskMode:a.Ku.UNSPECIFIED}),await Promise.all(i.map(t=>r.objectStore(c).put({...t,sessionId:e})))}await r.done,await h(e),await v()},async updateMeta(e,t){let i=(await x()).transaction(o,"readwrite"),r=i.objectStore(o),s=await r.get(e);s?(void 0!==t.title&&(s.title=t.title),void 0!==t.iconInfo&&(s.iconInfo=t.iconInfo),void 0!==t.costedCredits&&(s.costedCredits=t.costedCredits),await r.put(s)):await r.put({id:e,title:t.title||"",iconInfo:t.iconInfo,costedCredits:t.costedCredits||0,agentTaskMode:a.Ku.UNSPECIFIED,isInvited:!0,isShared:!1,userStatus:0}),await i.done,await h(e),await v()},async clear(){let e=await x();await e.clear(o),await e.clear(c),await e.put(d,{sessionIds:[]},u)},async removeId(e){let t=(await x()).transaction([o,d,c],"readwrite");await t.objectStore(o).delete(e);let i=t.objectStore(c).index("by-session"),a=await i.openCursor(e);for(;a;)await a.delete(),a=await a.continue();let r=t.objectStore(d),s=await r.get(u);s&&(s.sessionIds=s.sessionIds.filter(t=>t!==e),await r.put(s,u)),await t.done},async getLastEventId(e){try{let t=await x(),i=await t.get(o,e);return(null==i?void 0:i.lastEventId)||null}catch(e){return console.error(e),null}}},w=async()=>g.clear()},91452:(e,t,i)=>{"use strict";i.d(t,{GV:()=>a.GV,M_:()=>a.M_,jL:()=>a.jL});var a=i(5685)},3843:(e,t,i)=>{"use strict";i.d(t,{r:()=>f});var a=i(75958),r=i(16834),s=i(13435),n=i(89432),l=i(25850),o=i(88672),c=i(91452),d=i(79544),u=i(2054),p=i(61207),m=i(34137),x=i(34778);let h={},v="disable-auto-preview";function f(){let e=(0,o.wA)(),{openSidebar:t}=(0,x.e)(),i=(0,a.w)(e=>{try{let e=new URL(window.location.href);if("1"===e.searchParams.get("disable-auto-preview")?localStorage.setItem(v,"true"):localStorage.removeItem(v),"true"===localStorage.getItem(v))return{handled:!0,open:!1}}catch(e){console.error(e)}if(h[e.id]||p.W.selectors.previewFile(c.M_.getState()))return{handled:!1,open:!1};if("toolUsed"===e.type){var i;let a=(0,l.DJ)(e);if("text_editor"===e.tool&&(null==a?void 0:null===(i=a.textEditor)||void 0===i?void 0:i.documentType)==="slides"&&(a.textEditor.content||a.textEditor.url))return t({type:"filePreviewer",previewFile:u.C.convertSlideCardToPreviewFile(a.textEditor)}),h[e.id]=!0,{handled:!0,open:!0}}else if("chat"===e.type&&"assistant"===e.sender){if(e.linkMetaMap){let i=Object.keys(e.linkMetaMap);for(let a=0;a<i.length;a++){let r=i[a],s=e.linkMetaMap[r];if("deploy"===d.$.getLinkType(s.url)){let i=s.url,a=s.title,r="".concat(a,".space");return t({type:"filePreviewer",previewFile:{filetype:"space",previewUrl:i+"#filename=".concat(encodeURIComponent(r)),url:i,filename:r,displayFilename:a,downloadFilename:r,sandboxPath:"",id:""}}),h[e.id]=!0,{handled:!0,open:!0}}}if(i.length>0)return{handled:!0,open:!1}}let i=e.attachments;for(let a=0;a<i.length;a++){let r=i[a];if(!r)continue;let n=null;if("slides"===r.type&&(n="slides"),n||(n=s.e.detectFileTypeByFilename(r.filename)),n||(r.contentType?n=s.e.detectFileTypeByContentType(r.contentType):"file"===r.type&&(n=s.e.detectFileTypeByExtension(r.filename))),"slides"===n||"pdf"===n||"table"===n||"code"===n||"html"===n||"markdown"===n||"audio"===n)return t({type:"filePreviewer",previewFile:u.C.convertEventAttachmentToPreviewFile(r)}),h[e.id]=!0,{handled:!0,open:!0}}}return{handled:!1,open:!1}}),f=(0,a.w)(e=>!m.V.selectors.prevAutoOpenedSidebarType(c.M_.getState())&&!!("toolUsed"===e.type&&n.M.selectors.followAgentStatus(c.M_.getState()))&&(t({type:"workspace",source:"auto"}),!0)),g=(0,a.w)(()=>{var e;let t=null===(e=document.getElementById(r.eL.homePageSessionContent))||void 0===e?void 0:e.clientWidth;return!!t&&!(t<930)}),w=(0,a.w)(t=>{if(!g())return!1;let{handled:a,open:r}=i(t);return a?(r&&e(m.V.actions.setPrevAutoOpenedSidebarType("filePreviewer")),!0):!!f(t)&&(e(m.V.actions.setPrevAutoOpenedSidebarType("workspace")),!0)});return{checkShouldAutoPreviewFile:(0,a.w)(()=>{if(h={},e(m.V.actions.setPrevAutoOpenedSidebarType(null)),!g())return;let t=n.M.selectors.selectAllMessages(c.M_.getState());for(let a=t.length-1;a>=0;a--){let r=t[a];if((null==r?void 0:r.type)==="event"){let{handled:t,open:a}=i(r.event);if(t){a&&e(m.V.actions.setPrevAutoOpenedSidebarType("filePreviewer"));return}}}}),autoPreviewByEvent:w}}},34778:(e,t,i)=>{"use strict";i.d(t,{e:()=>y});var a=i(32595),r=i(51416),s=i(27168),n=i(75958),l=i(16834),o=i(59260),c=i(21731),d=i(25850),u=i(57271),p=i(5685),m=i(67887),x=i(4094),h=i(2054),v=i(8216),f=i(89432),g=i(34137);let w=e=>{let t=p.M_.getState().sessions.currentSessionId;if(!t)return;let i=p.M_.getState().sessions.sessions.entities[t];i&&(0,o.C)({eventName:"computer_detail",extData:{source:e,sessionId:i.uid,model:i.agentTaskMode}})};function y(){let e=(0,p.jL)(),t=(0,r.s)(a.b),{setPreviewFile:i}=(0,v.d)(),o=()=>{x.yl.clear(),e(m.K.actions.setSpacePreviewerEditMode(!1))},y=(0,n.w)(a=>{if("filePreviewer"===a.type){let{previewFile:r}=a,{filetype:s,url:n}=r;if((0,d.u)(s)&&n){t.open({src:n});return}if((0,d.AE)(s)&&n){let e;t.open({src:n,filetype:"video",videoAutoPlay:(e=!1,()=>!e&&(e=!0,!0))});return}if("link"===s&&n){window.open(n,"_blank");return}e(g.V.actions.setSidebarLocation("outside")),e(g.V.actions.setSidebarType(a.type));let l=e=>{i(e)},o=m.K.selectors.sessionFileList(p.M_.getState()).find(e=>{let t=h.C.getSessionFileId(e),i=h.C.getSessionFileSandboxPath(e);return"space"!==r.filetype&&(t===r.id||i===r.sandboxPath)});if(o){let e=h.C.convertSessionFileToPreviewFile(o);l({...e,previewUrl:r.previewUrl.replace(r.url,e.url)})}else{let e=m.K.selectors.notificationSessionFileList(p.M_.getState()).find(e=>e.sandboxPath===r.sandboxPath&&"space"!==r.filetype);l(e?{...r,shareId:e.shareId,url:e.fileUrl,previewUrl:r.previewUrl.replace(r.url,e.fileUrl),lastUpdatedAt:e.lastUpdatedAt||r.lastUpdatedAt}:r)}}else i(null);"workspace"===a.type&&(e(g.V.actions.setSidebarLocation(window.innerWidth>768?"inside":"outside")),null===p.M_.getState().agentWorkspace.sidebarType&&window.innerWidth>768&&C(),w(a.source),e(g.V.actions.setSidebarType(a.type)),e(f.M.actions.timelineChanged(100))),"chatReplySources"===a.type&&(e(g.V.actions.setSidebarLocation("outside")),e(g.V.actions.setChatReplySearchMetadata(a.searchMetadata)),e(g.V.actions.setSidebarType(a.type))),o()}),b=(0,n.w)(t=>{t&&"workspace"===t.type&&window.innerWidth>768&&S();let a=(null==t?void 0:t.lock)===!0;a&&e(g.V.actions.setAnimationLock(!0)),e(g.V.actions.setSidebarType(null)),i(null),e(g.V.actions.setIsSidebarFullscreen(!1)),o(),setTimeout(()=>{a&&e(g.V.actions.setAnimationLock(!1))},100)}),C=(0,n.w)(()=>{let t=document.getElementById("computer");if("ar"===u.I.translationManager.locale||!t)return;let i=t.cloneNode(!0),a=t.getBoundingClientRect();e(g.V.actions.setInitialComputerPosition({top:a.top,left:a.left,width:a.width,height:a.height})),i.style.position="fixed",i.style.top="".concat(a.top,"px"),i.style.left="".concat(a.left,"px"),i.style.width="".concat(a.width,"px"),i.style.height="".concat(a.height,"px"),i.style.opacity="1",i.style.transition="all 0.2s ease-in-out",i.style.zIndex="1000",i.style.border="none",i.className=i.className.replace("hover:scale-[1.03]",""),i.firstElementChild&&(i.firstElementChild.className=i.firstElementChild.className.replace(/scale-x-\[\d+\.?\d*\]/g,"").replace(/scale-y-\[\d+\.?\d*\]/g,"")+" w-full h-full"),document.body.appendChild(i),i.getBoundingClientRect();let r=(0,c.Fr)()||window.innerWidth<s.D?1:p.M_.getState().configs.sessionListPinned?.4:.5,n=Math.min(Math.max(Math.round(window.innerWidth*r),368),window.innerWidth)-32,l=window.innerHeight-20-200,o=window.innerWidth-n-16-16;i.style.top="130px",i.style.left="".concat(o,"px"),i.style.height="".concat(l,"px"),i.style.width="".concat(n,"px"),i.style.opacity="0.3",i.addEventListener("transitionend",e=>{e.target===i&&i.remove()})}),S=(0,n.w)(()=>{if("ar"===u.I.translationManager.locale)return;let e=document.getElementById(l.eL.computerDetail);if(!e)return;let t=e.getBoundingClientRect(),i=e.cloneNode(!0);i.style.position="fixed",i.style.top="".concat(t.top,"px"),i.style.left="".concat(t.left,"px"),i.style.width="".concat(t.width,"px"),i.style.height="".concat(t.height,"px"),i.style.opacity="1",i.style.transition="all 0.2s ease-in-out",i.style.zIndex="1000",i.style.border="none",i.style.overflow="hidden",document.body.appendChild(i),i.getBoundingClientRect();let a=p.M_.getState().agentWorkspace.initialComputerPosition;i.style.top="".concat(a.top,"px"),i.style.left="".concat(a.left,"px"),i.style.width="".concat(a.width,"px"),i.style.height="".concat(a.height,"px"),i.style.opacity="0.3",i.addEventListener("transitionend",e=>{e.target===i&&i.remove()})});return{openSidebar:y,closeSidebar:b}}},27846:(e,t,i)=>{"use strict";i.d(t,{As:()=>B,_I:()=>z,vw:()=>O});var a=i(90293),r=i(51416),s=i(75958),n=i(9205),l=i(95370),o=i(97603),c=i(59260),d=i(16834),u=i(59496),p=i(35874),m=i(88359),x=i(21731),h=i(16577),v=i(69862),f=i(93347),g=i(81820),w=i(78085),y=i(24907),b=i(25850),C=i(24131),S=i(7067),j=i(68720),I=i(57271),N=i(59413),k=i(88672),_=i(5685),T=i(36498),P=i(92749),L=i(87963),E=i(57107),M=i(4094),A=i(60498),R=i(27810),F=i(29298),D=i(40757),U=i(15543),V=i(92766);let O=(0,b.tu)(),z=(0,b.tu)();function B(){let e=(0,k.wA)(),{initNotification:t}=(0,A.hN)(),{initTeam:i}=(0,R.d)(),{initAuthPage:B}=(0,U.D)(),{updateSpaceEditCode:W}=(0,M.rN)(),{initHelpCenterAuth:K,handleUserLogoutHelpCenter:G}=(0,V.e)(),H=(0,y.rd)(),{clearDraft:Y}=(0,h.z)(),{open:Z}=(0,r.s)(v.h),$=(0,r.s)(a.p),q=(0,s.w)(async function(e){let{redirectUrl:t,from:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,l.$)(),r=await f.F.UserAuthPublicService.oauth2Authorize({redirectUrl:t,type:"apple"===e?S.oS.APPLE:S.oS.GOOGLE,authCommand:{locale:I.I.translationManager.locale,utmSource:a.utmSource,utmCampaign:a.utmCampaign,firstFromPlatform:a.firstFromPlatform,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,tzOffset:String(new Date().getTimezoneOffset()),firstEntry:(0,x.$B)()}});return(0,x.HS)(),"desktop"===i?H.push(w.bw.loginSuccess.root):H.push(r.redirectUrl),null}),J=(0,s.w)(async t=>{let{noPageRedirect:i=!1,noApi:a=!1}=t||{};e(D.R.actions.updateUserInfo(null)),(0,p.qc)(),N.A.remove(d.eu.loginSuccess),localStorage.removeItem(d.d5.UserInfo);try{(null==t?void 0:t.keepDraft)!==!0&&Y(),G(),a||await f.F.UserAuthService.logout({})}catch(e){console.error(e)}(0,T.e)(),i||(location.href=w.bw.root)}),Q=(0,s.w)(async()=>{var e;$.open({title:I.I.t("Are you sure to log out?"),content:I.I.t("Log out of {product} as {email}?",{product:b.KR,email:null===(e=_.M_.getState().auth.userInfo)||void 0===e?void 0:e.email}),autoFocusButton:"confirm",confirmText:I.I.t("Log out"),cancelText:I.I.t("Stay logged in"),onConfirm:async()=>(await J(),!0)})}),X=(0,s.w)(async t=>{let{verifyCode:i}=t;e(D.R.actions.updateUserInfo(null)),(0,p.qc)(),N.A.remove(d.eu.loginSuccess),localStorage.removeItem(d.d5.UserInfo),G(),await f.F.UserAuthService.deleteUser({verifyCode:i}),(0,T.e)(),location.href=w.bw.root}),ee=(0,s.w)(async e=>{let{action:t}=e;try{await f.F.UserAuthService.sendEmailVerifyCodeWithAuth({action:"register"===t?C.vG.REGISTER:"reset_password"===t?C.vG.RESET_PASSWORD:C.vG.LOGOFF})}catch(e){(0,n.oR)({variant:"error",title:u.P.formatErrorToString(e)})}}),et=(0,s.w)(async()=>{var t;e(D.R.actions.setAuthLoading(!0));let i=await f.F.UserService.userInfo({}).finally(()=>{e(D.R.actions.setAuthLoading(!1))});o.K.customUserPropertyOne(o.d.Plan,o.K.formatMemberShipToNumber(i.membershipVersion||F.b.Free));let a=(null===(t=i.teamInfo)||void 0===t?void 0:t.originalUserId)||i.userId;o.K.setUserId(a);let[r,s]=await Promise.all([o.K.initExperiment().catch(()=>null),f.F.UserService.getUserExperimentVars({}).catch(()=>null)]);r&&e(E.s.actions.setVariants(r)),(null==s?void 0:s.vars)&&e(E.s.actions.setBackendVariants(s.vars));let n=localStorage.getItem(d.d5.UserInfo);try{if(n){let t=JSON.parse(n),a=(null==t?void 0:t.membershipVersion)&&(null==t?void 0:t.membershipVersion)!==F.b.Free,r=(null==i?void 0:i.membershipVersion)&&(null==i?void 0:i.membershipVersion)!==F.b.Free;t.userId===i.userId&&a&&!r&&e(P.V.actions.setAgentModeIntroduceScene("membershipHasExpired"))}}catch(e){}return e(D.R.actions.setUserInfo(i)),i}),ei=(0,s.w)(async t=>{e(D.R.actions.setAuthLoading(!0));let i=await f.F.TeamService.joinTeam({invitationCode:t}).finally(()=>{e(D.R.actions.setAuthLoading(!1))}),a=D.R.selectors.userInfo(_.M_.getState());return localStorage.setItem(d.d5.UserInfo,JSON.stringify(a)),i}),ea=(0,s.w)(async()=>{if(g.d.isInApp())return null;let t=_.M_.getState().auth.clientConfig,i=null;if((null==t?void 0:t.cookieOptIn)!==void 0)i=t.cookieOptIn;else{let e=localStorage.getItem(d.d5.cookieOptIn);e&&(i=Number.parseInt(e))}if(e(D.R.actions.setCookieOptIn(i)),!i||i===j.R2.NOT_SET){await z.waitReady();let e=_.M_.getState().auth.userRegion;(null==e?void 0:e.needCookieOptIn)&&Z({customized:!1,hideCloseButton:!0})}}),er=(0,s.w)(async t=>{e(D.R.actions.setCookieOptIn(t)),localStorage.setItem(d.d5.cookieOptIn,t.toString()),_.M_.getState().auth.userInfo&&await f.F.UserService.setUserClientConfig({cookieOptIn:t})}),es=(0,s.w)(async()=>{let t=null;try{t=await f.F.UserService.getUserClientConfig({configKeys:[j.U4.RECV_MARKETING_EMAIL,j.U4.HAS_INTEREST,j.U4.AGENT_DEPLOY_SPACE,j.U4.SESSION_WAIT_DONE_EMAIL,j.U4.HAS_SHOWN_EDU_TEAM_JOIN_POPUP,j.U4.ENABLE_MANUS_BROWSER,j.U4.LAST_UPDATE_LOG_TIME,j.U4.AGENT_MODE,j.U4.COOKIE_OPT_IN]}),e(D.R.actions.setClientConfig(t))}catch(e){console.error("fetch user client config error",e)}ea()}),en=(0,s.w)(async()=>{let t=await f.F.UserService.getAvailableCredits({});e(D.R.actions.updateUsageInfo(t))}),el=(0,s.w)(async a=>{let r=localStorage.getItem(d.d5.UserInfo),s=localStorage.getItem(d.d5.usageInfo),n=localStorage.getItem(d.d5.userClientConfig);e(D.R.actions.setCreditAnimateInfo(s?JSON.parse(s):null)),e(D.R.actions.setUserInfo(r?JSON.parse(r):null)),e(D.R.actions.updateUsageInfo(s?JSON.parse(s):null)),e(D.R.actions.setClientConfig(n?JSON.parse(n):null));try{a&&(await Promise.all([et(),en(),es()]),eu(),eh(),ep(),t(),W(),await i())}finally{O.markReady(),K()}}),eo=(0,s.w)(async(t,a)=>{try{let i=await f.F.UserAuthPublicService.switchUser({userId:t});await J({noPageRedirect:!0,noApi:!0}),O.clear();let r=new Set(d.__);Object.values(d.d5).forEach(e=>{r.has(e)||localStorage.removeItem(e)});let s=window.location.pathname;/^\/app\/[^/]+$/.test(s)&&window.history.replaceState(null,"","/app"),_.M_.dispatch({type:"RESET"}),(0,T.W)(i.token),!a&&await B("webapp")&&(await el(!0),e(D.R.actions.setRefreshKey((0,b.vd)())))}catch(e){(0,n.oR)({variant:"error",title:u.P.formatErrorToString(e)});try{"1001"===e.details[0].debug.code&&await i()}catch(e){}throw e}}),ec=(0,s.w)(async function(t){e(D.R.actions.setModifying(!0));try{e(D.R.actions.updateUserInfo({nickname:t.name})),await f.F.UserService.updateUserProfile({newNickname:t.name})}finally{e(D.R.actions.setModifying(!1))}}),ed=(0,s.w)(async function(t){e(D.R.actions.setAvatarUploading(!0));try{var i;let a=await (0,x.pJ)(t.file,128),r=await (0,x.zM)(a),s=(null===(i=r.split(";")[1])||void 0===i?void 0:i.replace(/^base64,/,""))||"";await f.F.UserService.updateUserProfile({newAvatar:{fileName:t.file.name,mimeType:t.file.type,data:s}}),e(D.R.actions.updateUserInfo({avatar:r}))}catch(e){(0,n.oR)({variant:"error",title:u.P.formatErrorToString(e)})}finally{e(D.R.actions.setAvatarUploading(!1))}}),eu=(0,s.w)(async()=>{let t=await f.F.UserPublicService.getGlobalSettings({});e(D.R.actions.setGlobalSettings(t))}),ep=(0,s.w)(async function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];t&&e(D.R.actions.setInvitationCodeListLoading(!0));try{let t=await f.F.UserService.getPersonalInvitationCodes({}),i=m._.getItem("invitationCodeMaxUsed")||0,a=t.invitationCodes.reduce((e,t)=>e+t.maxUses,0);(0,c.C)({eventName:"invitation_code_list",extData:{count:a}});let r=_.M_.getState().auth.invitationCodeRedDotVisible;a>i&&(null===r?e(D.R.actions.setInvitationRedDotVisible(!0)):m._.setItem("invitationCodeMaxUsed",a)),e(D.R.actions.setInvitationCodeList(t.invitationCodes)),e(L.e.actions.setInvitationCodeLength(t.invitationCodes.length))}catch(e){console.error("init invitation code list error",e),(0,c.C)({eventName:"invitation_code_list",extData:{count:-1}})}e(D.R.actions.setInvitationCodeListLoading(!1))}),em=(0,s.w)(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{silent:!0},a={..._.M_.getState().auth.clientConfig};Object.entries(t).forEach(e=>{let[t,i]=e;a[t]=i}),i.silent&&e(D.R.actions.setClientConfig(a)),await f.F.UserService.setUserClientConfig(t),i.silent||e(D.R.actions.setClientConfig(a))}),ex=(0,s.w)(async t=>{let{email:i,code:a}=t;try{let t=await f.F.UserService.sendInvitationEmail({email:i,code:a});if(void 0!==t.pending){let i=_.M_.getState().auth.invitationCodeList.map(e=>e.inviteCode===a?{...e,pending:!!t.pending}:e);e(D.R.actions.setInvitationCodeList(i))}return(0,n.oR)({variant:"success",title:I.I.t("Email sent successfully")}),!0}catch(e){if(e.details&&e.details[0]&&"400401"===e.details[0].debug.code)return"400401";return console.error("init invitation code list error",e),(0,n.oR)({variant:"error",title:u.P.formatErrorToString(e)}),!1}}),eh=(0,s.w)(()=>{let e=D.R.selectors.clientConfig(_.M_.getState()),t=I.I.translationManager.locale;t&&t!==(null==e?void 0:e.locale)&&em({locale:t})});return{handleLogout:J,handleLogoutWithConfirm:Q,handleLogoff:X,fetchEmailVerifyCodeWithAuth:ee,fetchUserInfo:et,joinTeam:ei,initAuth:el,handleLogin:q,modifyUserInfo:ec,modifyUserAvatar:ed,fetchInvitationCodeList:ep,setUserConfig:em,fetchGlobalConfig:eu,initNotification:t,setCookieOptIn:er,sendInvitationEmail:ex,switchAccount:eo}}},15543:(e,t,i)=>{"use strict";i.d(t,{D:()=>b});var a=i(75958),r=i(97603),s=i(16834),n=i(59260),l=i(21731),o=i(93347),c=i(81820),d=i(78085),u=i(24907),p=i(59413),m=i(88672),x=i(91452),h=i(75874),v=i(57107),f=i(76951),g=i(40757),w=i(29298),y=i(92766);function b(){let e=(0,u.rd)(),{initHelpCenterAuth:t}=(0,y.e)(),{consumeActivityEntryFlag:i}=(0,h.L)(),{acceptInvitation:b}=(0,f.t)(),C=(0,m.wA)(),S=(0,a.w)(async()=>{var e;C(g.R.actions.setAuthLoading(!0));let t=await o.F.UserService.userInfo({}).finally(()=>{C(g.R.actions.setAuthLoading(!1))});r.K.customUserPropertyOne(r.d.Plan,r.K.formatMemberShipToNumber(t.membershipVersion||w.b.Free));let i=(null===(e=t.teamInfo)||void 0===e?void 0:e.originalUserId)||t.userId;r.K.setUserId(i);let[a,s]=await Promise.all([r.K.initExperiment().catch(()=>null),o.F.UserService.getUserExperimentVars({}).catch(()=>null)]);return a&&C(v.s.actions.setVariants(a)),(null==s?void 0:s.vars)&&C(v.s.actions.setBackendVariants(s.vars)),C(g.R.actions.setUserInfo(t)),t}),j={setValue:(0,a.w)(e=>{let{eduId:t,code:i,teamCode:a,from:r}=e;t&&localStorage.setItem(s.d5.eduId,t),i&&localStorage.setItem(s.d5.inviteCode,i),a&&localStorage.setItem(s.d5.teamCode,a),r&&localStorage.setItem(s.d5.loginFrom,r)}),getValue:(0,a.w)(e=>"eduId"===e?localStorage.getItem(s.d5.eduId):"code"===e?localStorage.getItem(s.d5.inviteCode):"teamCode"===e?localStorage.getItem(s.d5.teamCode):"from"===e?localStorage.getItem(s.d5.loginFrom):void 0),consumeValue:(0,a.w)(e=>{if("eduId"===e){localStorage.removeItem(s.d5.eduId);return}if("code"===e){localStorage.removeItem(s.d5.inviteCode);return}"teamCode"===e&&localStorage.removeItem(s.d5.teamCode)})},I=(0,a.w)(e=>{let t=new URL(location.href).searchParams,i=t.get("redirectUrl");if(e)return{redirectUrl:(0,l.z6)(i),eduId:j.getValue("eduId"),code:j.getValue("code"),teamCode:j.getValue("teamCode"),from:j.getValue("from")};let a=t.get("eduId")||j.getValue("eduId"),r=t.get("code")||j.getValue("code"),s=t.get("teamCode")||j.getValue("teamCode"),n=t.get("from")||j.getValue("from");return{redirectUrl:(0,l.z6)(i),eduId:a,code:r,teamCode:s,from:n,authType:"1"===t.get("fromGoogle")?"google":"1"===t.get("fromApple")?"apple":"email",newUser:"1"===t.get("newUser")?"1":null}}),N={shouldBlock:e=>{let{authStatus:t}=e,i=!t.isLogin;return console.info("[AuthChecker] login shouldBlock: ".concat(i)),i},gotoPage:e=>{let{pageParams:t}=e;window.location.href=d.bw.login.withParams(t)}},k={login:N,smsVerify:{shouldBlock:e=>{let{authStatus:t}=e,i=t.needSmsVerified;return console.info("[AuthChecker] smsVerify shouldBlock: ".concat(i)),i},gotoPage:e=>{let{pageParams:t}=e;window.location.href=d.bw.verifyPhone.withParams(t)}},eduVerify:{shouldBlock:()=>{let e=!!j.getValue("eduId");return console.info("[AuthChecker] eduVerify shouldBlock: ".concat(e)),e},gotoPage:e=>{let{pageParams:t}=e;j.consumeValue("eduId"),window.location.href=d.bw.edu.verify.withParams(t)}},invitationVerify:{shouldBlock:e=>{let{authStatus:t}=e,i=!t.isActive;return console.info("[AuthChecker] invitationVerify shouldBlock: ".concat(i)),i},gotoPage:e=>{let{pageParams:t}=e;j.consumeValue("code"),window.location.href=d.bw.invitations.withParams(t)}},webapp:{shouldBlock:()=>!1,gotoPage:t=>{let{pageParams:i={}}=t;j.consumeValue("code"),j.consumeValue("eduId");let{redirectUrl:a}=i;return e.replace(a||d.bw.app.root()),!0}},waitlist:{gotoPage:()=>{j.consumeValue("code"),e.replace(d.bw.invitations.waitlist.root+"?limit=1")}}},_=(0,a.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"webapp",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a="preCheck"===i,r=x.M_.getState().auth.userInfo,s=(0,g.P)(r),l={authStatus:s,pageParams:{...I(a),...t}};if("invitationVerify"===e)return N.shouldBlock(l)?(k.login.gotoPage(l),!1):k.smsVerify.shouldBlock(l)?(k.smsVerify.gotoPage(l),!1):!a||!s.isActive||!!l.pageParams.code||(k.webapp.gotoPage(l),!1);if("eduVerify"===e){if(k.login.shouldBlock(l))return k.login.gotoPage(l),!1;if(k.smsVerify.shouldBlock(l))return k.smsVerify.gotoPage(l),!1;if(a){if(!l.pageParams.eduId)return k.webapp.gotoPage(l),!1;if(null==r?void 0:r.eduInfo)return((0,n.C)({eventName:"edu_user_register"}),l.pageParams.code)?k.invitationVerify.gotoPage(l):k.webapp.gotoPage(l),!1}return!0}if("smsVerify"===e){if(k.login.shouldBlock(l))return k.login.gotoPage(l),!1;if(a){if(s.isSmsVerified&&!s.isActive)return k.invitationVerify.gotoPage(l),!1;if(s.isSmsVerified&&s.isActive)return k.webapp.gotoPage(l),!1}return!0}return"webapp"===e?k.login.shouldBlock(l)?(k.login.gotoPage(l),!1):k.smsVerify.shouldBlock(l)?(k.smsVerify.gotoPage(l),!1):!k.invitationVerify.shouldBlock(l)||(k.invitationVerify.gotoPage(l),!1):(console.warn("[AuthChecker#checkAuthPage] not target executor: ".concat(e)),!0)}),T=(0,a.w)(async(t,i)=>{let a=(0,g.P)(x.M_.getState().auth.userInfo),r={...I(),...i,originFrom:I().from||(null==i?void 0:i.from),from:t},n={authStatus:a,pageParams:r};if("invitationVerify"===t){if(p.A.set(s.eu.loginSuccess,"1",{expires:365}),r.redirectUrl)try{if(await b(r.redirectUrl)){e.push(r.redirectUrl);return}}catch(e){}if(!(null==r?void 0:r.redirectUrl)&&(0,l.Fr)()){e.push(d.bw.appInvite.root);return}k.webapp.gotoPage(n);return}if("eduVerify"===t){if(p.A.set(s.eu.loginSuccess,"1",{expires:365}),!(null==r?void 0:r.redirectUrl)&&(0,l.Fr)()){e.push(d.bw.appInvite.root);return}if(n.pageParams.code&&n.pageParams.eduId){k.invitationVerify.gotoPage(n);return}k.webapp.gotoPage(n);return}if("smsVerify"===t){if(c.d.isInApp()){c.d.closeWebview({});return}if(k.eduVerify.shouldBlock(n)){k.eduVerify.gotoPage(n);return}if(n.pageParams.code){k.invitationVerify.gotoPage(n);return}if("desktop"===r.originFrom){e.push(d.bw.loginSuccess.root);return}k.webapp.gotoPage(n);return}if("desktop"===r.originFrom){e.push(d.bw.loginSuccess.root);return}k.webapp.gotoPage(n)}),P=(0,a.w)(async(e,t)=>{try{return await S(),_(e,t,"preCheck")}catch(i){let e=(0,g.P)(x.M_.getState().auth.userInfo),t=I();return k.login.gotoPage({authStatus:e,pageParams:t}),!1}});return{authPageTracer:j,checkAuthStatus:_,initAuthLanding:(0,a.w)(async()=>{try{await S();let a=(0,g.P)(x.M_.getState().auth.userInfo),r=I(),n={authStatus:a,pageParams:r};if("1"===r.newUser&&(localStorage.setItem(s.d5.newUserFirstLogin,"1"),localStorage.setItem(s.d5.chatHomeViewCollapse,"true"),p.A.set(s.eu.sessionListUnpinned,"1",{expires:365})),k.login.shouldBlock(n))return k.login.gotoPage(n),!1;let l=()=>{a.isLogin&&p.A.set(s.eu.loginSuccess,"1",{expires:365})};try{let{activityEntryFlag:e}=await i();if(e&&r.redirectUrl){l(),window.location.href=r.redirectUrl;return}}catch(e){}if(l(),k.smsVerify.shouldBlock(n))return k.smsVerify.gotoPage(n),!1;if(k.eduVerify.shouldBlock(n))return k.eduVerify.gotoPage(n),!1;if(k.invitationVerify.shouldBlock(n)||n.pageParams.code)return k.invitationVerify.gotoPage(n),!1;let o=n.pageParams.authType,c=s.d5.authLastUsed;if("google"===o||"apple"===o?localStorage.setItem(c,o):localStorage.removeItem(c),"desktop"===r.from){e.push(d.bw.loginSuccess.root);return}if(r.redirectUrl)try{await b(r.redirectUrl)}catch(e){}return t(),k.webapp.gotoPage(n),!0}catch(e){return!1}}),initAuthPage:P,nextAuthPage:T,allCheckers:k}}},4232:(e,t,i)=>{"use strict";i.d(t,{I:()=>j});var a=i(51416),r=i(75958),s=i(72522),n=i(94266),l=i(16834),o=i(59260),c=i(74905),d=i(75563),u=i(11258),p=i(57055),m=i(54914),x=i(47727),h=i(93347),v=i(35710),f=i(57271),g=i(5685),w=i(93847),y=i(81705),b=i(72551),C=i(40757),S=i(29298);function j(){let e=(0,g.jL)(),{open:t}=(0,a.s)(m.v),{open:i}=(0,a.s)(d.r),{open:j}=(0,a.s)(u.A,{singleton:!0,closeWhenNextTrigger:!0}),{open:I}=(0,a.s)(p.A),{open:N}=(0,a.s)(c.b),{open:k}=(0,a.s)(x.Z),_=(0,r.w)(()=>{var e;let a=g.M_.getState(),r=a.auth,s=C.R.selectors.usageInfo(a),n=localStorage.getItem(l.d5.taskFinished),o=!1,c=C.R.selectors.isTeamAccount(g.M_.getState()),d=y.u.isTeamExpired(g.M_.getState()),u=b.u.selectors.isEduTeam(g.M_.getState());if(c){if(d)return{isEnough:o,handleCreditsNotEnough:()=>{u?N():k()}};o=!0}else o=!n||(null==s?void 0:s.total)&&s.total.remain>0;let p=(null===(e=r.userInfo)||void 0===e?void 0:e.membershipVersion)||S.b.Free;return(0,w.oD)(p)?{isEnough:o,handleCreditsNotEnough:()=>{i()}}:{isEnough:o,handleCreditsNotEnough:()=>{t()}}});return{checkCredits:_,updateCredits:(0,s.k)(async t=>{let i=t||await h.F.UserService.getAvailableCredits({});e(C.R.actions.updateUsageInfo(i))},2e3),checkConcurrentTask:(0,r.w)(()=>{var e;let t=g.M_.getState().sessions,i=g.M_.getState().auth.userInfo;return{isEnough:t.sessions.ids.reduce((e,a)=>{let r=t.sessions.entities[a],s=g.M_.getState().sessions.currentSessionId;if(r&&(r.status===v.Ph.RUNNING||r.status===v.Ph.IN_QUEUE)){var n;let t=null===(n=r.collaborators.find(e=>e.userId===(null==i?void 0:i.uid)))||void 0===n?void 0:n.isOwner;return s!==a&&t?e+1:e}return e},0)<(null!==(e=null==i?void 0:i.concurrentSessions)&&void 0!==e?e:5),handleConcurrentTaskNotEnough:()=>{(0,o.C)({eventName:"limit_dialog_show",extData:{source:"concurrency_limit"}}),j()}}}),checkMembershipWall:(0,r.w)(e=>{let{module:t,motivation:i}=e,a=C.R.selectors.isVip(g.M_.getState());return"slide_template"===t?{isEnough:a,handleNotEnough:()=>{let e="choose_theme"===i.event?"member_slides_theme":"member_slides_length";(0,o.C)({eventName:"limit_dialog_show",extData:{source:e}}),I({title:"choose_theme"===i.event?f.I.t("Upgrade to unlock more themes"):f.I.t("Upgrade to customize slides length"),icon:n.Q,description:"choose_theme"===i.event?f.I.t("You've chosen a member-only theme. "):f.I.t("You've chosen a member-only page length"),upgradeTitle:f.I.t("Upgrade now"),cancelText:f.I.t("Cancel"),motivation:i})}}:{isEnough:!0,handleNotEnough:()=>{}}})}}},92766:(e,t,i)=>{"use strict";i.d(t,{e:()=>p});var a=i(75958),r=i(12766),s=i(93347),n=i(27016),l=i.n(n),o=i(59413),c=i(91452),d=i(40757);let u="intercom-session-".concat(r.a.intercomClientId),p=()=>{let e=(0,a.w)(async()=>!!o.A.get(u)),t=(0,a.w)(async e=>{window.Intercom||l()({app_id:r.a.intercomClientId,intercom_user_jwt:e,session_duration:31536e6}),(0,n.boot)({app_id:r.a.intercomClientId,hide_default_launcher:!0})});return{initHelpCenterAuth:(0,a.w)(async()=>{if(await e())return;let i=d.R.selectors.authStatus(c.M_.getState());if(i.isLogin&&!i.needSmsVerified)try{let e=(await s.F.UserService.getHelpCenterToken({})).token;await t(e)}catch(e){console.error(e)}}),handleUserLogoutHelpCenter:(0,a.w)(()=>{(0,n.shutdown)()})}}},32236:(e,t,i)=>{"use strict";i.d(t,{L:()=>o,v:()=>c});var a=i(75958),r=i(93347),s=i(99515),n=i(91452),l=i(17923);function o(){let e=(0,n.jL)();return{initExchangeInfo:(0,a.w)(()=>{e(l.M.actions.initData())}),loadExchangeInfo:(0,a.w)(async()=>{let t=await r.F.UserPublicService.getExchangeInfo({});e(l.M.actions.updateSubscriptions(t.subscriptions)),e(l.M.actions.updateAddonList(t.addonCredits))})}}function c(){let{initExchangeInfo:e,loadExchangeInfo:t}=o();(0,s.useEffect)(()=>{e(),t()},[])}},31342:(e,t,i)=>{"use strict";i.d(t,{S:()=>Y});var a=i(51416),r=i(75958),s=i(9205),n=i(16834),l=i(59496),o=i(59260),c=i(19417),d=i(18620),u=i(2635),p=i(76743),m=i(33890),x=i(53708),h=i(18214),v=i(91452),f=i(40757),g=i(17923),w=i(93847),y=i(28715),b=i(21731),C=i(78085),S=i(25850),j=i(57271),I=i(68209),N=i(50232),k=i(37134),_=i(48046),T=i(99515);function P(e){let t=(0,v.GV)(f.R.selectors.userInfo),i=(0,v.GV)(g.M.selectors.planList),a=(0,v.GV)(f.R.selectors.planKey),r=(0,w.wZ)(a),n=i.find(t=>t.plan===(0,w.wZ)(e.targetPlan)),[o,c]=(0,x.W)(()=>{let t=i.find(e=>e.plan===r),a=i.find(t=>t.plan===(0,w.wZ)(e.targetPlan));if(!t||!a)return[[],[]];let s=[],n=[];return t.credits-a.credits>0&&(s.push(y.ZV.credits),n.push(y.ZV.credits)),t.maxConcurrentTask>a.maxConcurrentTask&&(s.push(y.ZV.concurrent),n.push(y.ZV.concurrent)),t.maxScheduledTask>a.maxScheduledTask&&(s.push(y.ZV.scheduledTask),n.push(y.ZV.scheduledTask)),[s,n]}),[d,b]=(0,T.useState)(!1),C=async()=>{try{b(!0),await e.onConfirm(),e.onDisposed()}catch(e){(0,s.oR)({variant:"error",title:l.P.formatErrorToString(e)})}finally{b(!1)}},S=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()};return(0,u.jsx)(m.l,{width:450,title:(0,u.jsx)(I.p,{S:e.title||j.I.t("Downgrade confirmation"),data:{planName:(null==n?void 0:n.planName)||"-"}}),onDisposed:S,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!d,children:(0,u.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,u.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:r===(null==n?void 0:n.plan)?j.I.t("You can now use the remaining credits and features for this billing cycle. Starting from the next cycle, you will be automatically charged according to the new plan."):j.I.t("You can now use the remaining credits and features for this billing cycle. Starting with your next billing cycle, you'll no longer have access to premium features and your credits will decrease.")}),(0,u.jsx)(L,{label:j.I.t("Current plan"),theme:"gray",planKey:a,benefits:o}),(0,u.jsx)(L,{label:j.I.t("New plan"),planKey:e.targetPlan,benefits:c}),(0,u.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,u.jsx)(N.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,u.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[10px]",children:j.I.t("Next plan renew")}),(0,u.jsx)("span",{className:"text-[var(--text-primary)]",children:h.F.format(new Date(1e3*Number(null==t?void 0:t.currentPeriodEnd)),"PP")})]}),(0,u.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,u.jsx)(p.A,{color:"gray",size:"medium",disabled:d,onClick:S,className:"min-w-[72px]",children:j.I.t("Cancel")}),(0,u.jsx)(p.A,{color:"black",variant:"default",size:"medium",loading:d,onClick:C,children:j.I.t("Confirm")})]})]})})}function L(e){let{label:t,className:i,planKey:a,theme:r,benefits:s}=e,{getPlanInfo:n}=Y(),l=n(a),o="gray"===r;return(0,u.jsx)("div",{className:(0,b.cn)("bg-[var(--background-card)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",{"bg-[var(--background-card-gray)]":o},i),children:(0,u.jsxs)("div",{className:"flex flex-col items-stretch gap-[12px]",children:[(0,u.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:t}),(0,u.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,u.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==l?void 0:l.title)||"-"}),(0,u.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==l?void 0:l.membershipInterval)==="month"&&j.I.t("{price} / month",{price:(0,w.$g)(null==l?void 0:l.displayPrice)}),(null==l?void 0:l.membershipInterval)==="year"&&j.I.t("{price} / year",{price:(0,w.$g)(null==l?void 0:l.displayPrice)})]})]}),!!s.length&&(0,u.jsx)("ul",{className:(0,b.cn)("flex flex-col items-stretch gap-[4px]","text-[14px] leading-[22px] font-normal text-[var(--text-secondary)]",o?"text-[var(--text-tertiary)]":""),children:s.map(e=>(0,u.jsxs)("li",{className:"relative pl-[24px]",children:[(0,u.jsx)("div",{className:"absolute top-[3px] left-0",children:o?(0,u.jsx)(k.A,{size:16,color:"var(--icon-disable)"}):(0,u.jsx)(_.A,{size:16,color:"var(--icon-secondary)"})}),(0,u.jsx)(I.p,{S:e,data:{credits:(null==l?void 0:l.credits)?(0,S.Ql)(null==l?void 0:l.credits):"-",concurrentTasks:(null==l?void 0:l.maxConcurrentTask)||"-",maxScheduledTask:(null==l?void 0:l.maxScheduledTask)||"-"},components:{b:e=>(0,u.jsx)("span",{className:(0,b.cn)("font-bold text-[var(--text-primary)]",o?"text-[var(--text-tertiary)]":""),children:e}),link:e=>(0,u.jsx)("a",{className:"underline hover:opacity-80 text-[var(--text-tertiary)] text-sm leading-[22px]",href:C.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})]},e))})]})})}var E=i(50220),M=i(78308),A=i(63226),R=i(18184),F=i(93347),D=i(99820);function U(e){let{onDisposed:t}=e,i=(0,v.GV)(g.M.selectors.stripeBillingLoading),{goStripeBilling:a}=Y();return(0,u.jsx)(m.l,{onDisposed:t,className:"w-[440px]",children:(0,u.jsxs)("div",{className:"pt-[20px] pb-[40px] flex flex-col items-center justify-center",children:[(0,u.jsx)(D.i,{size:80,color:"var(--icon-disable)"}),(0,u.jsx)("div",{className:"mt-[24px] text-xl font-[600] leading-[26px] text-[var(--text-primary)]",children:j.I.t("You have a bill in progress")}),(0,u.jsx)("div",{className:"mt-2 text-sm leading-[22px] text-center text-[var(--text-tertiary)]",children:j.I.t("Review it before starting a new one?")}),(0,u.jsx)(p.A,{className:"mt-[48px] w-[300px]",color:"black",loading:i,size:"large",onClick:async()=>{await a()},children:j.I.t("View my bill")})]})})}function V(e){let{preCheckPlatform:t}=Y(),i=(0,v.GV)(f.R.selectors.userInfo),c=(0,v.GV)(f.R.selectors.planKey),{getPlanInfo:d,getSubscriptionChangeStatus:g}=Y(),y=d(c),b=d(e.targetPlan),C=(0,w.aL)(c||R.zl.UNKNOWN),k=(0,w.aL)(e.targetPlan),_=e.previewData.total&&0>Number(e.previewData.total),P="yearly"===C&&"monthly"===k&&_,[L,E]=(0,T.useState)(!1),[D,V]=(0,T.useState)(!1),{open:O}=(0,a.s)(U),z=g(c,e.targetPlan),B=(0,x.W)(()=>{if(!y||!b)return"";let e=b.credits||0,t=y.credits||0,i=(0,S.Ql)(e-t),a=(0,S.Ql)(e-t);if(P)return _?j.I.t("You'll receive a refund for the difference between your current plan's remaining value and the new plan cost. You'll immediately receive {credits} credits, along with {extraAddOnCredits} extra add-on credits. You'll be billed at the new rate starting next cycle.",{credits:i,extraAddOnCredits:a}):j.I.t("You'll pay the difference between your current plan's remaining value and the new plan cost. You'll immediately receive {credits} credits, along with {extraAddOnCredits} extra add-on credits. You'll be billed at the new rate starting next cycle.",{credits:i,extraAddOnCredits:a});let r=j.I.t("You will pay the price difference between plans and immediately receive {credits} monthly credits, along with {extraAddOnCredits} extra add-on credits. Starting from the next cycle, you will be automatically charged according to the new plan.",{credits:i,extraAddOnCredits:a}),s=j.I.t("You will pay the price difference between plans. Starting from the next cycle, you will be automatically charged according to the new plan."),n=j.I.t("You can now use the remaining credits and features for this billing cycle. Starting with your next billing cycle, you'll no longer have access to premium features and your credits will decrease."),l=j.I.t("Starting from the next cycle, you will be automatically charged according to the new plan."),o=(0,w.GU)(null==y?void 0:y.plan,null==b?void 0:b.plan);if("now"===z){if("same"===o)return s;if("upgrade"===o)return r}else if("next"===z){if("same"===o)return l;if("downgrade"===o)return n}return""}),W=(0,x.W)(()=>{let e=new Date;if("now"===z){let t=null==b?void 0:b.membershipInterval;"year"===t?e.setFullYear(e.getFullYear()+1):"month"===t&&e.setMonth(e.getMonth()+1)}return"next"===z&&(e=new Date(1e3*Number(null==i?void 0:i.currentPeriodEnd))),h.F.format(e,"PP")}),K=(0,r.w)(async()=>{if(!D&&((0,o.C)({eventName:"subscription_management"}),t()))try{V(!0);let e=await F.F.SubscriptionService.billingPage({});window.open(e.url,"_blank","noreferrer noopener")}catch(e){(0,s.oR)({variant:"error",title:l.P.formatErrorToString(e)})}finally{V(!1)}}),G=async()=>{(0,o.C)({eventName:"upgrade_confirmation_dialog_click"});try{E(!0),await e.onConfirm(),e.onDisposed()}catch(a){var t,i;let e=(0,l.O)(a);(null==e?void 0:null===(t=e.debug)||void 0===t?void 0:t.code)===n.Jh.ExistUnpaidInvoice?O():(null==e?void 0:null===(i=e.debug)||void 0===i?void 0:i.code)===n.Jh.PaymentFailedNeedToBill?(0,s.oR)({variant:"error",title:(0,u.jsxs)("span",{children:[j.I.t("Payment failed. Please update to a valid payment method."),(0,u.jsx)(p.A,{className:"ms-2 leading-5 text-base font-normal",variant:"link",onClick:()=>{K()},children:j.I.t("Manage payment")})]})}):(0,s.oR)({variant:"error",title:l.P.formatErrorToString(a)})}finally{E(!1)}},H=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()},Z=(0,r.w)(()=>{y&&b&&"notSupport"!==z&&(0,o.C)({eventName:"upgrade_confirmation_dialog_show"})});return((0,T.useEffect)(()=>{Z()},[Z]),y&&b&&"notSupport"!==z)?(0,u.jsx)(m.l,{width:480,title:P?(0,u.jsx)(I.p,{S:e.title||j.I.t("Upgrade"),data:{planName:(null==b?void 0:b.planName)||"-"}}):(0,u.jsx)(I.p,{S:e.title||j.I.t("Upgrade confirmation"),data:{planName:(null==b?void 0:b.planName)||"-"}}),onDisposed:H,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!L,children:(0,u.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,u.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:B}),P?(0,u.jsxs)("div",{className:"bg-[var(--background-menu-white)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",children:[(0,u.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:j.I.t("Remaining value of current plan")}),(0,u.jsx)(M.m,{title:j.I.t("Remaining value: Calculated based on the unused time in your current billing period."),children:(0,u.jsx)("span",{className:"clickable hover:opacity-85 ml-[4px]",children:(0,u.jsx)(A.m,{color:"var(--icon-tertiary)",size:14,className:"ml-[4px]"})})})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,u.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:j.I.t("{planName} Annually",{planName:null==y?void 0:y.planName})}),(0,u.jsx)("span",{className:"text-[14px] font-medium",children:(0,w.$g)(Math.abs(e.previewData.prorationAmount))})]})]}),(0,u.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-light)] my-4"}),(0,u.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,u.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:j.I.t("New plan")}),(0,u.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,u.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:j.I.t("{planName} Monthly",{planName:null==b?void 0:b.planName})}),(0,u.jsx)("span",{className:"text-[14px] font-medium",children:(null==b?void 0:b.displayPrice)?j.I.t("{price} / month",{price:null==b?void 0:b.displayPrice}):"-"})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("span",{className:"text-[var(--text-primary)] text-sm leading-[22px]",children:j.I.t("Tax")}),(0,u.jsx)("span",{className:"text-[14px] font-medium",children:e.previewData.tax?j.I.t("{price} / month",{price:(0,w.$g)(e.previewData.tax)}):"-"})]})]})]}):(0,u.jsxs)("div",{className:"bg-[var(--background-menu-white)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",children:[(0,u.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,u.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:j.I.t("Current plan")}),(0,u.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,u.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==y?void 0:y.title)||"-"}),(0,u.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==y?void 0:y.membershipInterval)==="month"&&j.I.t("{price} / month",{price:(0,w.$g)(null==y?void 0:y.displayPrice)}),(null==y?void 0:y.membershipInterval)==="year"&&j.I.t("{price} / year",{price:(0,w.$g)(null==y?void 0:y.displayPrice)})]})]})]}),(0,u.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-light)] my-4"}),(0,u.jsxs)("div",{className:"flex flex-col items-stretch gap-[4px]",children:[(0,u.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:j.I.t("New plan")}),(0,u.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,u.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:(null==b?void 0:b.title)||"-"}),(0,u.jsxs)("span",{className:"text-[14px] font-medium",children:[(null==b?void 0:b.membershipInterval)==="month"&&j.I.t("{price} / month",{price:(0,w.$g)(null==b?void 0:b.displayPrice)}),(null==b?void 0:b.membershipInterval)==="year"&&j.I.t("{price} / year",{price:(0,w.$g)(null==b?void 0:b.displayPrice)})]})]})]})]}),"now"===z&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"flex flex-col gap-[16px] pt-1",children:[P?(0,u.jsx)(u.Fragment,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"px-4 flex flex-col gap-[12px] text-[14px] leading-[20px] font-normal text-[var(--text-primary)]",children:[(0,u.jsx)("span",{className:"font-medium",children:j.I.t("Payment required")}),(0,u.jsxs)("div",{className:"flex items-center justify-between gap-[12px]",children:[(0,u.jsx)("span",{className:"text-[var(--text-tertiary)]",children:j.I.t("Difference")}),(0,u.jsx)("span",{children:(0,w.$g)(e.previewData.subTotal)})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between gap-[12px]",children:[(0,u.jsx)("span",{className:"text-[var(--text-tertiary)]",children:j.I.t("Tax")}),(0,u.jsx)("span",{children:(0,w.$g)(e.previewData.tax)})]})]}),(0,u.jsx)("div",{className:"w-full h-[1px] bg-[var(--border-dark)]"})]}),(0,u.jsxs)("div",{className:"px-4 pt-1 pb-2 flex items-center justify-between gap-[12px] text-[16px] leading-[22px] text-[var(--text-primary)] font-semibold",children:[(0,u.jsx)("span",{children:P?_?j.I.t("Refund"):j.I.t("Payment required"):j.I.t("Total")}),(0,u.jsx)("span",{children:P?(0,w.$g)(Math.abs(Number(e.previewData.total))):(0,w.$g)(e.previewData.total)})]})]})}),(0,u.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,u.jsx)(N.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,u.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[10px]",children:j.I.t("Next plan renew")}),(0,u.jsx)("span",{className:"text-[var(--text-primary)]",children:W})]}),(0,u.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,u.jsx)(p.A,{color:"gray",size:"medium",disabled:L,onClick:H,className:"min-w-[72px]",children:j.I.t("Cancel")}),(0,u.jsx)(p.A,{color:"black",variant:"default",size:"medium",loading:L,onClick:G,children:j.I.t("Confirm upgrade")})]})]})}):null}function O(e){let t=(0,v.GV)(f.R.selectors.userInfo),{getPlanInfo:i}=Y(),a=i(e.targetPlanKey),[r,n]=(0,T.useState)(!1),o=async()=>{try{n(!0),await e.onConfirm(),e.onDisposed()}catch(e){(0,s.oR)({variant:"error",title:l.P.formatErrorToString(e)})}finally{n(!1)}},c=()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()};return(0,u.jsx)(m.l,{width:450,title:j.I.t("Reactivate your subscription"),onDisposed:c,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",closeIconVisible:!r,children:(0,u.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch gap-[16px]",children:[(0,u.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)]",children:j.I.t("You can continue to use your credits and gain access to all {planName} plan features. Starting with your next billing cycle, your account will automatically renew.",{planName:(null==a?void 0:a.planName)||"-"})}),(0,u.jsx)(z,{label:j.I.t("Current plan"),price:null==a?void 0:a.displayPrice,membershipInterval:null==a?void 0:a.membershipInterval,title:null==a?void 0:a.planName}),(0,u.jsxs)("p",{className:"text-[13px] leading-[18px] font-normal px-[4px]",children:[(0,u.jsx)(N.A,{size:16,color:"var(--text-tertiary)",className:"inline-block mr-[6px] mt-[-3px]"}),(0,u.jsx)("span",{className:"text-[var(--text-tertiary)] mr-[8px]",children:j.I.t("Next plan renew")}),(0,u.jsx)("span",{className:"text-[var(--text-primary)]",children:h.F.format(new Date(1e3*Number(null==t?void 0:t.currentPeriodEnd)),"PP")})]}),(0,u.jsxs)("div",{className:"mt-[8px] flex items-center justify-end gap-[8px]",children:[(0,u.jsx)(p.A,{color:"gray",size:"medium",disabled:r,onClick:c,className:"min-w-[72px]",children:j.I.t("Cancel")}),(0,u.jsx)(p.A,{color:"black",variant:"default",size:"medium",loading:r,onClick:o,className:"min-w-[72px]",children:j.I.t("Confirm")})]})]})})}function z(e){let{label:t,className:i,price:a,title:r,membershipInterval:s}=e;return(0,u.jsx)("div",{className:(0,b.cn)("bg-[var(--background-card)] border border-[var(--border-dark)] rounded-[12px] p-[16px]",i),children:(0,u.jsxs)("div",{className:"flex flex-col items-stretch gap-[12px]",children:[(0,u.jsx)("span",{className:"text-[13px] leading-[18px] text-[var(--text-tertiary)]",children:t}),(0,u.jsxs)("div",{className:"flex justify-between items-center gap-[12px] text-[var(--text-primary)] leading-[22px]",children:[(0,u.jsx)("span",{className:"font-georgia text-[16px] font-bold",children:r||"-"}),(0,u.jsxs)("span",{className:"text-[14px] font-medium",children:["month"===s&&j.I.t("{price} / month",{price:(0,w.$g)(a)}),"year"===s&&j.I.t("{price} / year",{price:(0,w.$g)(a)})]})]})]})})}var B=i(89310),W=i(47488),K=i(29298),G=i(27846),H=i(4232);function Y(){let e=(0,v.jL)(),t=(0,v.GV)(g.M.selectors.planList),i=(0,v.GV)(f.R.selectors.membershipVersion),u=(0,v.GV)(e=>g.M.selectors.planListLib6(e,i)),p=(0,v.GV)(g.M.selectors.planListPoorArea0),m=(0,v.GV)(g.M.selectors.subscriptions),{updateCredits:x}=(0,H.I)(),{fetchUserInfo:h}=(0,G.As)(),{open:y}=(0,a.s)(V),{open:b}=(0,a.s)(P),{open:C}=(0,a.s)(O),{open:S}=(0,a.s)(d.X),{open:I}=(0,a.s)(E.l),N=(0,r.w)(async e=>{let{planKey:t}=e,i=sessionStorage.getItem(n.Dy.upgradeSessionId)||void 0;i&&sessionStorage.removeItem(n.Dy.upgradeSessionId);let a=(0,w.Iq)(g.M.selectors.subscriptionSource(v.M_.getState()),{teamUid:e.teamUid}),r=(0,w.fz)(g.M.selectors.subscriptionSource(v.M_.getState()),{planKey:t,teamUid:e.teamUid,quantity:e.quantity});if(!t)throw Error(j.I.t("Params error: planKey is empty."));let s={...c.J.getMotivation(!0),type:"init",item:c.J.formatPlan(t)};c.J.trackPayment(s);let l="";if((0,w.wZ)(t)===R.OL.TEAM){let n=await F.F.SubscriptionService.teamSubscriptionCheckout({planKey:t,teamUid:e.teamUid,quantity:e.quantity,cancelUrl:r,successUrl:a,sessionId:i,motivation:JSON.stringify(s)});if(!n.checkoutUrl)throw Error(j.I.t("Team checkout link does not exist"));l=n.checkoutUrl}else{let e=await F.F.SubscriptionService.checkout({planKey:t,cancelUrl:r,successUrl:a,sessionId:i,motivation:JSON.stringify(s)});if(!e.checkoutUrl)throw Error(j.I.t("Checkout link does not exist"));l=e.checkoutUrl}window.location.href=l}),k=(0,r.w)(async e=>{let{planKey:t,teamUid:i,quantity:a}=e;if(!t)throw Error(j.I.t("Params error: planKey is empty."));let r="",s=new URL(window.location.origin+window.location.pathname);s.hash="",s.searchParams.set("paymentType","credits");let n=(0,w.fz)(g.M.selectors.subscriptionSource(v.M_.getState()),{planKey:t,teamUid:i}),l=(0,w.Iq)(g.M.selectors.subscriptionSource(v.M_.getState())),o={...c.J.getMotivation(!0),type:"buy_credits",item:c.J.formatPlan(t)};if(c.J.trackPayment(o),!(r=t===B.ww.TEAM_ADDON?(await F.F.SubscriptionService.teamSubscriptionCheckout({planKey:t,teamUid:i,cancelUrl:n,successUrl:l,quantity:a,motivation:JSON.stringify(o)})).checkoutUrl:(await F.F.SubscriptionService.checkout({planKey:t,cancelUrl:n,successUrl:l,motivation:JSON.stringify(o)})).checkoutUrl))throw Error(j.I.t("Checkout link does not exist"));window.location.href=r}),_=(0,r.w)(async e=>{await F.F.SubscriptionService.update(e)}),T=(0,r.w)(async e=>{let t=await F.F.SubscriptionService.preview({planKey:e.planKey});y({title:e.title,targetPlan:e.planKey,previewData:t,onConfirm:async()=>{var t;let i={...c.J.getMotivation(!0),type:"upgrade",item:c.J.formatPlan(e.planKey)};c.J.trackPayment(i),await _({planKey:e.planKey}),J(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),L=(0,r.w)(async e=>{b({title:e.title,targetPlan:e.planKey,onConfirm:async()=>{var t;await _({planKey:e.planKey}),await J(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),M=(0,r.w)(e=>{C({targetPlanKey:e.planKey,onConfirm:async()=>{var t;await _({planKey:e.planKey}),await J(),null===(t=e.onSuccess)||void 0===t||t.call(e)},onCancel:e.onCancel})}),A=(0,r.w)(async(t,i)=>{e(g.M.actions.showLoading(i.planKey));try{switch(t){case R.v6.init:await N(i);return;case R.v6.upgrade:case R.v6.reactiveUpgrade:await T({...i,title:t===R.v6.reactiveUpgrade?j.I.t("Reactivate {planName}"):void 0});break;case R.v6.downgrade:case R.v6.reactiveDowngrade:await L({...i,title:t===R.v6.reactiveDowngrade?j.I.t("Reactivate {planName}"):void 0});break;case R.v6.reactive:case R.v6.restore:await M(i);break;case R.v6.pastDueSubscription:I();break;default:throw Error("Error: not allowed subscribeType: ".concat(t))}e(g.M.actions.hideLoading())}catch(t){throw e(g.M.actions.hideLoading()),t}}),D=(0,r.w)(()=>{var e;let t=null===(e=v.M_.getState().auth.userInfo)||void 0===e?void 0:e.paymentPlatform;return t===K.a.stripe||(S({title:j.I.t("Unable to manage subscription"),text:j.I.t("This subscription was made through {platform}. Please manage it on the corresponding platform.",{platform:(0,w.BN)(t)}),btnText:j.I.t("Got it")}),!1)}),U=(0,r.w)(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=i.find(t=>t.plan===(0,w.wZ)(e));if(e===R.zl.UNKNOWN)return{...a,displayPrice:0,originPrice:0,monthlyPrice:0,discountPrice:0,membershipInterval:"month"};let r=m.find(t=>t.plan===e);if(!a||!r)return null;let s=r.discountPrice&&r.discountPrice<r.price?r.discountPrice:r.price,n=s,l="";(e===R.zl.CASUAL_MONTHLY||e===R.zl.PRO_MONTHLY||e===R.zl.TEAM_MONTHLY||e===R.zl.LITE_MONTHLY)&&(l="month"),(e===R.zl.CASUAL_YEARLY||e===R.zl.PRO_YEARLY||e===R.zl.TEAM_YEARLY||e===R.zl.LITE_YEARLY)&&(l="year",n=Math.ceil(s/12));let o=r.price;return{...a,subscription:r,displayPrice:s,originPrice:o,monthlyPrice:n,discountPrice:r.discountPrice,membershipInterval:l}}),z=(0,r.w)(e=>U(e,u)),Y=(0,r.w)(e=>U(e,p)),Z=(0,r.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R.OL.LITE,t=U((0,w.nW)(e,!1)),i=U((0,w.nW)(e,!0));if(!t||!i)return 0;let a=t.displayPrice||0,r=i.displayPrice||0;if(r&&a)return Math.ceil((12*a-r)/(12*a)*100)}),$=(0,r.w)((e,t)=>{let i=(0,w.wZ)(e),a=(0,w.wZ)(t);if(!e||!t||!i||!a)return"notSupport";let r=(0,w.aL)(e),s=(0,w.aL)(t),n=(0,w.GU)(i,a);if("yearly"===r&&"monthly"===s){if("upgrade"===n)return"now";if("same"===n||"downgrade"===n)return"next"}if("monthly"===r&&"yearly"===s){if("upgrade"===n||"same"===n)return"now";if("downgrade"===n)return"next"}if(r===s){if("upgrade"===n)return"now";if("downgrade"===n)return"next"}return"notSupport"}),q=(0,r.w)(async()=>{(0,o.C)({eventName:"subscription_management"});try{e(g.M.actions.setStripeBillingLoading(!0));let t=await F.F.SubscriptionService.billingPage({});window.open(t.url,"_blank","noreferrer noopener")}catch(e){(0,s.oR)({variant:"error",title:l.P.formatErrorToString(e)})}e(g.M.actions.setStripeBillingLoading(!1))}),J=(0,r.w)(async()=>{await Promise.all([h(),x()]),(0,s.oR)({variant:"success",title:j.I.t("Subscription plan changed successfully.")}),W.T.emit("subscriptionChange")});return{subscribe:N,buyAddonCredits:k,updateSubscription:_,submitSubscribe:A,handleReactive:M,preCheckPlatform:D,getPlanInfo:U,getPlanInfoLib6:z,getPlanInfoPoorArea0:Y,getPlanDiscount:Z,getSubscriptionChangeStatus:$,goStripeBilling:q,onSubscribeSuccess:J}}},60099:(e,t,i)=>{"use strict";i.d(t,{$:()=>s});var a=i(25850);class r{attachmentIsReady(e){let t=this.readySourceMap.get(e);return!t||t.ready}markReady(e){let t=this.readySourceMap.get(e);t&&t.markReady()}waitReady(e){return Promise.all(e.map(e=>{var t;return null===(t=this.readySourceMap.get(e))||void 0===t?void 0:t.waitReady()}))}clearReadySource(e){e.forEach(e=>{var t;null===(t=this.readySourceMap.get(e))||void 0===t||t.clear(),this.readySourceMap.delete(e),this.userPastedContentMap.delete(e)})}setUserPastedContent(e,t){this.userPastedContentMap.set(e,t)}updateUserPastedContent(e,t){let i=this.userPastedContentMap.get(e);if(i){if(Object.assign(i,t),this.userPastedContentMap.set(e,{...i,...t}),i.content!==i.lastContent){let t=this.readySourceMap.get(e)||(0,a.tu)();t.clearWithoutPromise(),this.readySourceMap.set(e,t)}else i.url&&this.markReady(e)}}getUserPastedContent(e){return this.userPastedContentMap.get(e)}constructor(){this.userPastedContentMap=new Map,this.readySourceMap=new Map}}let s=new r},75874:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});var a=i(75958),r=i(16834),s=i(59413);function n(){let e=(0,a.w)(()=>{let e=i();return e&&n(),{activityEntryFlag:e}}),t=(0,a.w)((e,t)=>{let i=new Date;i.setTime(i.getTime()+6e4*(t||10)),s.A.set(r.eu.activityEntryFlag,e,{expires:i})}),i=(0,a.w)(()=>s.A.get(r.eu.activityEntryFlag)),n=(0,a.w)(()=>{s.A.remove(r.eu.activityEntryFlag)});return{consumeActivityEntryFlag:e,setActivityEntryFlag:t}}},79544:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});var a=i(12766),r=i(57271);class s{getDisplayFilename(e){if(!e)return"";let t=e.split(".");if(t.length>0){let e=t[t.length-1];return("md"===e||"mdx"===e)&&t.pop(),t.join(".")}return e}mergeFilenameWithExt(e,t){if("unknown"===t)return e;let i=e.split(".");return i.length>1&&i[i.length-1]===t||(t.startsWith(".")?i.push(t.slice(1)):i.push(t)),i.join(".")}getFileName(e){return e.split(/\/|\\/).pop()||e}getFileExt(e){return e.split(".").pop()||""}getSpaceId(e){try{return new URL(e).host.split(".")[0]||""}catch(e){return console.error("get space id  error",e),""}}getDeployId(e){try{return new URL(e).host.split(".")[0]||""}catch(e){return console.error("get deploy id error",e),""}}getLinkType(e){try{if(!e)return"other";let t=new URL(e);if(t.hostname===a.a.pageDomain)return"page";if(a.a.deployDomain&&t.hostname.endsWith(a.a.deployDomain))return"deploy";if(a.a.spaceDomain&&t.origin.endsWith(a.a.spaceDomain))return"space";if(a.a.sandboxDomain&&t.origin.endsWith(a.a.sandboxDomain)||t.origin.endsWith("manusvm.computer"))return"sandbox";return"other"}catch(e){return console.error("get link type error",e),"other"}}extractDomainPrefix(e){if(!e||"string"!=typeof e)return"";let t=e.trim();return(t=t.replace(/^(https?:\/\/)?(www\.)?/i,"")).includes(".")?t.split(".")[0]||"":t}validateSubdomain(e){return e.length<3?{valid:!1,message:r.I.t("The subdomain must be at least 3 characters long.")}:e.length>63?{valid:!1,message:r.I.t("The subdomain must not exceed 63 characters.")}:e.includes("--")?{valid:!1,message:r.I.t("The subdomain cannot contain consecutive hyphens.")}:/^[a-z0-9][a-z0-9-]*[a-z0-9]$/.test(e)?{valid:!0}:{valid:!1,message:r.I.t("The subdomain can only contain lowercase letters, numbers, and hyphens, and must start and end with a letter or number.")}}replaceFirstSubdomain(e,t){try{let i=new URL(e),a=i.hostname.split(".");if(a.length>=2){a[0]=t;let e=a.join(".");return i.hostname=e,i.toString()}return e}catch(t){return console.error("Invalid URL:",t),e}}getDownloadFilename(e,t){let i=this.getFileExt(e),a=this.getFileExt(t);return i===a?e:"".concat(e,".").concat(a)}downloadFileWithALink(e,t){let i=document.createElement("a");i.href=e,i.target="_blank",i.download=t,i.click(),window.URL.revokeObjectURL(e)}async getDownloadBlobUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i="";try{let a=await fetch(e,{method:"HEAD"}),r=a.headers.get("content-disposition"),s=a.headers.get("content-type"),n=r&&r.includes("attachment")||"application/octet-stream"===s,l=a.headers.get("content-length");if((l?parseInt(l,10):0)<1048576*t&&!n){let t=await fetch(e),a=await t.blob();i=e=URL.createObjectURL(a)}}catch(e){console.error(e)}return i}}let n=new s},4094:(e,t,i)=>{"use strict";i.d(t,{yl:()=>W,rN:()=>K});var a=i(51416),r=i(75958),s=i(9205),n=i(59496),l=i(59260),o=i(42518),c=i(93347),d=i(25850),u=i(89902),p=i(57271),m=i(5685),x=i(23693),h=i(57148),v=i(47488),f=i(34778),g=i(2054),w=i(61207),y=i(8216),b=i(81705),C=i(25087),S=i(48550),j=i(67887),I=i(79544);class N{updateDuration(e){if(this.clearTimer(),!e||e<=0)return;let t=Math.max((Number(e)-60)*1e3,1e3);this.expirationTime=Date.now()+t,this.setupTimer()}registerRefreshCallbackOnce(e){this.cb||(this.cb=e)}setupTimer(){if(!this.cb||!this.expirationTime)return;this.clearTimer();let e=this.expirationTime-Date.now();if(e<=0){this.cb();return}this.timer=setTimeout(()=>{var e;null===(e=this.cb)||void 0===e||e.call(this),this.clearTimer()},e)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}destroy(){this.clearTimer(),this.cb=null,this.expirationTime=null}constructor(){this.cb=null,this.timer=null,this.expirationTime=null}}var k=i(2635),_=i(76743),T=i(33890),P=i(41661),L=i(12138),E=i(85078),M=i(12766),A=i(21731),R=i(54914),F=i(89310),D=i(99515),U=i(88672),V=i(40757),O=i(93847);function z(e){let{domain:t,spaceId:i,sessionId:o,onDisposed:c}=e,d=I.$.extractDomainPrefix(t),[u,m]=(0,D.useState)(d),[x,h]=(0,D.useState)(!0),[v,f]=(0,D.useState)(""),{isLoading:g,run:w}=(0,E.W)(),{editSpaceSubdomain:y}=K(),b=(0,U.d4)(V.R.selectors.membershipVersion),{open:C}=(0,a.s)(R.v),S=(0,r.w)((e,t)=>{(0,l.C)({eventName:"domain_change_click",extData:{siteId:e,sessionId:o,action:t}})}),j=(0,O.oD)(b),N=(0,r.w)(()=>{if(x){if(t===u){(0,s.oR)({variant:"warning",title:p.I.t("The domain is the same as the original domain")});return}S(u,"save_click"),w(async()=>{try{await y(i,u),(0,s.oR)({variant:"success",title:p.I.t("Subdomain updated successfully")}),c()}catch(e){h(!1),f(n.P.formatErrorToString(e,{rawMessage:!0}))}})}}),z=(0,r.w)(()=>{C({title:p.I.t("Change your plan"),featureList:["spaceDomain"],source:"change_subdomain",motivation:{page:"session",event:"feature_lock",reason:"change_subdomain"}})}),B=(0,r.w)(async e=>{if(!j)return;let{valid:t,message:i}=I.$.validateSubdomain(e);h(t),i&&f(i)}),W=(0,r.w)(e=>{m(e),B(e)});return(0,k.jsx)(T.l,{title:(0,k.jsxs)(k.Fragment,{children:[p.I.t("Change subdomain"),(0,k.jsx)(L.m,{planKey:F.ww.PRO_MONTHLY,className:"ml-1.5"})]}),headerClassName:(0,A.cn)("pt-[10px] px-[20px] pt-[20px]"),onDisposed:()=>{S(d,"close_click"),c()},width:480,children:(0,k.jsxs)("div",{className:(0,A.cn)("flex flex-col gap-2 w-full px-5"),children:[(0,k.jsxs)("div",{className:"flex flex-col gap-[6px]",children:[(0,k.jsxs)("div",{className:(0,A.cn)("flex-1 flex h-6 items-center justify-between rounded-[10px] bg-[var(--fill-tsp-white-main)] border border-[var(--border-dark)] px-3 py-2",!x&&"border-[var(--Button-secondary-error-border)]"),children:[(0,k.jsx)(P.p,{className:(0,A.cn)("bg-transparent transition-colors duration-300 grow focus:border-[1px solid var(--border-primary)] border-0 focus-visible:ring-0 px-0 py-0 h-6"," placeholder-[var(--text-disable)] text-[14px] placeholder:text-[14px] max-md:text-[16px]",!j&&"text-[var(--text-disable)]"),placeholder:p.I.t("Enter your new subdomain"),autoFocus:!0,disabled:!j,autoComplete:"off",value:u,onChange:e=>W(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())}}),(0,k.jsxs)("span",{className:(0,A.cn)("text-sm text-[var(--text-primary)]",!j&&"text-[var(--text-disable)] cursor-default"),children:[".",M.a.spaceDomain]})]}),x?(0,k.jsx)("div",{className:(0,A.cn)("text-[var(--text-tertiary)] text-xs flex items-center h-8 max-md:h-12"),children:j?p.I.t("After clicking 'Save changes', your new domain will take effect once it's configured. Please wait for the notification."):p.I.t("Custom subdomain is a premium feature. Upgrade to premium to experience personalized domain.")}):(0,k.jsx)("div",{className:"text-[var(--function-error)] text-xs h-8 max-md:h-12",children:v})]}),(0,k.jsxs)("div",{className:(0,A.cn)("flex items-center justify-end gap-2 py-5"),children:[(0,k.jsx)(_.A,{variant:"outline",size:"medium",onClick:()=>{S(d,"cancel_click"),c()},children:p.I.t("Cancel")}),j?(0,k.jsx)(_.A,{disabled:!x,size:"medium",color:"black",loading:g,onClick:N,children:p.I.t("Save changes")}):(0,k.jsx)(_.A,{size:"medium",color:"black",onClick:z,children:p.I.t("Upgrade to {plan}",{plan:"Pro"})})]})]})})}let B=new N,W=(0,d.tu)();function K(){let e=(0,m.jL)(),{messageSentToSocket:t}=(0,S.x)(),{openSidebar:i,closeSidebar:N}=(0,f.e)(),{setPreviewFile:k}=(0,y.d)(),{open:_}=(0,a.s)(z),T=(0,r.w)(function(t){if(m.M_.getState().fileManagement.isDownloadMode){let i=j.K.selectors.selectedFiles(m.M_.getState()),a=-1===i.findIndex(e=>t.id===e)?[...i,t.id]:i.filter(e=>t.id!==e);e(j.K.actions.setSelectedFiles(a));return}let a=g.C.convertSessionFileToPreviewFile(t);i({type:"filePreviewer",previewFile:a}),l.y.chatOperation.sessionFileClick({action:"preview",type:a.filetype,from:"file_management"}),"image"!==t.category&&"link"!==t.category&&v.T.emit("closeFileManagementDialog",{})}),P=(0,r.w)(async function(t){var i;let{filename:a,fileUrl:r}=t;if(l.y.chatOperation.sessionFileClick({action:"download",type:null!==(i=a.split(".").pop())&&void 0!==i?i:"",from:"file_management"}),(0,d.nA)(r))I.$.downloadFileWithALink(r,a);else{let t;if(!(t=await I.$.getDownloadBlobUrl(r,10)))try{t=(await e(h.Ef.endpoints.getDownloadUrl.initiate({signedCdnUrl:r},{forceRefetch:!0})).unwrap()).downloadUrl}catch(e){console.error(e)}I.$.downloadFileWithALink(t||r,a)}}),L=(0,r.w)(async t=>{let{url:i,originalFilename:a}=t,r=i;try{r=(await e(h.Ef.endpoints.getDownloadUrl.initiate({signedCdnUrl:i},{forceRefetch:!0})).unwrap()).downloadUrl}catch(e){console.error(e)}I.$.downloadFileWithALink(r,a)}),E=(0,r.w)(function(e){e.chatLocationEventId?v.T.emit("scrollToEvent",{eventId:e.chatLocationEventId}):console.warn("eventId is not defined"),v.T.emit("closeFileManagementDialog");let t=g.C.convertSessionFileToPreviewFile(e);l.y.chatOperation.sessionFileClick({action:"locate",type:t.filetype,from:"file_management"})}),M=(0,r.w)(e=>{}),A=(0,r.w)(async()=>{let t=m.M_.getState().sessions.currentSessionId;if(!t)return null;try{let i=await c.F.SpaceService.getSpaceStatus({sessionUid:t});i.success&&e(j.K.actions.setSpaces(i.spaceStatusInfo))}catch(e){console.error(e)}e(j.K.actions.setSpacesLoading(!1))}),R=(0,r.w)(async t=>{if(!t)return null;try{let i=await c.F.SpacePublicService.getSpaceStatus({sessionUid:t});i.success&&(e(j.K.actions.setSpaces(i.spaceStatusInfo)),e(j.K.actions.setTempActiveDeployId(i.activeDeployId||"")),e(j.K.actions.setTempSpaceId(i.spaceId||"")))}catch(e){console.error(e)}e(j.K.actions.setSpacesLoading(!1))}),F=(0,r.w)(async function(t,i,a){var r;let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],d=a||m.M_.getState().sessions.currentSessionId;if(!d)return console.error("sessionUid is not exist"),null;if((null===(r=j.K.selectors.spaces(m.M_.getState()).find(e=>e.spaceUid===t.id))||void 0===r?void 0:r.status)!==i){l&&e(j.K.actions.updateSpace({spaceUid:t.id,status:i}));try{(await c.F.SpaceService.setSpaceStatus({sessionUid:d,eventUid:t.deployEventId,status:i,spaceId:t.id})).Success&&(e(j.K.actions.updateSpace({spaceUid:t.id,status:i})),o&&(0,s.oR)({title:i===u.NP.VISIBLE?p.I.t("Website set to public"):p.I.t("Website set to unavailable"),variant:"success"}))}catch(a){o&&(0,s.oR)({title:n.P.formatErrorToString(a),variant:"error"}),l&&e(j.K.actions.updateSpace({spaceUid:t.id,status:i===u.NP.VISIBLE?u.NP.INVISIBLE:u.NP.VISIBLE}))}}}),D=(0,r.w)(function(){let t=Object.values(b.u.downloadableFiles(m.M_.getState()).groups).flatMap(e=>e).map(e=>e.id);e(j.K.actions.setSelectedFiles(t))}),U=(0,r.w)(function(t){t?(e(j.K.actions.setDownloadMode(!0)),D()):(e(j.K.actions.setSelectedFiles([])),e(j.K.actions.setDownloadMode(!1)))}),V=(0,r.w)(function(){}),O=(0,r.w)(async function(t,i){try{return await c.F.SpaceService.editSpaceSubDomain({spaceUid:t,subDomain:i}),e(j.K.actions.updateSpace({spaceUid:t,subDomainAudit:i,subDomainAuditStatus:u.Is.COMMIT})),!0}catch(e){throw(0,s.oR)({title:n.P.formatErrorToString(e,{rawMessage:!0}),variant:"warning"}),e}}),K=(0,r.w)((e,t,i)=>{let a=m.M_.getState().sessions.currentSessionId;_({domain:e,spaceId:t,sessionId:null!=i?i:a})}),G=(0,r.w)(async(t,i,a,r)=>{let s=r||m.M_.getState().sessions.currentSessionId;if(!s){console.error("sessionId is not exist");return}await c.F.SessionService.shareSpaceToCommunity({sessionUid:s,spaceUid:t.id,title:i,recommendReason:a,spaceUrl:t.url}),e(j.K.actions.updateSpace({publishedToCommunity:!0,auditStatus:u.EO.PENDING,spaceUid:t.id}))}),H=(0,r.w)(async(t,i)=>{let a=i||m.M_.getState().sessions.currentSessionId;if(!a){console.error("sessionId is not exist");return}await c.F.SessionService.unshareSpaceFromCommunity({sessionUid:a,spaceUid:t.id}),e(j.K.actions.updateSpace({publishedToCommunity:!1,auditStatus:u.EO.PENDING,spaceUid:t.id}))}),Y=(0,r.w)(async t=>{let{sessionId:i,shared:a,sig:r}=t;q(!0),e(j.K.actions.clearSessionFileList()),e(j.K.actions.setNotificationSessionFileList([])),await Z({sessionId:i,shared:a,sig:r,disabledErrorToast:!0}),q(!1)}),Z=(0,r.w)(async t=>{let{sessionId:i,shared:a,sig:r,disabledErrorToast:l=!1}=t;try{var o,c;let t=await e(x.R.endpoints.getSessionFiles.initiate({sessionId:i,type:a?"shared":"private",sig:r})).unwrap(),s=C.uT.selectors.currentSessionid(m.M_.getState()),n=null!==(o=t.files)&&void 0!==o?o:[],l=(null!==(c=t.transferFiles)&&void 0!==c?c:[]).map(e=>({...e,isTransferred:!0}));s===i&&(e(j.K.actions.setNotificationSessionFileList([])),e(j.K.actions.setSessionFileList([...n,...l])))}catch(e){l||(0,s.oR)({variant:"error",title:n.P.formatErrorToString(e)})}}),$=(0,r.w)(async()=>{let{editSpaceCode:t,validDuration:i}=await c.F.SpaceService.getEditSpaceSiteCode({});e(j.K.actions.setSpaceEditCode(t)),B.registerRefreshCallbackOnce($),B.updateDuration(i)}),q=(0,r.w)(t=>{if(e(j.K.actions.setInitSessionFileListLoading(t)),!t){let e=j.K.selectors.sessionFileList(m.M_.getState()),t=w.W.selectors.previewFile(m.M_.getState());if((null==t?void 0:t.filetype)==="space")return;let i=e.find(e=>{let i=g.C.getSessionFileId(e),a=g.C.getSessionFileSandboxPath(e);return i===(null==t?void 0:t.id)||a===(null==t?void 0:t.sandboxPath)});i&&k(g.C.convertSessionFileToPreviewFile(i))}}),J=(0,r.w)(async(i,a)=>{let{id:r}=i;try{let n=await t("switch_deploy_version",{deployId:r,sessionId:a});if(n.error)(0,s.oR)({title:n.error,variant:"error"});else if(n.spaceId){try{await F({id:n.spaceId,deployEventId:i.deployEventId},u.NP.VISIBLE,a,!0,!1)}catch(e){console.error(e)}e(C.uT.actions.updateSession({uid:a,activeDeployId:i.id,spaceId:n.spaceId})),(0,s.oR)({title:p.I.t("Published successfully"),variant:"success"})}else(0,s.oR)({title:p.I.t("Unknown error"),variant:"error"})}catch(e){(0,s.oR)({title:n.P.formatErrorToString(e),variant:"error"})}});return{handleFileClick:T,handleFileActionDownload:P,getSpaceStatus:A,updateSpaceStatus:F,setDownloadMode:U,selectAll:D,handleFileActionJumpToChat:E,handleFileActionShare:M,resetToTemporary:V,changeDomain:K,handleUnpublishSpace:H,handlePublishSpace:G,editSpaceSubdomain:O,getShareSpaceStatus:R,handleImageActionDownload:L,fetchSessionFiles:Z,initSessionFiles:Y,updateSpaceEditCode:$,updateInitSessionFileListLoading:q,openDeployLink:(0,r.w)(function(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=w.W.selectors.previewFile(m.M_.getState());if((null==r?void 0:r.url)===e.url)a&&N();else{let a="".concat(t,".space");i({type:"filePreviewer",previewFile:{filetype:"space",previewUrl:e.url+"#filename=".concat(encodeURIComponent(a)),url:e.url,filename:a,displayFilename:t,downloadFilename:a,sandboxPath:"",id:""}})}}),publishDeployLink:J,editDeployLink:(0,r.w)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.K.selectors.selectSpacePreviewerEditMode(m.M_.getState()),i=!t;e(j.K.actions.setSpacePreviewerEditMode(i)),await W.waitReady(),o.r.sendMessage({to:"content",type:i?"enableEditMode":"disableEditMode",payload:{}})})}}},2054:(e,t,i)=>{"use strict";i.d(t,{C:()=>l});var a=i(25850),r=i(57271),s=i(79544);class n{convertEventAttachmentToPreviewFile(e){let{title:t,url:i,filename:r,type:n}=e,l=t||s.$.getDisplayFilename(r),o="file"===n?s.$.getFileExt(r)||"":n,c=s.$.mergeFilenameWithExt(l,o);return{displayFilename:l,downloadFilename:c,filetype:o,filename:r,url:i,sandboxPath:e.path,previewUrl:i+"#filename=".concat((0,a.VF)(c)),id:e.path,lastUpdatedAt:e.timestamp}}convertAttachmentToPreviewFile(e){let t=this.getAttachmentFilename(e),i=e.title||e.filename||e.url||"Untitled",r=s.$.getDownloadFilename(i,t),n=e.url||"",l=n+"#filename=".concat((0,a.VF)(r));return{url:n,downloadFilename:r,fileExtra:e.extra,emailExtra:e.emailExtra,filetype:e.filetype,filename:e.filename,displayFilename:i,sandboxPath:e.id,id:e.id,previewUrl:l,fileMetaData:e.fileMetaData}}convertSessionFileToPreviewFile(e){let t=this.getSessionFiletype(e),i=this.getSessionFileOriginalFilename(e),a=this.getSessionFileUrl(e),r=this.getSessionFileSandboxPath(e),n=this.getSessionFileDownloadFilename(e),l=this.getSessionFilePreviewUrl(e),o=this.getSessionFileId(e),c=this.getSessionFileExtra(e),d=this.getSessionFileEmailExtra(e);return{displayFilename:s.$.getDisplayFilename(e.displayFilename),downloadFilename:n,filename:i,filetype:t,url:a,fileExtra:c,emailExtra:d,sandboxPath:r,shareId:e.shareId,previewUrl:l,id:o,lastUpdatedAt:e.lastUpdatedAt,isBlocked:e.isBlocked}}convertSlideCardToPreviewFile(e){var t;let{title:i="",outline:r=[],lastUpdatedAt:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:n="",slidesDetail:l}=e,o=e.url||"",c=e.content||"",d=i||(null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.title)||"Untitled";if(!o){let e=(null==l?void 0:l.directory)||"",t=(null==l?void 0:l.current.id)||"",i=(null==l?void 0:l.current.title)||"";o=URL.createObjectURL(new File([JSON.stringify({type:"slides",url:"",title:i,sourceUrl:"",directory:e,slideIds:[t],files:[{id:t,path:"",content:c,changed:!0}],outline:r,originalFilename:"",currentSlideId:t})],"".concat(d,".slides"),{type:"application/json"}))}let u=o+"#filename=".concat((0,a.VF)(((null==l?void 0:l.current.id)||d)+".slides"));return{displayFilename:d,downloadFilename:d+".slides",filename:d+".slides",filetype:"slides",url:o,sandboxPath:(null==l?void 0:l.directory)||n,previewUrl:u,id:(null==l?void 0:l.directory)||n,lastUpdatedAt:s}}getSessionFileOriginalFilename(e){let t=e.raw[0];if("deploy_result_file"==t.type)return e.displayFilename;if("meta_link_in_chat"===t.type)return t.title;if("sbx_slides"===t.type){let e=s.$.getFileExt(t.filename);return e===t.filename?t.filename+".slides":t.filename.replace(e,".slides")}return t.filename}getSessionFileExt(e){let t=e.raw[0];return"deploy_result_file"===t.type||"meta_link_in_chat"===t.type?"unknown":"sbx_slides"===t.type?"slides":s.$.getFileExt(t.filename)}getSessionFileDownloadFilename(e){let{displayFilename:t}=e,i=this.getSessionFileExt(e);return s.$.mergeFilenameWithExt(t,i)}getSessionFileUrl(e){try{let t=e.raw[0];if("tool_call_text_edit_file"===t.type&&!t.url)return URL.createObjectURL(new File([t.fileContent],t.filename,{type:"text/plain"}));if("tool_call_img_view_file"===t.type)return t.imageUrl;if("tool_call_video_generate_file"===t.type)return t.videoUrl;if("tool_call_speech_generate_file"===t.type)return t.audioUrl;return t.url||""}catch(e){return""}}getSessionFiletype(e){let t=e.raw[0];return"meta_link_in_chat"===t.type||"deploy_result_file"===t.type?"link":"sbx_slides"===t.type?"slides":"user_email"===t.type?"email":s.$.getFileExt(t.filename)}getSessionFilePreviewUrl(e){let t=this.getSessionFileUrl(e),i=e.raw[0];if("tool_call_text_edit_file"===i.type&&!i.url)return t+"#filename=".concat((0,a.VF)(i.filename));if("sbx_slides"===i.type||"tool_call_text_edit_file"===i.type&&"slides"===i.documentType)return s.$.getFileExt(i.filename)===i.filename?t+"#filename=".concat((0,a.VF)(i.filename+".slides")):t+"#filename=".concat((0,a.VF)(i.filename.replace(".html",".slides")));let r=this.getSessionFileOriginalFilename(e);return r?t+"#filename=".concat((0,a.VF)(r)):t}getSessionFileSandboxPath(e){let t=e.raw[0];return"deploy_result_file"===t.type||"meta_link_in_chat"===t.type?"":t.path}getSessionFileId(e){let t=e.raw[0];return this.isUserUploadFile(t)?t.id:this.getSessionFileSandboxPath(e)}isUserUploadFile(e){return"user_file"===e.type||"user_image"===e.type||"user_voice"===e.type}getSessionFileExtra(e){let t=e.raw[0];if(this.isUserUploadFile(t))return t.extra}getSessionFileEmailExtra(e){let t=e.raw[0];if("user_email"===t.type)return t.emailExtra}getAttachmentFilename(e){if("slides"===e.filetype){let t=s.$.getFileExt(e.filename);return t===e.filename?e.filename+".slides":e.filename.replace(t,".slides")}return e.filename}getFileText(e){if((0,a.u)(e))return r.I.t("Image");if((0,a.KJ)(e))return r.I.t("Code");if((0,a.L8)(e))return r.I.t("Audio");if((0,a.AE)(e))return r.I.t("Video");if((0,a.G5)(e))return r.I.t("Archive");switch(e){case"link":return r.I.t("Link");case"pdf":return r.I.t("PDF");case"doc":case"docx":case"fodt":case"odt":return r.I.t("Document");case"fodp":case"odp":case"ppt":case"pptx":case"pps":case"ppsx":case"sldx":return r.I.t("Presentation");case"xls":case"xlsx":case"ods":case"fods":case"csv":case"tsv":return r.I.t("Spreadsheet");case"text":case"txt":return r.I.t("Text");case"md":return r.I.t("Markdown");case"slides":return r.I.t("Slides");default:return r.I.t("File")}}}let l=new n},8216:(e,t,i)=>{"use strict";i.d(t,{d:()=>y});var a=i(75958),r=i(9205),s=i(59496),n=i(7863),l=i(21731);class o{async parse(e){let t=await e.text(),i={originalFilename:e.name,originalFileUrl:void 0,size:e.size,lastModified:new Date(e.lastModified)};return i.source=t,{...i,type:"code",lang:"plaintext",content:t}}}var c=i(40451),d=i(93347),u=i(76656),p=i(91452),m=i(60099),x=i(67887),h=i(79544),v=i(81705),f=i(25087),g=i(2054),w=i(61207);function y(){let e=(0,p.jL)(),t=(0,a.w)(async()=>{var t,i,a;let r=w.W.selectors.previewFile(p.M_.getState());if((null==r?void 0:null===(t=r.fileMetaData)||void 0===t?void 0:t.tag)==="pasted_content"){let t=m.$.getUserPastedContent(r.fileMetaData.fileId);if(t){let i=await new o().parse(new File([t.lastContent],r.filename,{type:"text/plain"}));e(w.W.actions.setPreviewData(i));return}}if((null==r?void 0:null===(i=r.fileMetaData)||void 0===i?void 0:i.tag)==="pasted_content_file"){let t=await new o().parse(new File([r.fileMetaData.content],r.filename,{type:"text/plain"}));e(w.W.actions.setPreviewData(t));return}let s=new c.l,n=w.W.selectors.filePreviewerUrl(p.M_.getState());if(!n)return;e(w.W.actions.setLoading(!0));let l=await s.doParse(n,t=>{e(w.W.actions.setQuickFileName(t))});"slides"===l.type&&(l.sourceUrl=(null==r?void 0:r.url)||""),n===w.W.selectors.filePreviewerUrl(p.M_.getState())&&e(w.W.actions.setPreviewData(l)),e(w.W.actions.setLoading(!1)),"code"===l.type&&(null==r?void 0:null===(a=r.fileMetaData)||void 0===a?void 0:a.tag)==="pasted_content"&&m.$.updateUserPastedContent(r.fileMetaData.fileId,{content:l.content,lastContent:l.content})}),i=(0,a.w)(async e=>x.K.selectors.sessionFileList(p.M_.getState()).find(t=>g.C.getSessionFileSandboxPath(t)===e)),y=(0,a.w)(async t=>{let{sandboxPath:a,url:n,id:l,fileName:o}=t,c=f.uT.selectors.currentSessionid(p.M_.getState()),m=await i(a);if(!c||!m||m.isSynced)return;let x=w.W.selectors.previewFile(p.M_.getState());(null==x?void 0:x.id)===l&&e(w.W.actions.setSyncingFile(!0));let h=n;try{if(h.startsWith("blob")){let e=await fetch(n),t=await e.blob(),i=new File([t],o);h=await b({sandboxPath:a,file:i,sessionUid:c})}h.startsWith("http")&&await d.F.SessionService.syncSessionFile({file:{sandboxPath:a,fileUrl:h,fileStage:u.p2.PRODUCT,fileType:u.HJ.FILE,fileEditor:u.sB.AI,sessionUid:c,eventId:m.chatLocationEventId}})}catch(e){(0,r.oR)({title:s.P.formatErrorToString(e),variant:"error"})}e(w.W.actions.setSyncingFile(!1)),I(a,{url:h,isSynced:!0})}),b=(0,a.w)(async e=>{let{sandboxPath:t,file:i,sessionUid:a}=e,{uploadUrl:r,cdnUrl:s}=await d.F.SessionService.getSessionFileUploadUrl({sessionUid:a,sandboxPath:t});return await n.C.uploadFileToS3(r,i),s}),C=(0,a.w)(async t=>{let i=f.uT.selectors.currentSessionid(p.M_.getState()),a=w.W.selectors.previewFile(p.M_.getState()),n=null==a?void 0:a.sandboxPath;if(i&&n){e(w.W.actions.setSaveStatus("saving"));try{let r=await b({sandboxPath:a.sandboxPath,file:t,sessionUid:i});await d.F.SessionService.updateSessionFile({sandboxPath:a.sandboxPath,fileUrl:r,sessionUid:i}),e(w.W.actions.setSaveStatus("saved"));let s=v.u.filePreviewSessionFile(p.M_.getState());if(s){let e=g.C.getSessionFileSandboxPath(s);I(e,{url:r,lastUpdatedAt:Date.now()})}j(a.sandboxPath,{fileUrl:r,lastUpdatedAt:Date.now()}),"slides"===a.filetype&&e(w.W.actions.updateSlidesPreviewData({sourceUrl:r}))}catch(t){(0,r.oR)({title:s.P.formatErrorToString(t),variant:"error"}),e(w.W.actions.setSaveStatus("error"))}}}),S=(0,a.w)(i=>{if(!i){e(w.W.actions.resetState()),e(w.W.actions.setPreviewData(null)),e(w.W.actions.setPreviewFile(null));return}let a={...i},r=x.K.selectors.notificationSessionFileList(p.M_.getState()).find(e=>e.sandboxPath===(null==i?void 0:i.sandboxPath));r&&(a.url=r.fileUrl,a.previewUrl=i.previewUrl.replace(i.url,r.fileUrl),a.sandboxPath=r.sandboxPath),e(w.W.actions.resetState()),e(w.W.actions.setPreviewFile(a)),t()}),j=(0,a.w)((t,i)=>{let a=x.K.selectors.notificationSessionFileList(p.M_.getState()).find(e=>e.sandboxPath===t);a&&e(x.K.actions.addNotificationSessionFile([{...a,...i}]))}),I=(0,a.w)(async(t,i)=>{let{url:a,isSynced:r,shareId:s,lastUpdatedAt:n}=i,l=x.K.selectors.sessionFileList(p.M_.getState()).find(e=>g.C.getSessionFileSandboxPath(e)===t),o=w.W.selectors.previewFile(p.M_.getState());if(!l){let r="shareId"in i;if((null==o?void 0:o.sandboxPath)===t&&(e(w.W.actions.setPreviewFile({...o,url:null!=a?a:o.url,sandboxPath:t,previewUrl:o.previewUrl.replace(o.url,null!=a?a:o.url),shareId:r?s:o.shareId})),r)){let i=x.K.selectors.notificationSessionFileList(p.M_.getState()).find(e=>e.sandboxPath===t);!l&&i&&e(x.K.actions.addNotificationSessionFile([{...i,shareId:s}]))}return}let c={...l};if(r&&(c.isSynced=r),"shareId"in i&&(c.shareId=s),n&&(c.lastUpdatedAt=n),a){let e={...c.raw[0]};"tool_call_text_edit_file"!==e.type||e.url?"tool_call_img_view_file"===e.type?e.imageUrl=a:"tool_call_video_generate_file"===e.type?e.videoUrl=a:"tool_call_speech_generate_file"===e.type?e.audioUrl=a:e.url=a:e.url=a,c.raw=[e]}e(x.K.actions.updateSessionFile(c));let d=g.C.convertSessionFileToPreviewFile(c);(null==o?void 0:o.sandboxPath)===(null==d?void 0:d.sandboxPath)&&e(w.W.actions.setPreviewFile(d))}),N=(0,a.w)(async t=>{let i=[],a=w.W.selectors.previewFile(p.M_.getState()),r=f.uT.selectors.currentSessionid(p.M_.getState());for(let s of t.files)if(s.sessionUid===r){if(i.push(s),(null==a?void 0:a.sandboxPath)===s.sandboxPath){e(w.W.actions.setPreviewFile({...a,sandboxPath:s.sandboxPath,url:s.fileUrl,previewUrl:a.previewUrl.replace(a.url,s.fileUrl)}));let t=w.W.selectors.previewData(p.M_.getState());a.url!==s.fileUrl&&((null==t?void 0:t.type)==="markdown"&&s.fileType===u.HJ.FILE&&k(s),(null==t?void 0:t.type)==="slides"&&s.fileType===u.HJ.SLIDE&&_({file:s}))}I(s.sandboxPath,{url:s.fileUrl})}e(x.K.actions.addNotificationSessionFile(i))}),k=(0,a.w)(async t=>{e(w.W.actions.updateMarkdownPreviewData({reloading:!0}));try{let i=new c.l,a=await i.doParse(t.fileUrl,t=>{e(w.W.actions.setQuickFileName(t))});if("markdown"===a.type){e(w.W.actions.updateMarkdownPreviewData({content:a.content}));let t=w.W.selectors.previewFile(p.M_.getState());t&&e(w.W.actions.setPreviewFile({...t,lastUpdatedAt:Date.now()}))}}catch(e){(0,r.oR)({title:s.P.formatErrorToString(e),variant:"error"})}e(w.W.actions.updateMarkdownPreviewData({reloading:!1}))}),_=(0,a.w)(async t=>{let{file:i}=t;try{let t=new c.l,a=await t.doParse(i.fileUrl+"#filename=".concat(i.sandboxPath,".slides"),t=>{e(w.W.actions.setQuickFileName(t))});if("slides"===a.type){e(w.W.actions.updateSlidesPreviewData({content:{...a,files:a.files.map(e=>({...e,isStreaming:!1,lastModified:Date.now()}))}}));let t=w.W.selectors.previewFile(p.M_.getState());t&&e(w.W.actions.setPreviewFile({...t,lastUpdatedAt:Date.now()}))}}catch(e){(0,r.oR)({title:s.P.formatErrorToString(e),variant:"error"})}}),T=(0,a.w)(e=>e===u.my.HTML_TO_PDF?".pdf":e===u.my.HTML_TO_PPT?".pptx":""),P=(0,a.w)(async(e,t)=>{var i,a,r;let{taskUid:s,status:n}=await d.F.SessionPublicService.createSessionFileConvertTask(e);if(null==t?void 0:null===(i=t.signal)||void 0===i?void 0:i.aborted)return"";for((n==u.wA.PENDING||n===u.wA.CONVERTING)&&await (0,l.uk)(300);!(null==t?void 0:null===(a=t.signal)||void 0===a?void 0:a.aborted);){let i=await d.F.SessionPublicService.loopSessionFileConvertTask({taskUid:s});if(i.status===u.wA.SUCCESS)return(null==t?void 0:null===(r=t.signal)||void 0===r?void 0:r.aborted)||null==t||!t.autoDownload||h.$.downloadFileWithALink(i.toUrl,e.fileName),i.toUrl;if(i.status===u.wA.FAILED)throw Error(i.statusError);await (0,l.uk)(1e3*i.nextIntervalSeconds)}return""});return{parseCurrentPreviewerFile:t,handleSessionFileSave:C,setPreviewFile:S,updateSessionFile:I,onSessionFileChange:N,convertCurrentPreviewerFileAndDownload:(0,a.w)(async(e,t)=>{let i,{signal:a}=t,r=w.W.selectors.previewFile(p.M_.getState()),s=w.W.selectors.previewData(p.M_.getState());if(!r||"slides"!==r.filetype||(null==s?void 0:s.type)!=="slides")return"";let n=r.displayFilename,l=s.currentSlideId;return l&&!s.slideIds.includes(l)&&s.files.some(e=>e.id===l)&&(i=[l]),await P({fromUrl:r.url,convertType:e,fileName:n,pageIds:i},{autoDownload:!0,signal:a})}),getExtnameByConvertType:T,simpleConvertCurrentPreviewerFileTo:P,fetchCurrentFileHistory:(0,a.w)(async t=>{let{disabledErrorToast:i}=t,a=w.W.selectors.previewFile(p.M_.getState()),n=f.uT.selectors.currentSessionid(p.M_.getState());if(!a||!n)return;let l=a.sandboxPath;try{let t=await d.F.SessionService.listSessionFileVersions({sandboxPath:l,sessionUid:n,index:0,limit:999});e(w.W.actions.setFileHistory([t.current,...t.versions].flatMap(e=>e?[e]:[])))}catch(e){i||(0,r.oR)({title:s.P.formatErrorToString(e),variant:"error"})}}),syncFile:y,updateNotificationSessionFile:j}}},60498:(e,t,i)=>{"use strict";i.d(t,{Yz:()=>p,hN:()=>m});var a=i(75958),r=i(93347),s=i(9205),n=i(59496),l=i(88359),o=i(25850),c=i(5591),d=i(91452),u=i(4331);let p=(0,o.tu)();function m(){let e=(0,d.jL)(),t=(0,d.GV)(u.y.selectors.notificationTab),i=(0,a.w)(async()=>{try{if(await o(void 0,void 0,!0),u.y.selectors.isNotificationListVisible(d.M_.getState())){let t=u.y.selectors.notificationList(d.M_.getState())[0];t&&(l._.setItem("latestNotificationId",t.uid),e(u.y.actions.setHasNew(!1)))}}catch(e){}p.markReady()}),o=(0,a.w)(async function(i,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,o=null!=a?a:t;e(u.y.actions.setFetchNotificationListLoading(!0));try{var c,d;let t=await r.F.NotificationService.getNotificationListV2({latestUid:i,limit:10,notificationCategory:o}),a=t.data||[],n=a.length>=10;if(e(u.y.actions.setHasMoreNotification({category:o,hasMore:n})),s&&a.length>0){let i=null===(c=t.data[0])||void 0===c?void 0:c.uid,a=l._.getItem("latestNotificationId");i!==a&&e(u.y.actions.setHasNew(!0))}i?e(u.y.actions.setCategoryNotificationList({category:o,notifications:a,append:!0})):(e(u.y.actions.setCategoryNotificationList({category:o,notifications:a})),(null===(d=a[0])||void 0===d?void 0:d.uid)&&l._.setItem("latestNotificationId",a[0].uid))}catch(e){console.error("Failed to fetch notification list:",e)}finally{n&&n(),e(u.y.actions.setFetchNotificationListLoading(!1))}}),m=(0,a.w)(async()=>{try{let i=await r.F.NotificationService.getNotificationListV2({limit:1,notificationCategory:c.aF.CATEGORY_ALL});if(i.data&&i.data.length>0){let a=i.data[0],r=l._.getItem("latestNotificationId");if(a&&a.uid!==r)return e(u.y.actions.setHasNew(!0)),u.y.selectors.isNotificationListVisible(d.M_.getState())&&(await o(void 0,t),l._.setItem("latestNotificationId",a.uid),e(u.y.actions.setHasNew(!1))),!0}return!1}catch(e){return console.error("Failed to check for new notifications:",e),!1}});return{initNotification:i,fetchNotificationList:o,updateInteraction:(0,a.w)(async(t,i)=>{try{e(u.y.actions.updateNotificationItemInteraction({templateId:t,emojiKey:i})),await r.F.NotificationService.updateInteraction({templateUid:t,interactionKey:i})}catch(a){e(u.y.actions.updateNotificationItemInteraction({templateId:t,emojiKey:i})),(0,s.oR)({title:n.P.formatErrorToString(a),variant:"error"})}}),checkAndRefreshNotifications:m,fetchUpdatePageNotifications:(0,a.w)(async t=>{try{t&&e(u.y.actions.setUpdatePageLoading(!0));let i=(await r.F.NotificationPublicService.getPublicUpdateNotifications({latestUid:t,limit:10})).data||[],a=i.length>=10;e(u.y.actions.setUpdatePageHasMore(a)),t?e(u.y.actions.setUpdatePageNotificationList({notifications:i,append:!0})):e(u.y.actions.setUpdatePageNotificationList({notifications:i}))}catch(e){console.error("Failed to fetch update page notifications:",e)}finally{e(u.y.actions.setUpdatePageLoading(!1))}})}}},99209:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(19208),r=i(29),s=i(25087);let n={isOwner:!1,isReadyOnly:!0,isCollaborator:!1,permission:"readyOnly"},l={selectSessionPermission:(0,a.Mz)([e=>e.auth.userInfo,e=>e.sessions.sessions,e=>e.sessions.isSearchMode,(e,t)=>t],(e,t,i,a)=>{if(i)return n;let l=null==e?void 0:e.userId;if(!l||!a)return n;let o=s.LE.getSelectors().selectById(t,a);if(!o)return n;let c=o.collaborators.find(e=>e.userId===l);return c?{isOwner:c.isOwner,isReadyOnly:c.permission===r.O.CollaboratorPermission.READ_ONLY,isCollaborator:c.permission===r.O.CollaboratorPermission.READ_WRITE&&!c.isOwner,permission:c.isOwner?"owner":c.permission===r.O.CollaboratorPermission.READ_WRITE?"canCollaborate":"readyOnly"}:n}),selectCurrentSessionPermission:(0,a.Mz)([e=>e.auth.userInfo,e=>e.sessions.sessions,e=>e.sessions.isShareMode,e=>e.sessions.currentSessionId],(e,t,i,a)=>{if(i)return n;let l=null==e?void 0:e.userId;if(!l||!a)return n;let o=s.LE.getSelectors().selectById(t,a);if(!o)return n;let c=o.collaborators.find(e=>e.userId===l);return c?{isOwner:c.isOwner,isReadyOnly:c.permission===r.O.CollaboratorPermission.READ_ONLY,isCollaborator:c.permission===r.O.CollaboratorPermission.READ_WRITE&&!c.isOwner,permission:c.isOwner?"owner":c.permission===r.O.CollaboratorPermission.READ_WRITE?"canCollaborate":"readyOnly"}:n})}},81705:(e,t,i)=>{"use strict";i.d(t,{u:()=>p});var a=i(18214),r=i(64752),s=i(75234),n=i(19208),l=i(29298),o=i(57107),c=i(2054),d=i(61207);class u{constructor(){this.experimentSlidesTemplate=(0,n.Mz)(e=>e.chat.slideTemplateList,o.s.selectors.getSlidesExperiment,(e,t)=>(null==e?void 0:e.length)?(null==t?void 0:t.value)==="new_template"?e.map(e=>e.uid.startsWith("onyx_")?{...e,uid:"onyx_b7de4231-e4f7-4cd8-9efd-d2a99db8b303"}:e.uid.startsWith("basalt_")?{...e,uid:"basalt_39dbdd57-8c75-4d57-b5a9-14eef002c179"}:e.uid.startsWith("ginkgo_")?{...e,uid:"ginkgo_eaab688c-a079-47d1-894e-2a1b8472cbaf"}:e):e:[]),this.currentSlideTemplate=(0,n.Mz)(this.experimentSlidesTemplate,e=>e.chat.chatExtData,(e,t)=>{let i=(null==t?void 0:t.from)==="slide-template"?t.slideTemplateId:null;if(i){let t=null==e?void 0:e.find(e=>e.uid===i);return null!=t?t:null}return null}),this.sessionGroupedFiles=(0,n.Mz)(e=>e.fileManagement.sessionFileList,e=>e.fileManagement.fileTab,(e,t)=>{let i={today:[],yesterday:[],earlier:[]};e.flatMap(e=>{if("code"===t){if("code"===e.category)return[e]}else if("image"===t){if("image"===e.category)return[e]}else if("document"===t){if("document"===e.category)return[e]}else if("link"===t){if("link"===e.category)return[e]}else if("all"===t)return[e];return[]}).forEach(e=>{let t=new Date(e.lastUpdatedAt);a.F.isToday(t)?i.today.push(e):a.F.isYesterday(t)?i.yesterday.push(e):i.earlier.push(e)}),Object.values(i).forEach(e=>{e.sort((e,t)=>t.lastUpdatedAt-e.lastUpdatedAt)});let r=i.today.length+i.yesterday.length+i.earlier.length;return{groups:i,length:r}}),this.filePreviewSessionFile=(0,n.Mz)(e=>e.filePreviewer.previewFile,e=>e.fileManagement.sessionFileList,(e,t)=>t.find(t=>c.C.getSessionFileId(t)===(null==e?void 0:e.id))),this.shouldShowFileHistory=(0,n.Mz)(d.W.selectors.mode,d.W.selectors.isEditableFile,e=>e.agentWorkspace.fileHistoryVisible,e=>e.agentWorkspace.isSidebarFullscreen,(e,t,i,a)=>"code"!==e&&t&&i&&a),this.isTeamExpired=(0,n.Mz)(e=>e.team.currentTeam,e=>e.auth.userInfo,(e,t)=>{if(e){if(e.type===s.YV.EDU)return e.status===r.WJ.EDU_EXPIRED;if(e.type===s.YV.NORMAL&&(null==t?void 0:t.membershipVersion)===l.b.Free)return!0}return!1}),this.downloadableFiles=(0,n.Mz)(this.sessionGroupedFiles,e=>{let t={today:[...e.groups.today],yesterday:[...e.groups.yesterday],earlier:[...e.groups.earlier]};t.today=t.today.filter(e=>"link"!==e.category),t.yesterday=t.yesterday.filter(e=>"link"!==e.category),t.earlier=t.earlier.filter(e=>"link"!==e.category);let i=t.today.length+t.yesterday.length+t.earlier.length;return{groups:t,length:i}})}}let p=new u},29:(e,t,i)=>{"use strict";var a;i.d(t,{O:()=>a}),function(e){var t;(t=e.CollaboratorPermission||(e.CollaboratorPermission={}))[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.READ_ONLY=1]="READ_ONLY",t[t.READ_WRITE=2]="READ_WRITE"}(a||(a={}))},76951:(e,t,i)=>{"use strict";i.d(t,{t:()=>K});var a=i(90293),r=i(51416),s=i(75958),n=i(9205),l=i(18214),o=i(59496),c=i(35874),d=i(88359),u=i(29),p=function(e){return e[e.OWNER=20]="OWNER",e}(p||{});class m{getCollaboratorsInSession(e){return this.getCollaboratorsInStorage().flatMap(t=>{let{sessions:i,...a}=t,r=i.find(t=>t.id===e);if(r){let e=20===r.permission;return[{...a,isOwner:e,permission:20===r.permission?u.O.CollaboratorPermission.READ_WRITE:r.permission}]}return[]})}deleteCollaboratorFromSession(e,t){let i=this.getCollaboratorsInStorage(),a=i.find(e=>e.userId===t||e.email===t);a&&(a.sessions=a.sessions.filter(t=>t.id!==e),0===a.sessions.length&&i.splice(i.indexOf(a),1)),d._.setItem("collaborators",i)}addCollaboratorToSession(e,t){let i=this.getCollaboratorsInStorage(),a=i.find(e=>e.userId===t.userId||e.email===t.email);a?a.sessions.push({id:e,permission:t.permission}):i.push({...t,sessions:[{id:e,permission:t.permission}]}),d._.setItem("collaborators",i)}updateCollaboratorSessionPermission(e,t,i){let a=this.getCollaboratorsInStorage().map(a=>a.userId===t||a.email===t?{...a,sessions:a.sessions.map(t=>t.id===e?{id:e,permission:i}:t)}:a);d._.setItem("collaborators",a)}updateCollaborators(e,t){let i=this.getCollaboratorsInStorage().flatMap(t=>(t.sessions=t.sessions.filter(t=>{let{id:i}=t;return e!==i}),0===t.sessions.length)?[]:[t]);d._.setItem("collaborators",i),t.forEach(t=>{this.addCollaboratorToSession(e,t)})}sessionDeleted(e){let t=this.getCollaboratorsInStorage().flatMap(t=>(t.sessions=t.sessions.filter(t=>{let{id:i}=t;return e!==i}),0===t.sessions.length)?[]:[t]);d._.setItem("collaborators",t)}getCollaboratorsInStorage(){let e=d._.getItem("collaborators");return null!=e?e:[]}}let x=new m;var h=i(93347);async function v(e,t){let i=async()=>{let{collaborators:i}=await h.F.SessionCollaborateService.listCollaborators({sessionUid:e});return x.updateCollaborators(e,i),t(i),i},a=x.getCollaboratorsInSession(e);return(null==a?void 0:a.length)>0?(i(),a):await i()}var f=i(34424),g=i(92816),w=i(91452),y=i(25087),b=i(59260),C=i(78085),S=i(25850),j=i(5591),I=i(76656),N=i(64752),k=i(57271),_=i(99515),T=i(23693),P=i(47488),L=i(34137),E=i(3843),M=i(34778),A=i(40757),R=i(27846),F=i(92749),D=i(67887),U=i(4094),V=i(4331),O=i(99209),z=i(72551),B=i(89432),W=i(48550);function K(){let{messageSentToSocket:e}=(0,W.x)(),t=(0,r.s)(a.p),i=(0,w.jL)(),{closeSidebar:d}=(0,M.e)(),u=(0,_.useRef)(null),{getSpaceStatus:p,getShareSpaceStatus:m,updateSpaceEditCode:K,initSessionFiles:G}=(0,U.rN)(),{checkShouldAutoPreviewFile:H}=(0,E.r)(),Y=(0,s.w)(async e=>{let{sessionId:t,title:a}=e;i(y.uT.actions.setSessionTitle({sessionId:t,title:a})),await h.F.SessionService.updateSession({sessionUid:t,title:a})}),Z=(0,s.w)(function(e){let{sessionId:i,title:a}=e;t.open({title:k.I.t("Edit title"),type:"input",inputInitialValue:a,inputProps:{maxLength:120},description:k.I.t("Please enter a new title"),onConfirm:async e=>{try{if(b.y.chatOperation.sessionRename({sessionId:i}),!e)return!0;return await Y({sessionId:i,title:e}),!0}catch(e){return(0,n.oR)({title:o.P.formatErrorToString(e),variant:"error"}),!1}}})}),$=(0,s.w)(async function(e){let{isFavorite:t,sessionId:a}=e;i(y.uT.actions.toggleSessionFavorite({isFavorite:!t,uid:a}));let r=t?h.F.SessionService.unFavoriteSession:h.F.SessionService.favoriteSession;await r({sessionUid:a})}),q=(0,s.w)(function(e){let{sessionId:t}=e,a=y.uT.selectors.sessions(w.M_.getState()),r=a.findIndex(e=>e.uid===t),s=a[r];if(t===w.M_.getState().sessions.currentSessionId&&(Q(),window.history.replaceState({},"",C.bw.app.root())),!s)return;let n=O.Z.selectSessionPermission(w.M_.getState(),t),l=null==n?void 0:n.isOwner;i(y.uT.actions.deleteSessions({sessionId:t})),l?i(T.R.endpoints.deleteSession.initiate({sessionId:t})).then(e=>{var a;e.error||(null===(a=e.data)||void 0===a?void 0:a.ok)!=="yes"?s&&i(y.uT.actions.upsertSession(s)):(g.xA.removeId(t),x.sessionDeleted(t))}):((0,b.C)({eventName:"collaborate_leave_task_click"}),h.F.SessionCollaborateService.exitCollaboration({sessionUid:t}).then(()=>{g.xA.removeId(t),x.sessionDeleted(t)}).catch(()=>{s&&i(y.uT.actions.upsertSession(s))}))}),J=(0,s.w)(function(e){let{sessionId:t}=e;i(y.uT.actions.clearUnreadMessageCount(t)),h.F.SessionService.updateReadPosition({sessionUid:t,lastReadAt:l.F.dateToProtoTimestamp(new Date)}),i(y.uT.actions.setUnreadMessageIndex(null))}),Q=(0,s.w)(function(){let t=w.M_.getState().sessions.currentSessionId;t&&e("leave_session",{sessionId:t}),i(y.uT.actions.setCurrentSessionId(null)),i(B.M.actions.clearEvents()),i(y.uT.actions.setLoadSessionLoading(!1)),i(F.V.actions.setCreateMode(null)),i(F.V.actions.setChatExtData(null)),i(F.V.actions.setSendQuestionBehavior(null)),d({lock:!0}),i(F.V.actions.filesCleared()),i(F.V.actions.setInputValue("")),i(y.uT.actions.setIsSharePopoverVisible(!1)),i(F.V.actions.setShowSharePopover(!1)),i(L.V.actions.setIsSidebarVisibleInMobile(!1)),i(B.M.actions.setIsVNCConnected(null)),i(F.V.actions.setFileSuggestions([]))}),X=(0,s.w)(async function(t){var a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0,n=null===(a=null==s?void 0:s.autoScrollToBottom)||void 0===a||a,l=w.M_.getState().sessions.currentSessionId;if(w.M_.getState().notification.isNotificationListVisible&&(i(V.y.actions.setIsNotificationListVisible(!1)),i(V.y.actions.setNotificationTab(j.aF.CATEGORY_ALL))),l===t)return;let o=!1;try{Q(),i(y.uT.actions.setLoadSessionLoading(!0)),i(y.uT.actions.setCurrentSessionId(t)),J({sessionId:t}),p(),G({sessionId:t}),await ei({sessionId:t,autoScrollToBottom:n});let a=!!B.M.selectors.selectLastFrontendEventId(w.M_.getState());K(),i(F.V.actions.setChatMode(B.M.selectors.defaultTaskMode(w.M_.getState())));let r=null;try{r=await (0,f.w)(g.xA.getLastEventId(t))}catch(e){console.error("getLastEventId error",e)}await e("join_session",{sessionId:t,lastMessageId:r||(a?"new_session":void 0)})}catch(e){console.error("load session item error",e),o=!0}let c=w.M_.getState().sessions.currentSessionId;c&&t!==c||(er(r),i(y.uT.actions.setLoadSessionLoading(!1)),!o&&n&&P.T.emit("scrollToBottom",{clearLock:!0,allowSources:["chat"]}))}),ee=(0,s.w)(async(e,t)=>{var a;i(y.uT.actions.setCurrentSessionId(e)),m(e);let[r,{collaborators:s}]=await Promise.all([ea({sessionId:e,shared:!0,sig:t}),h.F.SessionCollaboratePublicService.listPublicCollaborators({sessionUid:e})]),n=s.map(t=>({...t,email:t.userId+"@mail.com",permission:0,$typeName:"session.v1.Collaborator",isTeamMember:!1,sessionUid:e})),l={uid:r.id,isFavorite:!1,isShared:!0,icon:(null===(a=r.iconInfo)||void 0===a?void 0:a.url)||"",agentTaskMode:r.agentTaskMode,lastDisplayMessage:"",status:0,title:r.title,unreadMessageCount:0,userId:"",$typeName:"session.v1.AgentSession",feedbackSubmitted:!1,costedCredits:0,publishedToCommunity:!1,collaborators:n,auditStatus:I.EO.PENDING,isBlocked:!1,feedbackEventIds:[]};return i(y.uT.actions.setAllCollaborators(n)),i(y.uT.actions.setSessions([l])),r}),et=(0,s.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Q(),er(e),P.T.emit("focusPrimaryInput"),i(F.V.actions.setChatMode()),i(D.K.actions.clearSessionFileList()),w.M_.getState().notification.isNotificationListVisible&&(i(V.y.actions.setIsNotificationListVisible(!1)),i(V.y.actions.setNotificationTab(j.aF.CATEGORY_ALL)))}),ei=(0,s.w)(async function(e){let{sessionId:t,autoScrollToBottom:a}=e;try{var r;let e=(0,S.tu)(),s=[],[n,l]=await Promise.all([(0,c.X7)(i,t),v(t,t=>{i(y.uT.actions.setAllCollaborators(t)),s=t,e.markReady()})]);if(i(y.uT.actions.setAllCollaborators(l)),t!==w.M_.getState().sessions.currentSessionId)return;if(i(F.V.actions.setSessionCreationSource(null!==(r=n.creationSource)&&void 0!==r?r:null)),(null==n?void 0:n.events)&&Array.isArray(n.events)){i(B.M.actions.initEvents({sessionId:t,events:n.events})),H();let e=es();l.length>1&&e?(i(y.uT.actions.setUnreadMessageIndex(null==e?void 0:e.index)),setTimeout(()=>{P.T.emit("scrollToEvent",{eventId:e.message.id,behavior:"auto"})},230)):n.events.findLast(e=>"toolUsed"===e.type)&&a&&setTimeout(()=>{P.T.emit("scrollToBottom",{clearLock:!0,allowSources:["chat"]})},230)}h.F.SessionService.getSession({sessionUid:t}).then(e=>{(null==e?void 0:e.session)&&i(y.uT.actions.upsertSession(e.session))}).finally(()=>{i(y.uT.actions.setLoadSessionDetailLoading(!1))}),e.waitReady().then(()=>{let e=y.uT.selectors.selectSessionById(w.M_.getState(),t);e&&i(y.uT.actions.upsertSession({...e,collaborators:s}))}),i(y.uT.actions.setIsSharePopoverVisible(!1))}catch(t){let e=()=>{i(y.uT.actions.setCurrentSessionId(null)),window.history.replaceState({},"",C.bw.app.root())};throw(null==t?void 0:t.status)===403||(null==t?void 0:t.status)===404||(null==t?void 0:t.status)===401?((403===t.status||401===t.status)&&(0,n.oR)({title:k.I.t("This link content is only visible to its creator"),variant:"warning"}),404===t.status&&(0,n.oR)({title:k.I.t("Sorry, the task no longer exists."),variant:"warning"}),e()):(null==t?void 0:t.code)===13&&((0,n.oR)({title:k.I.t("Access denied for this task. Returning to Home."),variant:"warning"}),e()),t}}),ea=(0,s.w)(async e=>{let{sessionId:t,shared:a,sig:r}=e;return await i(T.R.endpoints.getSession.initiate({sessionId:t,type:a?"shared":"private",sig:r},{forceRefetch:!0})).unwrap()}),er=(0,s.w)(function(e){let t=w.M_.getState().sessions.currentSessionId,i="";if(t){let e=y.LE.getSelectors().selectById(w.M_.getState().sessions.sessions,t);e&&(i=e.title)}let a=S.KR;if(i?document.title="".concat(i," - ").concat(a):document.title=a,!e){let e=new URL(window.location.href).searchParams.toString(),i=e?"?".concat(e):"";t?window.history.pushState({},"","".concat(C.bw.app.session(t)).concat(i)):window.history.pushState({},"","".concat(C.bw.app.root()).concat(i))}}),es=(0,s.w)(()=>{let e=w.M_.getState().sessions.currentSessionId;if(!e)return null;let t=null,a=y.LE.getSelectors().selectById(w.M_.getState().sessions.sessions,e),r=B.M.selectors.selectChatBoxRenderEvents(w.M_.getState());if(!(null==a?void 0:a.lastReadAt)||0===r.length)return null;let s=en(r,a.lastReadAt.seconds);return s&&(t=s),i(y.uT.actions.handleSessionLastReadAtEvent({sessionUid:e,lastReadAt:l.F.dateToProtoTimestamp(new Date)})),t}),en=(0,s.w)((e,t)=>{if(!t||0===e.length)return null;for(let i=0;i<e.length;i++){let a=e[i];if((null==a?void 0:a.type)==="chat"&&"assistant"===a.sender&&a.timestamp&&Math.floor(a.timestamp/1e3)>t)return{message:a,index:i}}return null}),el=(0,s.w)(async e=>{let t=await h.F.SessionCollaborateService.removeCollaborator(e);return i(y.uT.actions.removeCollaborate({sessionId:e.sessionUid,user:e.user})),x.deleteCollaboratorFromSession(e.sessionUid,e.user),t}),eo=(0,s.w)(async e=>{let t=await h.F.SessionCollaborateService.inviteCollaborator(e);return t.collaborator&&(i(y.uT.actions.addCollaborate({collaborator:t.collaborator,sessionId:e.sessionUid})),x.addCollaboratorToSession(e.sessionUid,t.collaborator)),t}),ec=(0,s.w)(async e=>{let{permission:t,sessionUid:a,user:r}=e;return i(y.uT.actions.updateCollaboratePermission({permission:t,sessionId:a,user:r})),x.updateCollaboratorSessionPermission(a,r,t),await h.F.SessionCollaborateService.updateCollaboratorPermission(e)}),ed=(0,s.w)(function(e,t){let a="public"===t;(0,b.C)({eventName:"session_share",extData:{sessionId:e,type:"public"===t?"public":"only_me"}}),i(y.uT.actions.shareSession({sessionId:e,isShared:a})),u.current&&u.current.signal.reason&&u.current.abort(),u.current=new AbortController,a?h.F.SessionService.shareSession({sessionUid:e},{signal:u.current.signal}):h.F.SessionService.unshareSession({sessionUid:e},{signal:u.current.signal})}),eu=(0,s.w)(async e=>{R.vw.waitReady().then(()=>{var t;let a=A.R.selectors.userInfo(w.M_.getState()),r=null==a?void 0:null===(t=a.teamInfo)||void 0===t?void 0:t.teamUid;r&&h.F.TeamService.listTeamMember({page:1,pageSize:200,searchKey:"",filterType:N.RJ.ALLUSER}).then(t=>{i(z.u.actions.setTeamMemberList(t.members)),i(y.uT.actions.setAllCollaborators(t.members.flatMap(t=>{var i;let a=null===(i=A.R.selectors.userInfo(w.M_.getState()))||void 0===i?void 0:i.uid;return t.userUid===a?[]:[{$typeName:"session.v1.Collaborator",userId:t.userUid,name:t.name,email:t.email,avatar:t.avatar,isOwner:!1,permission:I.W1.UNSPECIFIED,status:I.vy.UNSPECIFIED,teamId:r,isTeamMember:!0,sessionUid:e.sessionUid||""}]})))})});let{collaborators:t}=await h.F.SessionCollaborateService.listCollaborators(e);i(y.uT.actions.setAllCollaborators(t))}),ep=(0,s.w)(async e=>{try{let t=new URL(e);if(t.pathname.startsWith(C.bw.share.root+"/")&&"invitation"===t.searchParams.get("from")){let e=t.pathname.split("/").pop();if(e)return await h.F.SessionCollaborateService.acceptInvite({sessionUid:e}),!0}return!1}catch(e){return!1}});return{openEditTitleDialog:Z,updateSessionTitle:Y,toggleCollect:$,handleDelete:q,loadSessionItem:X,handleNewSession:et,clearConversation:Q,syncStatusToWindow:er,clearUnreadMessageCount:J,fetchShareSessionEvents:ee,removeCollaborate:el,inviteCollaborate:eo,updateCollaboratePermission:ec,toggleShareStatus:ed,fetchCollaborators:eu,acceptInvitation:ep,getActiveCollaborators:(0,s.w)(e=>e.collaborators.filter(e=>e.status===I.vy.UNSPECIFIED)),handleOpenInNewTab:(0,s.w)(e=>{if(!e)return;let t=window.location.origin,i="".concat(t,"/app/").concat(e);window.open(i,"_blank","noopener,noreferrer")}),updateSessionListByTab:(0,s.w)(async e=>{let t=y.uT.selectors.selectGroupedSessionViewState(w.M_.getState(),e).ids.length;if(0===t)return;let{sessions:a=[]}=await h.F.SessionService.listSessions({isScheduled:"scheduled"===e||void 0,isFavorite:"favorites"===e||void 0,limit:t,offset:0});i(y.uT.actions.updateSessions({sessions:a}))})}}},27810:(e,t,i)=>{"use strict";i.d(t,{d:()=>y});var a=i(2635),r=i(90293),s=i(51416),n=i(75958),l=i(9205),o=i(59496),c=i(21731),d=i(47727),u=i(93347),p=i(78085),m=i(24907),x=i(57271),h=i(5685),v=i(36498),f=i(40757),g=i(81705),w=i(72551);function y(){let e=(0,h.jL)(),t=(0,m.rd)(),i=(0,s.s)(r.p),{open:y}=(0,s.s)(d.Z),b=(0,n.w)(async()=>{let t=null;try{e(w.u.actions.setTeamListLoading(!0));let i=await u.F.TeamService.listTeam({page:1,pageSize:999});t=i,e(w.u.actions.setListTeamResponse(i))}catch(e){console.error(e)}return e(w.u.actions.setTeamListLoading(!1)),t}),C=(0,n.w)(async()=>{if(f.R.selectors.isTeamAccount(h.M_.getState()))try{let t=await u.F.TeamService.getTeamInfo({});e(w.u.actions.setCurrentTeam(t))}catch(e){console.error(e)}}),S=(0,n.w)(e=>{let{name:t,seats:i,autoDeduction:a,singleDeductionAmount:r,monthlyDeductionLimit:s}=e;return u.F.TeamManagementService.createTeam({name:t,seats:i,autoDeduction:a,singleDeductionAmount:r,monthlyDeductionLimit:s})}),j=(0,n.w)(e=>u.F.TeamManagementService.transferTeam({email:e})),I=(0,n.w)((e,t)=>u.F.TeamManagementService.batchRemoveMember({teamUserIds:"string"==typeof e?[e]:e,emails:"string"==typeof t?[t]:t})),N=(0,n.w)((e,t)=>u.F.TeamManagementService.updateMemberRole({teamUserId:e,role:t})),k=(0,n.w)(async t=>{let i=await u.F.TeamManagementService.updateTeamDeductionSetting(t);return e(w.u.actions.updateTeamDeductionSetting(t)),i}),_=(0,n.w)(async e=>{let{page:t,searchKey:i,filterType:a,pageSize:r=20}=e,s=await u.F.TeamService.listTeamMember({page:t,pageSize:r,searchKey:i,filterType:a});return{data:s.members,totalCount:s.totalCount,page:t,pageSize:r}}),T=(0,n.w)(async t=>{await u.F.TeamManagementService.updateTeamInfo({name:t}),e(w.u.actions.updateCurrentTeam({name:t}));let i=w.u.selectors.listTeamResponse(h.M_.getState()),a=w.u.selectors.currentTeamInfo(h.M_.getState());i&&e(w.u.actions.setListTeamResponse({...i,teams:i.teams.map(e=>e.teamUid===(null==a?void 0:a.teamUid)?{...e,name:t}:e)}))}),P=(0,n.w)(async t=>{try{var i;let a=await (0,c.pJ)(t,128),r=await (0,c.zM)(a),s=(null===(i=r.split(";")[1])||void 0===i?void 0:i.replace(/^base64,/,""))||"";await u.F.TeamManagementService.updateTeamInfo({avatar:{fileName:t.name,mimeType:t.type,data:s}}),e(w.u.actions.updateCurrentTeam({avatar:"data:image/png;base64,".concat(s)}));let n=w.u.selectors.listTeamResponse(h.M_.getState()),o=w.u.selectors.currentTeamInfo(h.M_.getState());n&&e(w.u.actions.setListTeamResponse({...n,teams:n.teams.map(e=>e.teamUid===(null==o?void 0:o.teamUid)?{...e,avatar:"data:image/png;base64,".concat(s)}:e)})),(0,l.oR)({title:x.I.t("Update success"),variant:"success"})}catch(e){(0,l.oR)({title:o.P.formatErrorToString(e),variant:"error"})}}),L=(0,n.w)(async()=>{try{e(w.u.actions.setTeamListLoading(!0)),await Promise.all([b(),C()])}catch(e){console.error(e)}finally{e(w.u.actions.setTeamListLoading(!1))}}),E=(0,n.w)(async()=>{let e=w.u.selectors.listTeamResponse(h.M_.getState());if(null==e?void 0:e.userId){let t=await u.F.UserAuthPublicService.switchUser({userId:e.userId});(0,v.W)(t.token),window.location.reload()}else(0,v.W)(""),t.replace(p.bw.login.root)}),M=(0,n.w)(e=>{let{emails:t=[],teamUserIds:r=[],onSuccess:s}=e,n=r.length>0?x.I.t("You're about to remove this member from the team. This action cannot be undone. Do you wish to proceed?"):x.I.t("You're about to make this invitation invalid. This action cannot be undone. Do you wish to proceed?");i.open({className:"w-[400px]",title:x.I.t("Remove confirmation"),variant:"danger",confirmText:x.I.t("Remove"),content:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"mt-[-10px] text-[var(--text-secondary)] text-sm leading-[22px]",children:n})}),enterKeyConfirm:!0,onConfirm:async()=>{try{return await u.F.TeamManagementService.batchRemoveMember({emails:t,teamUserIds:r}),(0,l.oR)({title:x.I.t("Successfully"),variant:"success"}),null==s||s(),!0}catch(e){return(0,l.oR)({title:o.P.formatErrorToString(e),variant:"error"}),!1}}})}),A=(0,n.w)(()=>{i.open({title:x.I.t("Team disbanded"),variant:"alert",content:x.I.t("The owner has disbanded this team. Your access and any shared resources are no longer available. Youll be returned to your personal workspace."),enterKeyConfirm:!0,confirmText:x.I.t("Switch to personal"),onConfirm:async()=>(await E(),!0)})}),R=(0,n.w)(()=>{i.open({title:x.I.t("Removed from team"),variant:"alert",content:x.I.t("You have been removed from the team. If you have any questions, please contact the administrator."),enterKeyConfirm:!0,confirmText:x.I.t("Switch now"),onConfirm:async()=>(await E(),!0)})});return{judgeTeamExpired:(0,n.w)(async e=>{g.u.isTeamExpired(h.M_.getState())?y():null==e||e()}),openTeamHasBeenRemovedDialog:R,openTeamDisbandedDialog:A,openRemoveMemberDialog:M,fetchTeamList:b,initTeam:L,fetchTeamInfo:C,fetchMemberList:_,updateTeamName:T,updateTeamAvatar:P,createTeam:S,transferTeam:j,updateMemberRole:N,removeMember:I,updateTeamDeductionSetting:k,switchToPersonal:E}}},89432:(e,t,i)=>{"use strict";i.d(t,{M:()=>a.M,r:()=>a.r});var a=i(23232)},48550:(e,t,i)=>{"use strict";i.d(t,{x:()=>k});var a=i(75958),r=i(12766),s=i(35874),n=i(25850),l=i(91452),o=i(18704),c=i(25087),d=i(44238),u=i(51416),p=i(16834),m=i(18341),x=i(59260),h=i(47727),v=i(93347),f=i(57271),g=i(47488),w=i(3843),y=i(92749),b=i(87963),C=i(81705),S=i(23232);let j=new Map,I=(0,n.vd)(),N=null;function k(){let e=(0,l.jL)(),{handleMessage:t}=function(){let e=(0,l.jL)(),{open:t}=(0,u.s)(h.Z),{autoPreviewByEvent:i}=(0,w.r)(),r=(0,a.w)(t=>{let i=l.M_.getState().sessions.currentSessionId;"event"===t.type&&"statusUpdate"===t.event.type&&d(t),t.sessionId===i&&(e(S.M.actions.received(t)),"session_joined"===t.type?k(t):"agent_error"===t.type?N(t):"session_left"===t.type?_(t):"event"===t.type&&s(t),g.T.emit("scrollToBottom",{clearLock:!1}))}),s=(0,a.w)(t=>{"toolUsed"===t.event.type?o(t):"statusUpdate"===t.event.type?I(t):"eventsNotifyEventsAfter"===t.event.type?(e(S.M.actions.missingEventsReceived({events:t.event.events,afterId:t.event.eventId})),e(y.V.actions.setChatMode(S.M.selectors.defaultTaskMode(l.M_.getState())))):"newPlanStep"===t.event.type?n(t):"chat"===t.event.type?T(t):"explanation"===t.event.type&&P(t),i(t.event)}),n=(0,a.w)(e=>{if("newPlanStep"!==e.event.type)return}),o=(0,a.w)(e=>{if("toolUsed"===e.event.type&&"suggestion"===e.event.tool){var t,i;let a=e.event.detail;(null==a?void 0:null===(i=a.suggestion)||void 0===i?void 0:null===(t=i.commands)||void 0===t?void 0:t.length)&&a.suggestion.commands.forEach(e=>{(0,x.C)({eventName:"task_suggestion_show",extData:{type:e.commandType}})})}}),d=(0,a.w)(e=>{if("statusUpdate"!==e.event.type)return;let t=()=>{window.open(location.origin+"/app/".concat(e.sessionId))},i=y.V.selectors.isPageVisible(l.M_.getState()),a=e.sessionId===l.M_.getState().sessions.currentSessionId;"waiting"!==e.event.agentStatus||i&&a?"stopped"===e.event.agentStatus?S.M.selectors.isDiscussMode(l.M_.getState())||m.i.show({title:f.I.t("Task Completed"),body:f.I.t("Finished at {date}",{date:new Date().toLocaleTimeString()}),onClick:e=>{t()}}):"error"===e.event.agentStatus&&m.i.show({title:f.I.t("Task Failed"),body:f.I.t("Error:")+e.event.brief,onClick:()=>{t()}}):m.i.show({title:f.I.t("Action Required"),body:f.I.t("Waiting for user input"),onClick:e=>{t()}})}),I=(0,a.w)(t=>{"statusUpdate"===t.event.type&&("stopped"!==t.event.agentStatus||S.M.selectors.isDiscussMode(l.M_.getState())||localStorage.getItem(p.d5.showedSharePopover)||(localStorage.setItem(p.d5.showedSharePopover,"true"),e(y.V.actions.setShowSharePopover(!0))),"running"!==t.event.agentStatus&&v.F.SessionService.getSession({sessionUid:t.sessionId}).then(t=>{t.session&&e(c.uT.actions.upsertSession(t.session))}))}),N=(0,a.w)(e=>{}),k=(0,a.w)(e=>{}),_=(0,a.w)(e=>{}),T=(0,a.w)(i=>{let a=i.event;if("chat"===a.type&&("user"===a.sender&&a.taskMode&&e(y.V.actions.setChatMode(a.taskMode)),"assistant"===a.sender&&"discuss"!==a.taskMode&&void 0===l.M_.getState().configs.firstMessageTipsShowedV2&&e(b.e.actions.setFirstMessageTipsShowed(!1)),"assistant"===a.sender)){switch(a.errorType){case"team_member_removed":g.T.emit("permissionDenied",{code:p.mF.USER_REMOVED_FROM_TEAM});return;case"team_expired_for_owner":case"team_expired_for_member":case"team_owner_quota_exceeded":case"team_member_quota_exceeded":C.u.isTeamExpired(l.M_.getState())&&t()}"browser"===a.suggestUserTakeover&&(0,x.C)({eventName:"suggest_user_takeover_show",extData:{sessionId:l.M_.getState().sessions.currentSessionId}})}}),P=(0,a.w)(t=>{if("explanation"!==t.event.type)return;let i=t.event.id;if(j.get(i))return;let a=setTimeout(()=>{let t=l.M_.getState().websocket.entities[i];(null==t?void 0:t.type)==="event"&&"explanation"===t.event.type&&"streaming"===t.event.status&&e(S.M.actions.updateExplanationEventStatus({eventId:i,status:"end"})),j.delete(i)},3e3);j.set(i,a)});return{handleMessage:r}}(),i=(0,a.w)(async()=>{if(N)return;let i=r.a.chatWebsocketUrl;(N=new o.C).init(i);let a=()=>{let e=c.uT.selectors.currentSessionid(l.M_.getState());if(e){let t=d.Z.getSelectors().selectAll(l.M_.getState().websocket).findLast(t=>t.sessionId===e&&"pending"!==t.messageStatus);P("join_session",{sessionId:e,lastMessageId:null==t?void 0:t.id})}};N.on("disconnect",t=>{e(S.M.actions.disconnected({error:Error(t)}))}),N.on("reconnect",()=>{I=(0,n.vd)(),e(S.M.actions.connected()),a()}),N.on("error",t=>{e(S.M.actions.errored(t.message))}),N.on("message",e=>{"event"===e.type&&s.Om.receiveNewEvent(e.sessionId,I,e.event),t(e)});let u=N;return new Promise((t,i)=>{u.on("connect",()=>{e(S.M.actions.connected()),a(),t(null)}),u.on("connect_error",t=>{e(S.M.actions.disconnected({error:t})),i(t)})})}),k=(0,a.w)(()=>{N&&(N.destroy(),N=null)}),_=(0,a.w)(e=>"refund_quota"===e?"quotaRefunded":"new_session_with_context"===e?"contextTransferStart":"start_sandbox"===e?["sandboxUpdate","sandboxLimitReached"]:"retry_upload"===e?"userRetryUploadResult":"stop_session"===e?"userStop":"user_message"===e?"chat":"change_task_mode"===e?"taskModeChanged":"insufficient_feature_quota_action"===e?"insufficientFeatureQuotaAction":"switch_deploy_version"===e?"deploySwitchVersionResult":null),T=(0,a.w)(async(e,t)=>{var i;if(!N)throw Error("Send message fail: WebSocket is not connected");if(await N.waitInitialized(),await N.waitConnected(),null==t?void 0:null===(i=t.signal)||void 0===i?void 0:i.aborted)throw Error("aborted");let a=N;return new Promise(t=>{"join_session"===e.type&&s.Om.joinNewSession(e.sessionId,I),"user_message"===e.type&&s.Om.startNewSession(e.sessionId,I,e.id);let i=_(e.type),r=i?Array.isArray(i)?i:[i]:[];if(r.length>0){let i=e=>{let s=l.M_.getState().sessions.currentSessionId;"event"===e.type&&s===e.sessionId&&r.includes(e.event.type)&&(a.off("message",i),t(e.event))};a.on("message",i),a.emit("message",{...e})}else a.emit("message",{...e}),t("ok")})}),P=(0,a.w)((e,t,i)=>T({id:(0,n.vd)(),timestamp:Date.now(),...t,type:e},i));return{connected:i,disconnected:k,messageSentToSocket:P,restartReconnection:()=>{N&&N.restartReconnection()}}}},88293:(e,t,i)=>{"use strict";i.d(t,{S:()=>l});var a=i(62121),r=i(16834),s=i(34952);class n{get themeConfig(){if(a.G.isRunInServerSide)return;let e=localStorage.getItem(r.d5.themeConfig);if(e)switch(e){case"light":return"light";case"dark":return"dark"}else{var t;let e=(0,s.S)(),i=null==e?void 0:null===(t=e.configs)||void 0===t?void 0:t.theme;if(i)return localStorage.setItem(r.d5.themeConfig,i),i}return"system"}setConfig(e){return localStorage.setItem(r.d5.themeConfig,e),"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}}let l=new n},7863:(e,t,i)=>{"use strict";i.d(t,{B:()=>c,C:()=>p});var a=i(9205),r=i(93347),s=i(25850),n=i(22952),l=i(57271),o=i(21731),c=function(e){return e.PENDING="pending",e.QUEUED="queued",e.UPLOADING="uploading",e.COMPLETED="completed",e.ERROR="error",e.CANCELLED="cancelled",e}({});let d=new Map;class u{async batchSign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{module:i=n.Nr.SESSION_FEEDBACK}=t;return(await r.F.FileService.batchSignUrl({urls:e.map(e=>({filename:e.name,module:i}))})).signUrlList}async upload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onProgress:i,module:a=n.Nr.SESSION_FEEDBACK}=t,l=e.signal;if(l&&l.aborted)return{...e,status:"cancelled"};let o=e.preSignUrl,c=e.cdnUrl;if(!o||!c){let t=await r.F.FileService.signUrl({filename:e.file.name,module:a});o=t.preSignUrl,c=t.cdnUrl}return await new Promise((t,a)=>{let r=new XMLHttpRequest;l&&(l.aborted&&a(new DOMException("Upload aborted","AbortError")),l.addEventListener("abort",()=>{r.abort(),a(new DOMException("Upload aborted","AbortError"))})),r.upload.addEventListener("progress",e=>{e.lengthComputable&&i&&i(Math.round(e.loaded/e.total*100))}),r.addEventListener("load",()=>{200===r.status?t():a(Error("Upload failed with status ".concat(r.status)))}),r.addEventListener("error",()=>{a(Error("Upload failed"))}),r.open("PUT",o),r.setRequestHeader("Content-Type",e.file.type);let n=(0,s.$j)(e.file.name);n&&r.setRequestHeader("Content-Disposition",n),r.send(e.file)}),{...e,cdnUrl:c,process:100,status:"completed"}}transFile(e,t){let i="temp-".concat((0,s.vd)()),a=URL.createObjectURL(e),r=new AbortController;return d.set(i,r),{...e,id:i,file:e,localUrl:a,module:t,signal:r.signal,status:"pending"}}async selectFiles(e){let t=[];if(0===(t=(null==e?void 0:e.files)?e.files:await new Promise(t=>{(0,o.nU)(async e=>{t(e)},{accept:null==e?void 0:e.accept,multiple:null==e?void 0:e.multiple})})).length)return[];let i=this.validateFiles(t,e);return 0===i.length?[]:i.map(this.transFile)}validateFiles(e,t){var i,r,s;let n=null!==(i=null==t?void 0:t.maxFiles)&&void 0!==i?i:10,o=null!==(r=null==t?void 0:t.maxSizeInMB)&&void 0!==r?r:10,c=null!==(s=null==t?void 0:t.accept)&&void 0!==s?s:[],d=1048576*o,u=e;return c&&c.length>0&&(u=e.filter(e=>{let t=e.type,i=c.some(e=>{if(e.endsWith("/*")){let i=e.split("/")[0];return t.startsWith("".concat(i,"/"))}return t===e});return i||(0,a.oR)({variant:"warning",title:l.I.t("File type not accepted: {name}",{name:e.name})}),i})),(u=u.filter(e=>!(e.size>d)||((0,a.oR)({variant:"warning",title:l.I.t("File {name} exceeds maximum size of {maxSizeInMB}MB",{name:e.name,maxSizeInMB:o})}),!1))).length>n&&((0,a.oR)({variant:"warning",title:l.I.t("Maximum {maxFiles} files allowed. Selected first {maxFiles} files.",{maxFiles:n})}),u=u.slice(0,n)),u}async preProcessFile(e,t){if(this.isImageFile(e.file)){let i=null!=t?t:{maxWidth:2048,maxHeight:2048,format:"image/webp",quality:.75};e.file=await (0,o.pJ)(e.file,i.maxWidth,i.format,i.quality)}return e}async uploadFile(e,t){var i,a,r;let s="id"in e?e:this.transFile(e);if("status"in e&&("cancelled"===e.status||"error"===e.status))return e;let o=s;try{o=await this.preProcessFile(s)}catch(e){}try{if(!(o={...o,status:"uploading"}).cdnUrl){let e=await this.batchSign([o.file]);if(!e||0===e.length)throw Error(l.I.t("Failed to get upload URL"));o={...o,...e[0]}}let e=await this.upload(o,{onProgress:e=>{var i;null==t||null===(i=t.onStatusChange)||void 0===i||i.call(t,"uploading",{...o,progress:e})},module:null!==(a=o.module)&&void 0!==a?a:n.Nr.SESSION_FEEDBACK});return d.delete(o.id),null==t||null===(i=t.onStatusChange)||void 0===i||i.call(t,e.status,e),e}catch(s){let e="error",i=l.I.t("Unknown error");s instanceof DOMException&&"AbortError"===s.name?(e="cancelled",i=l.I.t("Upload cancelled")):s instanceof Error&&(i=s.message);let a={...o,status:e,error:i};return null==t||null===(r=t.onStatusChange)||void 0===r||r.call(t,e,a),d.delete(a.id),a}}async uploadFiles(e,t,i){var r;let s=null!==(r=null==i?void 0:i.maxFiles)&&void 0!==r?r:10,n=[],o=e.map(e=>"id"in e?e:this.transFile(e));o.length>s&&((0,a.oR)({variant:"warning",title:l.I.t("Maximum {maxFiles} files allowed. Processing first {maxFiles} files.",{maxFiles:s})}),o.splice(s));let c=await this.batchSign(o.map(e=>e.file));if(!c||0===c.length)throw Error(l.I.t("Failed to get upload URL"));let d=o.map((e,t)=>{var i,a;return{...e,preSignUrl:null===(i=c[t])||void 0===i?void 0:i.preSignUrl,cdnUrl:null===(a=c[t])||void 0===a?void 0:a.cdnUrl,status:"pending"}}),u=new Set,p=0,m=async()=>{if(0===d.length||u.size>=4)return;let e=d.shift();if(e){u.add(e.id);try{let i=await this.uploadFile(e,{onStatusChange(e,i){var a;null==t||null===(a=t.onStatusChange)||void 0===a||a.call(t,e,i)}});n.push(i)}catch(e){}u.delete(e.id),p++,await m()}},x=[];for(let e=0;e<Math.min(4,o.length);e++)x.push(m());return await Promise.all(x),new Promise(e=>{p===o.length&&e(n)})}cancelUpload(e){let t=d.get(e);return!!t&&(t.abort(),d.delete(e),!0)}retryUpload(e){return this.uploadFile(e.file)}cancelAllUploads(){d.forEach(e=>{e.abort()}),d.clear()}async uploadFileToS3(e,t,i){let{signal:a,onProgress:r}=null!=i?i:{};await new Promise((i,n)=>{let l=new XMLHttpRequest;a&&(a.aborted&&n(new DOMException("Upload aborted","AbortError")),a.addEventListener("abort",()=>{l.abort(),n(new DOMException("Upload aborted","AbortError"))})),l.upload.addEventListener("progress",e=>{e.lengthComputable&&r&&r(Math.round(e.loaded/e.total*100))}),l.addEventListener("load",()=>{200===l.status?i():n(Error("Upload failed with status ".concat(l.status)))}),l.addEventListener("error",()=>{n(Error("Upload failed"))}),l.open("PUT",e),l.setRequestHeader("Content-Type",t.type);let o=(0,s.$j)(t.name);o&&l.setRequestHeader("Content-Disposition",o),l.send(t)})}isImageFile(e){return e.type.startsWith("image/")}}let p=new u},85380:(e,t,i)=>{"use strict";i.d(t,{pi:()=>c,tp:()=>o,xf:()=>s});var a=i(57271),r=i(59260);function s(e){return/^([a-zA-Z0-9_.-]+)@([a-zA-Z0-9.-]+)\.([a-zA-Z.]{2,12})$/.test(e)}function n(e){return/^[a-zA-Z0-9!"#$%&',()*+-./\\:;<=>?@[\]^_{}|`~]+$/.test(e)}function l(e){return!!(/[a-zA-Z]+/.test(e)&&/\d+/.test(e)&&/[!"#$%&',()*+-./\\:;<=>?@[\]^_{}|`~]+/.test(e))}function o(e){return/^[0-9]{0,14}$/.test(e)}function c(e){return[{required:!0,message:a.I.t("Please input")},{validator:n,message:a.I.t("Please use only letters (a-z and A-Z), numbers (0-9), and special characters like !@#$%^&*.()")},{validator:l,message:a.I.t("Please choose a strong password. Try a mix of letters, numbers, and symbols")},{validator:t=>((0,r.C)({eventName:"password_length_validator_failed",source:e}),t.length>=12),message:a.I.t("Your password must be at least 12 characters long")}]}},16577:(e,t,i)=>{"use strict";i.d(t,{V:()=>d,z:()=>p});var a=i(98637),r=i(75958),s=i(16834),n=i(71348),l=i(91452),o=i(92749),c=i(47488);let d="DRAFT_TASK_SESSION_ID";class u{static generateDraft(e,t){return{...t,sessionId:null!=e?e:d,createdAt:Date.now()}}static storeDraft(e){let t=JSON.stringify(this.formatDraftListOnStore(e));localStorage.setItem(s.d5.inputBoxDraftList,t)}static readDraftBySessionIdList(){let e=localStorage.getItem(s.d5.inputBoxDraftList);return e?JSON.parse(e):[]}static readDraftBySessionId(e){let t=null!=e?e:d;return this.readDraftBySessionIdList().find(e=>e.sessionId===t)||null}static formatDraftListOnStore(e){return e.map(e=>{var t,i;return{...e,content:{...e.content,files:null===(i=e.content)||void 0===i?void 0:null===(t=i.files)||void 0===t?void 0:t.map(e=>{var t,i,a;return{...e,fileObject:{name:null===(t=e.fileObject)||void 0===t?void 0:t.name,size:null===(i=e.fileObject)||void 0===i?void 0:i.size,type:null===(a=e.fileObject)||void 0===a?void 0:a.type},previewUrl:void 0}})}}})}}function p(){let e=(0,l.jL)(),t=(0,r.w)(e=>{let t=null!=e?e:d,i=u.readDraftBySessionIdList().filter(e=>e.sessionId!==t);u.storeDraft(i)}),i=(0,a.x)((0,r.w)(e=>{let i=u.readDraftBySessionId(null!=e?e:d),a=l.M_.getState().chat.inputValue;"markdown"===o.V.selectors.inputMode(l.M_.getState())&&(a=n.f.parseHtml(a));let r=l.M_.getState().chat.files,s=i&&!a.length&&!r.length;if((i||s)&&t(i.sessionId),s)return null;let c=u.readDraftBySessionIdList(),p=null,m={content:{text:a,files:r}};p=i?{...i,...m,createdAt:Date.now()}:u.generateDraft(e,m),c.push(p);let x=c.length;return x>=5&&c.splice(0,x-5),u.storeDraft(c),p}),300),s=(0,r.w)((e,i)=>{let a=u.readDraftBySessionId(e),r=i.text,s=i.inputMode,n=!(null==r?void 0:r.length);if(a&&t(a.sessionId),n)return null;let l=u.readDraftBySessionIdList(),o=null,c={content:{text:r,inputMode:s,files:i.files}};o=a?{...a,...c,createdAt:Date.now()}:u.generateDraft(e,c),l.push(o);let d=l.length;return d>=5&&l.splice(0,d-5),u.storeDraft(l),o});return{loadDraft:(0,r.w)(t=>{var i,a,r;let s=u.readDraftBySessionId(t);if(!s)return;let d=null!==(i=s.content.files)&&void 0!==i?i:[],p=null!==(a=s.content.text)&&void 0!==a?a:"";if("markdown"===(null!==(r=s.content.inputMode)&&void 0!==r?r:"text")){let t=n.f.preprocessBracketContent(p);e(o.V.actions.setInputMode("markdown")),e(o.V.actions.setInputValue(t)),c.T.emit("markdownInputAutoFocus",{});return}e(o.V.actions.setInputValue(p)),l.M_.getState().chat.files.length||d.forEach(t=>e(o.V.actions.fileAdded(t)))}),saveDraft:i,saveDraftManually:s,removeDraft:t,clearDraft:(0,r.w)(()=>{u.storeDraft([])})}}},18620:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var a=i(2635),r=i(76743),s=i(33890);function n(e){return(0,a.jsx)(s.l,{title:e.title,onDisposed:e.onDisposed,width:400,headerClassName:"px-[20px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px]",children:[(0,a.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-tertiary)]",children:e.text}),(0,a.jsx)("div",{className:"mt-[28px] flex items-center justify-end gap-[12px]",children:(0,a.jsx)(r.A,{variant:"default",color:"black",onClick:e.onDisposed,children:e.btnText})})]})})}},74905:(e,t,i)=>{"use strict";i.d(t,{b:()=>b});var a=i(2635),r=i(76743),s=i(33890),n=i(53708),l=i(51416),o=i(75958);function c(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",width:i,height:i,color:t,...r,children:(0,a.jsx)("path",{d:"M42.2197 28.0645C42.2197 26.543 42.2054 25.5473 42.1025 24.8027C42.006 24.1045 41.8583 23.849 41.7354 23.7051C41.5872 23.5316 41.2605 23.2705 40.3799 22.9336C39.9846 22.7824 39.5196 22.6332 38.9678 22.4727V41.1973H42.2197V28.0645ZM24.001 6.80469C24.0434 6.80469 23.9994 6.78132 23.7236 6.91992C23.4048 7.08023 22.9967 7.33699 22.2803 7.79688L22.2822 7.79883L16.8838 11.2676C15.6878 12.0365 14.9083 12.5408 14.3389 12.9883C13.8025 13.4098 13.5738 13.69 13.4326 13.9492L13.4307 13.9531C13.2889 14.2126 13.1766 14.5562 13.1123 15.2344C13.0439 15.9556 13.042 16.8848 13.042 18.3066V41.1973H21.9971V32.8301C21.9971 31.7234 22.8943 30.8263 24.001 30.8262C25.1077 30.8262 26.0049 31.7233 26.0049 32.8301V41.1973H34.96V18.3066C34.96 16.8848 34.958 15.9556 34.8896 15.2344C34.8253 14.5561 34.7131 14.2126 34.5713 13.9531L34.5693 13.9492C34.4281 13.6901 34.1993 13.4097 33.6631 12.9883C33.3784 12.7646 33.0416 12.5261 32.626 12.248L31.1182 11.2676L25.7217 7.79883V7.79688C25.0053 7.33788 24.5975 7.08023 24.2783 6.91992C24.0024 6.78141 23.9589 6.80463 24.001 6.80469ZM24.0244 17.8633L24.2295 17.873C25.24 17.9757 26.0283 18.8296 26.0283 19.8672C26.0281 20.9046 25.2399 21.7587 24.2295 21.8613L24.0244 21.8711H24.001C22.8944 21.871 21.9973 20.9737 21.9971 19.8672C21.9971 18.7605 22.8943 17.8634 24.001 17.8633H24.0244ZM5.78223 41.1973H9.03418V22.4727C8.48245 22.6332 8.01733 22.7824 7.62207 22.9336C6.74298 23.27 6.41705 23.5317 6.26855 23.7051C6.14558 23.849 5.99596 24.1045 5.89941 24.8027C5.79651 25.5473 5.78223 26.5431 5.78223 28.0645V41.1973ZM46.2275 43.2012C46.2273 44.3078 45.3303 45.2051 44.2236 45.2051C44.1355 45.2051 44.049 45.1966 43.9639 45.1855C43.8794 45.1964 43.7935 45.2051 43.7061 45.2051H4.2959C4.20842 45.205 4.1226 45.1965 4.03809 45.1855C3.95295 45.1966 3.86646 45.2051 3.77832 45.2051C2.67167 45.2051 1.77462 44.3078 1.77441 43.2012V28.0645C1.77441 26.6168 1.7806 25.3255 1.92871 24.2539C2.08329 23.1359 2.41631 22.0444 3.21973 21.1035C3.99843 20.1919 5.04428 19.6279 6.19043 19.1895C6.98667 18.8848 7.93522 18.6064 9.03418 18.3145V18.3066C9.03418 16.9599 9.03174 15.8109 9.12207 14.8574C9.21648 13.8616 9.42182 12.9312 9.91504 12.0293C10.4063 11.1286 11.0768 10.4552 11.8623 9.83789C12.6154 9.24602 13.582 8.62548 14.7158 7.89648H14.7178L20.1143 4.42773L20.1162 4.42578L21.0557 3.83203C21.3583 3.64649 21.6491 3.47644 21.9248 3.33789C22.5194 3.03913 23.1967 2.79691 24.001 2.79688C24.8054 2.79688 25.4827 3.03938 26.0771 3.33789C26.3529 3.47639 26.6452 3.64451 26.9482 3.83008L27.8877 4.42578L27.8896 4.42773L33.2861 7.89648L34.8564 8.91797C35.334 9.23793 35.7631 9.542 36.1396 9.83789C36.9252 10.4552 37.5956 11.1287 38.0869 12.0293L38.2588 12.3691C38.6298 13.1649 38.7973 13.9861 38.8799 14.8574C38.9702 15.8109 38.9678 16.9599 38.9678 18.3066V18.3145C40.0667 18.6064 41.0153 18.8849 41.8115 19.1895C42.9577 19.6279 44.0035 20.1919 44.7822 21.1035C45.5857 22.0444 45.9187 23.1359 46.0732 24.2539C46.2214 25.3255 46.2275 26.6168 46.2275 28.0645V43.2012Z",fill:"currentColor"})})}c._id="898fcc239509d3788b13065bd7befb36";var d=i(91452),u=i(40757),p=i(27846),m=i(17923),x=i(18184),h=i(72551),v=i(54914),f=i(25850),g=i(57271),w=i(68209),y=i(99515);function b(e){let{onDisposed:t}=e,[i,b]=(0,y.useState)(!1),{open:C}=(0,l.s)(v.v),{switchAccount:S}=(0,p.As)(),j=(0,d.GV)(m.M.selectors.planList),I=(0,n.W)(()=>j.flatMap(e=>e.plan===x.OL.FREE||e.plan===x.OL.TEAM?[]:[e])),N=(0,o.w)(async()=>{let e=h.u.selectors.listTeamResponse(d.M_.getState()),i=null==e?void 0:e.userId;if(!i)return;b(!0),await S(i),b(!1);let a=u.R.selectors.userInfo(d.M_.getState());(null==a?void 0:a.userId)===i&&(C(),t())});return(0,a.jsxs)(s.l,{onDisposed:t,width:500,headerClassName:"p-0",className:"bg-[var(--background-gray-main)] flex flex-col px-[24px] pt-[32px] pb-[16px] rounded-[20px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center w-full",children:[(0,a.jsx)(c,{size:48,color:"var(--icon-primary)"}),(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-center text-[28px] leading-[34px] font-serif",children:g.I.t("Enjoy more benefits")}),(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-center text-sm leading-[22px]",children:g.I.t("School pass starts summer break on August 1st, your conversations are securely saved in your campus account. Switch to your personal account to access {product} and enjoy limited benefits.",{product:f.KR})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-[8px] mt-[24px] p-[16px] rounded-[12px] border border-[var(--border-light)] bg-[var(--fill-tsp-white-light)]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-[16px] leading-[22px] text-[var(--text-primary)] font-semibold tracking-[-0.304px]",children:g.I.t("Double credits on all plans")}),(0,a.jsx)("div",{className:"bg-[var(--fill-tsp-gray-main)] border border-[var(--icon-disable)] rounded-[99px] px-2 py-1 h-[18px] flex items-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-[11px] leading-[16px] text-[var(--text-primary)] font-semibold uppercase",children:g.I.t("Limited offer")})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-[4px]",children:I.map(e=>(0,a.jsx)("div",{className:"text-[14px] leading-[22px] text-[var(--text-primary)] tracking-[-0.154px]",children:(0,a.jsx)(w.p,{S:g.I.t("{planName} plan: +{credits} additional credits monthly"),data:{planName:e.planName,credits:(0,f.Ql)(e.credits)},components:{}})},e.plan))}),(0,a.jsx)("div",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)] tracking-[-0.154px] mt-[8px]",children:(0,a.jsx)(w.p,{S:g.I.t("Subscribe now and receive <b>2X</b> <span>credits every month!</span>"),components:{b:e=>(0,a.jsx)("b",{className:"font-[700] text-[var(--text-primary)]",children:e}),span:e=>(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:e})}})})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-[16px] mt-[32px] w-full",children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"medium",className:"flex-1",onClick:()=>{t()},children:g.I.t("Got it")}),(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",loading:i,className:"flex-1 clickable",onClick:N,children:g.I.t("Switch now")})]})]})}},40123:(e,t,i)=>{"use strict";i.d(t,{Y:()=>s});var a=i(13435),r=i(25850);class s{async loadFile(){var e;this.response=await fetch(this.url),(null===(e=this.options)||void 0===e?void 0:e.previewType)||(this.previewType=null,this.detectPreviewType(),"code"===this.previewType&&this.detectCodeLanguage())}getFileName(){let e=new URL(this.url||""),t="";return t||function(){let i=e.hash.split("#").pop()||"";i&&i.startsWith("filename=")&&(t=decodeURIComponent(i.split("=")[1]||""))}(),t||(t=this.checkFilenameInContentDisposition(e.searchParams.get("response-content-disposition")||"")||""),t||(t=decodeURIComponent(e.pathname.split("/").pop()||"untitled")),t.split(/\/|\\/).pop()||t}getFileExt(){let e=this.getFileName();return(0,r.vE)(e)||""}createCommonPreviewData(){var e,t,i;let a=null===(e=this.response)||void 0===e?void 0:e.headers.get("content-length"),r=a?parseInt(a,10):void 0,s=null!==(i=null===(t=this.response)||void 0===t?void 0:t.headers.get("last-modified"))&&void 0!==i?i:0;return{originalFilename:this.getFileName(),originalFileUrl:this.url||void 0,size:r,lastModified:new Date(s)}}detectPreviewType(){this.detectPreviewTypeByFilename(),this.previewType||this.detectPreviewTypeByExtension(),this.previewType||this.detectPreviewTypeByContentType()}detectPreviewTypeByFilename(){let e=this.getFileName();e&&(this.previewType=a.e.detectFileTypeByFilename(e))}detectPreviewTypeByContentType(){if(!this.response)return;let e=this.response.headers.get("content-type");e&&(this.previewType=a.e.detectFileTypeByContentType(e))}detectPreviewTypeByExtension(){if(!this.url)return;let e=this.getFileExt();e&&(this.previewType=a.e.detectFileTypeByExtension(e))}detectCodeLanguage(){this.detectCodeLanguageByExtension(),this.codeLanguage||this.detectCodeLanguageByContentType()}detectCodeLanguageByContentType(){if(!this.response)return;let e=this.response.headers.get("content-type");e&&(e.includes("application/json")?this.codeLanguage="json":e.includes("text/javascript")||e.includes("application/javascript")?this.codeLanguage="javascript":e.includes("text/typescript")?this.codeLanguage="typescript":e.includes("text/css")&&(this.codeLanguage="css"))}detectCodeLanguageByExtension(){if(!this.url)return;let e=this.getFileExt();e&&(this.codeLanguage=({ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",java:"java",go:"go",rb:"ruby",php:"php",css:"css",json:"json",rs:"rust",cs:"csharp",xml:"xml",yaml:"yaml",yml:"yaml",sql:"sql",sh:"bash",bash:"bash",cpp:"cpp",c:"c",kt:"kotlin",swift:"swift",dart:"dart",scala:"scala",dockerfile:"dockerfile",graphql:"graphql",vue:"vue",scss:"scss",less:"less",txt:"plaintext"})[e]||"plaintext")}checkFilenameInContentDisposition(e){if(e)for(let t of e.split(";")){let e=t.trim();if(e.startsWith("filename*=UTF-8"))return decodeURIComponent(e.split("''")[1]||"");if(e.startsWith("filename="))return decodeURIComponent(e.slice(9).replace(/"/g,""))}}constructor(e,t){this.url=e,this.options=t,this.previewType=null,this.codeLanguage=null,this.response=null,(null==t?void 0:t.previewType)?this.previewType=t.previewType:this.detectPreviewType()}}},1954:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});var a=i(21731);class r{async parse(e){if(!(0,a.Fr)()){let t=e.url;if(t.startsWith("blob:")){let e=await fetch(t),i=await e.json();return{...i,slideIds:i.slideIds||[],lastModified:new Date,type:"slides"}}}if(await e.loadFile(),!e.response)throw Error("No response available in loader");if(!e.response.ok)throw Error("Failed to fetch file");try{let t=await e.response;if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let i=await t.json(),a=e.getFileName().replace(/\.slides$/,"");return{...i,slideIds:i.slide_ids,lastModified:new Date(t.headers.get("Last-Modified")||""),type:"slides",currentSlideId:a}}catch(e){throw console.error("Error parsing binary file:",e),Error("Failed to parse binary file")}}}},40451:(e,t,i)=>{"use strict";i.d(t,{l:()=>d});var a=i(59260),r=i(25850),s=i(40123),n=i(21731);class l{async parse(e){if(!(0,n.Fr)()){let t=e.url;try{if(t.startsWith("blob:"))return{type:"pdf",url:t,originalFilename:e.getFileName(),originalFileUrl:t};let i=await fetch(t,{method:"HEAD"}),a=i.headers.get("content-type"),r=i.headers.get("content-disposition");if(a&&a.includes("application/pdf")&&(null==r?void 0:r.startsWith("inline;")))return{type:"pdf",url:t,originalFilename:e.getFileName(),originalFileUrl:t}}catch(e){console.error("Error checking PDF file type:",e)}}if(await e.loadFile(),!e.response)throw Error("No response available in loader");if(!e.response.ok)throw Error("Failed to fetch file");try{let t=await e.response.arrayBuffer(),i=e.createCommonPreviewData(),a=new File([t],i.originalFilename,{type:"application/pdf"});if("pdf"!==e.previewType)throw Error("Unsupported preview type: ".concat(e.previewType));return{...i,type:"pdf",pdfFile:a}}catch(e){throw console.error("Error parsing binary file:",e),Error("Failed to parse binary file")}}}var o=i(1954),c=i(30482);class d{async doParse(e,t){let i=await this._doParse(e,t);return(0,a.C)({eventName:"file_preview_parse",extData:{type:i.type}}),i}async _doParse(e,t){let a=new s.Y(e);t(a.getFileName());let n={...a.createCommonPreviewData(),type:"unsupported"},d={...a.createCommonPreviewData(),type:"networkError"};if(!a.previewType)return n;try{switch(a.previewType){case"slides":try{let e=new o.V;return await e.parse(a)}catch(e){return console.error("Error parsing slides:",e),d}case"pdf":{let e=new l;return await e.parse(a)}case"table":{let{TablePreviewerParser:e}=await i.e(45646).then(i.bind(i,45646)),t=new e;return await t.parse(a)}case"code":case"html":case"markdown":{let e=new c.C;return await e.parse(a)}case"image":return{...a.createCommonPreviewData(),type:"image",url:a.url||""};case"svg":return{...a.createCommonPreviewData(),type:"svg",url:a.url||""};case"video":{let{playable:t}=await (0,r.CN)(e);if(t)return{...a.createCommonPreviewData(),type:"video",url:a.url||""};break}case"audio":{let{playable:t}=await (0,r.z9)(e);if(t)return{...a.createCommonPreviewData(),type:"audio",url:a.url||""};break}case"space":return{...a.createCommonPreviewData(),type:"space",url:a.url};case"unsupported":break;default:{let e=a.previewType;console.error("Unhandled preview type: ".concat(e))}}return n}catch(e){return console.error("Error parsing file:",e),n}}}},30482:(e,t,i)=>{"use strict";i.d(t,{C:()=>a});class a{async parse(e){if(await e.loadFile(),!e.response)throw Error("No response available in loader");try{let t=await e.response.text(),i=e.createCommonPreviewData();switch(i.source=t,e.previewType){case"code":return{...i,type:"code",lang:e.codeLanguage||"plaintext",content:t};case"html":return{...i,type:"html",content:t};case"markdown":return{...i,type:"markdown",content:t};default:return{...i,type:"code",lang:"plaintext",content:t}}}catch(e){throw console.error("Error parsing text file:",e),Error("Failed to parse text file")}}}},47078:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i(2635),r=i(21731);let s=(0,i(69039).default)(()=>Promise.all([i.e(6624),i.e(62692),i.e(6406)]).then(i.bind(i,6406)),{loadableGenerated:{webpack:()=>[6406]},ssr:!1}),n=function(e){let{data:t,onClick:i}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex-1 min-h-0 flex items-center justify-center p-5 md:p-10"),onClick:i,children:(0,a.jsx)("div",{className:(0,r.cn)("rounded-xl bg-[var(--background-menu-white)] w-full"),style:{"--plyr-audio-controls-background":"transparent","--plyr-audio-control-color":"var(--icon-primary)","--plyr-audio-control-color-hover":"var(--icon-primary)","--plyr-audio-control-background-hover":"var(--fill-tsp-gray-main)","--plyr-range-fill-background":"var(--text-primary)"},children:(0,a.jsx)(s,{source:{sources:[{src:t.url}],type:"audio"},preload:"metadata",options:{settings:[]}})})})}},2495:(e,t,i)=>{"use strict";i.d(t,{A:()=>v});var a=i(2635),r=i(78308),s=i(75958),n=i(4094),l=i(21731),o=i(57271),c=i(56632),d=i(66343),u=i(50806),p=i(99515),m=i(47078),x=i(33145);let h=["image","svg"],v=function(e){let{className:t,data:i,videoAutoPlay:v,mediaClassName:f}=e,g=(0,p.useRef)(null),[w,y]=(0,p.useState)(1),[b,C]=(0,p.useState)(!1),[S,j]=(0,p.useState)({x:0,y:0}),I=(0,p.useRef)({x:0,y:0}),{handleImageActionDownload:N}=(0,n.rN)(),k=(0,p.useCallback)(()=>{y(e=>Math.min(e+.25,3))},[]),_=(0,p.useCallback)(()=>{y(e=>Math.max(e-.25,.25))},[]);(0,p.useEffect)(()=>{let e=g.current;if(!e)return;let t=e=>{e.preventDefault();let t=1===e.deltaMode?.05:.002,i=-e.deltaY*t;y(e=>Math.max(.25,Math.min(3,e+i)))};return e.addEventListener("wheel",t,{passive:!1}),()=>e.removeEventListener("wheel",t)},[]);let T=e=>{h.includes(i.type)&&(e.target.releasePointerCapture(e.pointerId),C(!1))},P=e=>{e.preventDefault()},L=(0,s.w)(()=>{N({type:"image",url:i.url,originalFilename:i.originalFilename})}),E={transform:"translate(".concat(S.x,"px, ").concat(S.y,"px) scale(").concat(w,")"),cursor:b?"grabbing":"grab"},M=(0,l.cn)("max-h-full max-w-full touch-none",f);return(0,a.jsxs)("div",{className:(0,l.cn)("relative h-full w-full select-none",t),children:[(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:(0,l.cn)("z-20 absolute top-8 left-1/2 -translate-x-1/2 right-auto bottom-auto flex items-center rounded-lg bg-[#0000001f] px-2 py-1 backdrop-blur-2xl"),children:[h.includes(i.type)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(r.m,{title:o.I.t("Zoom out"),children:(0,a.jsx)("button",{onClick:_,className:"cursor-pointer rounded p-1 hover:bg-[var(--fill-tsp-gray-main)]",children:(0,a.jsx)(c.A,{size:20,className:"text-white"})})}),(0,a.jsxs)("span",{className:"min-w-[40px] text-center text-sm text-white",children:[Math.round(100*w),"%"]}),(0,a.jsx)(r.m,{title:o.I.t("Zoom in"),children:(0,a.jsx)("button",{onClick:k,className:"cursor-pointer rounded p-1 hover:bg-[var(--fill-tsp-gray-main)]",children:(0,a.jsx)(d.A,{size:20,className:"text-white"})})})]}),(0,a.jsx)("span",{className:"w-[1px] h-[16px] bg-[#ffffff33] mx-3"})]}),(0,a.jsx)(r.m,{title:o.I.t("Download"),children:(0,a.jsxs)("button",{onClick:L,className:"flex justify-center items-center gap-1.5 cursor-pointer rounded p-1 pl-2 hover:bg-[var(--fill-tsp-gray-main)]",children:[(0,a.jsx)(u.A,{size:20,className:"text-white"}),(0,a.jsx)("span",{className:"text-sm text-white",children:o.I.t("Download")})]})})]}),(0,a.jsx)("div",{ref:g,className:"flex h-full w-full items-center justify-center overflow-hidden p-4",onPointerDown:e=>{0===e.button&&h.includes(i.type)&&(e.target.setPointerCapture(e.pointerId),C(!0),I.current={x:e.clientX-S.x,y:e.clientY-S.y})},onPointerMove:e=>{b&&h.includes(i.type)&&j({x:e.clientX-I.current.x,y:e.clientY-I.current.y})},onPointerUp:T,onPointerCancel:T,children:(0,a.jsx)(()=>{let{type:e}=i;return"video"===e?(0,a.jsx)(x.default,{className:"w-full h-full",data:{url:i.url,originalFilename:i.originalFilename,type:i.type},options:{controls:["play-large","play","progress","current-time","mute","volume","captions","settings","airplay","fullscreen"],autoplay:v},onClick:e=>{e.stopPropagation()}}):"audio"===e?(0,a.jsx)(m.default,{data:i,onClick:e=>{e.stopPropagation()}}):"image"===e||"svg"===e?(0,a.jsx)("img",{src:i.url,alt:i.originalFilename,className:M,style:E,draggable:!1,onDragStart:P,onClick:e=>{e.stopPropagation()}}):null},{})})]})}},42518:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});class a{sendMessage(e){if(e.to!==this.currentEndpoint){if("content"===e.to){var t;if(!(null===(t=this.iframeElement)||void 0===t?void 0:t.contentWindow))return;this.iframeElement.contentWindow.postMessage(this.packMessage(e),"*")}"container"===e.to&&window.parent.postMessage(this.packMessage(e),"*")}}listenMessage(e){return this.messageQueue.push({type:e.type,callback:e.callback}),()=>{this.messageQueue=this.messageQueue.filter(t=>t.callback!==e.callback)}}updateIframeElement(e){this.iframeElement=e}init(e){this.inited||(this.inited=!0,this.currentEndpoint=e.currentEndpoint,window.addEventListener("message",e=>{let t=e.data;"SpacePreviewerChannel"===t.type&&this.messageQueue.forEach(e=>{e.type===t.payload.type&&t.payload.to===this.currentEndpoint&&e.callback(t.payload.payload)})}))}packMessage(e){return{type:"SpacePreviewerChannel",payload:{...e,from:this.currentEndpoint}}}constructor(){this.iframeElement=null,this.currentEndpoint=null,this.messageQueue=[],this.inited=!1}}let r=new a},33145:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i(2635),r=i(21731);let s=(0,i(69039).default)(()=>Promise.all([i.e(6624),i.e(62692),i.e(6406)]).then(i.bind(i,6406)),{loadableGenerated:{webpack:()=>[6406]},ssr:!1}),n=function(e){let{data:t,className:i,options:n,onClick:l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex-1 min-h-0 flex items-center justify-center p-5 md:p-10",i),onClick:l,children:(0,a.jsxs)("div",{className:(0,r.cn)("w-full overflow-hidden flex-1 min-h-0 flex","max-h-full relative"),style:{"--plyr-video-control-color":"var(--icon-white)","--plyr-range-fill-background":"var(--icon-white)","--plyr-video-control-background-hover":"var(--fill-tsp-gray-main)","--plyr-video-background":"transparent",clipPath:"inset(0 0 0 0 round 12px)"},children:[(0,a.jsx)("div",{className:(0,r.cn)("w-full h-full absolute inset-0 bg-black -z-10"),style:{borderRadius:"12.5px"}}),(0,a.jsx)("style",{children:".plyr__control--overlaid {\n            background:var(--icon-white);\n            color:#34322D;\n            opacity:1;\n          }\n\n          .plyr__control--overlaid:hover {\n            background:var(--icon-white)!important;\n            color:#34322D!important;\n            opacity:0.85;\n          }\n\n          .plyr--video {\n            width:100%;\n          }\n\n          .plyr--audio {\n            width:100%;\n          }\n          "}),(0,a.jsx)(s,{source:{sources:[{src:t.url}],type:t.type},options:{settings:[],...n}})]})})}},69862:(e,t,i)=>{"use strict";i.d(t,{h:()=>g});var a=i(2635),r=i(76743),s=i(88387),n=i(75958),l=i(91452),o=i(40757),c=i(27846),d=i(21731),u=i(78085),p=i(25850),m=i(68720),x=i(57271),h=i(68209),v=i(8398),f=i(99515);function g(e){var t;let{setCookieOptIn:i}=(0,c.As)(),[g,w]=(0,f.useState)(null===(t=e.customized)||void 0===t||t),y=(0,l.GV)(o.R.selectors.cookieOptIn)===m.R2.ACCEPTED,b=(0,n.w)(()=>{w(!0)}),C=(0,n.w)(e=>{i(e?m.R2.ACCEPTED:m.R2.DECLINED)}),S=(0,n.w)(()=>{e.onDisposed(),i(m.R2.ACCEPTED)}),j=(0,n.w)(()=>{e.onDisposed(),i(m.R2.DECLINED)}),I=(0,n.w)(()=>{e.onDisposed(),i(y?m.R2.ACCEPTED:m.R2.DECLINED)});return(0,a.jsxs)("div",{className:(0,d.cn)("fixed bottom-5 end-6 max-w-[400px] rounded-[20px] bg-[var(--background-menu-white)] p-5 shadow-[0px_4px_11px_0px_var(--shadow-S)] border border-[var(--border-main)] flex flex-col gap-3"),children:[!e.hideCloseButton&&(0,a.jsx)("button",{className:"absolute top-3 right-3 w-6 h-6 flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--text-primary)] clickable",onClick:e.onDisposed,children:(0,a.jsx)(v.A,{size:14})}),(0,a.jsx)("div",{className:"text-[18px] font-semibold text-[var(--text-primary)] leading-6",children:x.I.t("We use cookies to enhance your user experience.")}),(0,a.jsx)(h.p,{className:"text-sm text-[var(--text-tertiary)] leading-[22px]",S:g?x.I.t("We use cookies to provide {product} core functionality, save your preferences, and improve your browsing experience. You can customize your consent for different types of cookies. Functional cookies cannot be disabled as they are essential for {product}'s functionality. Other cookies will only be used with your consent. For a complete overview of all cookies used, please see our <link>Cookie Policy</link>."):x.I.t("For a complete overview of all cookies used, please see our <link>Cookie Policy</link>."),data:{product:p.KR},components:{link:e=>(0,a.jsx)("a",{className:"underline text-[var(--text-tertiary)] hover:text-[var(--text-primary)] clickable",href:u.bw.cookie.root,target:"_blank",rel:"noreferrer",children:e})}}),g?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"bg-[var(--fill-tsp-white-light)] rounded-xl p-2.5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-primary)] leading-[22px]",children:x.I.t("Functional Cookies")}),(0,a.jsx)("div",{className:"text-xs text-[var(--text-tertiary)] leading-4",children:x.I.t("For security and basic functionality")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-[var(--text-primary)]",children:x.I.t("Required")}),(0,a.jsx)(s.d,{size:"medium",checked:!0,disabled:!0,className:"opacity-40"})]})]})}),(0,a.jsx)("div",{className:"bg-[var(--fill-tsp-white-light)] rounded-xl p-2.5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-primary)] leading-[22px]",children:x.I.t("Analytics Cookies")}),(0,a.jsx)("div",{className:"text-xs text-[var(--text-tertiary)] leading-4",children:x.I.t("For improving site performance")})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(s.d,{size:"medium",checked:y,onCheckedChange:C})})]})}),(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",className:"w-full clickable",onClick:I,children:x.I.t("Save Preference")})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"medium",className:"w-full clickable",onClick:b,children:x.I.t("Customize")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"medium",className:"flex-1 clickable",onClick:j,children:x.I.t("Only essentials")}),(0,a.jsx)(r.A,{variant:"default",color:"black",size:"medium",className:"flex-1 clickable",onClick:S,children:x.I.t("Accept all")})]})]})]})}},44678:(e,t,i)=>{"use strict";i.d(t,{D:()=>u,ThemeProvider:()=>p});var a=i(2635),r=i(75958),s=i(16834),n=i(93847),l=i(88293),o=i(59413),c=i(74958),d=i(99515);let u=(0,d.createContext)({theme:void 0,isDark:!1,setTheme:()=>{}});function p(e){let t=(0,c.usePathname)(),i=(0,n.Ex)(t),p=(0,r.w)(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),m=(0,r.w)(()=>i?"system"===l.S.themeConfig?p():"dark"===l.S.themeConfig?"dark":"light":"light"),[x,h]=(0,d.useState)(e.theme),v=(0,r.w)(e=>{e!==x&&(h(e),"dark"===e?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")))}),f=(0,r.w)(e=>{"system"===l.S.themeConfig?o.A.set(s.eu.theme,p(),{expires:365}):o.A.set(s.eu.theme,e,{expires:365}),v(e)});return(0,d.useEffect)(()=>{i?"system"===l.S.themeConfig?f(p()):f(m()):v("light");let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{i?"system"===l.S.themeConfig&&f(e.matches?"dark":"light"):f(m())};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[i,e.theme]),(0,a.jsx)(u.Provider,{value:{theme:x,isDark:"dark"===x,setTheme:f},children:e.children})}},49167:(e,t,i)=>{"use strict";i.d(t,{ZQ:()=>j,cG:()=>C,eI:()=>S,hv:()=>y});var a=i(2635),r=i(683),s=i(41661),n=i(31867),l=i(46859),o=i(53082),c=i(91452),d=i(40757),u=i(27846),p=i(21731),m=i(81820),x=i(78085),h=i(57271),v=i(29244),f=i(69039),g=i(99515);let w=(0,f.default)(()=>i.e(81170).then(i.bind(i,81170)),{loadableGenerated:{webpack:()=>[81170]},loading:()=>null});function y(e){let{contentClassName:t,title:i,animation:r,children:s,description:c,hideLogo:d,termsAndPrivacy:u=!0,allowLogout:m}=e,{isDark:f}=(0,n.D)();return(0,a.jsxs)("div",{className:(0,v.A)("w-full min-h-[100vh] relative","bg-[var(--background-gray-main)] dark:bg-[#050505]"),children:[r&&(0,a.jsx)(w,{dark:f}),(0,a.jsx)("div",{className:"sticky top-0 left-0 w-full z-[10] px-[48px] max-sm:px-[12px] max-sm:bg-[var(--background-gray-login)]",children:(0,a.jsxs)("div",{className:(0,v.A)("w-full  h-[60px] mx-auto flex items-center justify-between","text-[var(--text-primary)]"),children:[(0,a.jsx)("a",{href:(0,x.Vs)(x.bw.homepage.root),children:(0,a.jsx)(o.U,{})}),m&&(0,a.jsx)(b,{})]})}),(0,a.jsxs)("div",{className:(0,p.cn)("relative z-[1] flex flex-col justify-center items-center min-h-[100vh] pt-[20px] pb-[60px] -mt-[60px]","max-sm:pt-[80px] max-sm:pb-[80px] max-sm:mt-0 max-sm:min-h-[calc(100vh-60px)] max-sm:justify-start",t),children:[(0,a.jsx)("div",{className:(0,p.cn)("w-full max-w-[720px] pt-[24px] mb-[40px]","max-sm:pt-[0px]"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-[20px] relative",style:{zIndex:"1"},children:[!d&&(0,a.jsx)("div",{className:(0,p.cn)("w-[80px] h-[80px] text-[var(--icon-primary)]","max-sm:w-[64px] max-sm:h-[64px]"),children:(0,a.jsx)(l.f,{size:"100%"})}),(0,a.jsx)("h1",{className:(0,p.cn)("text-[20px] font-bold text-center text-[var(--text-primary)]","max-sm:text-[18px]"),children:i}),c&&(0,a.jsx)("h2",{className:(0,p.cn)("max-w-[384px] text-center text-[var(--text-tertiary)] text-sm mt-[-12px]"),children:c})]})}),(0,a.jsx)("div",{className:(0,p.cn)("w-full max-w-[384px] py-[24px] pt-0 px-[12px] relative"),style:{zIndex:"1"},children:(0,a.jsx)("div",{className:(0,p.cn)("flex flex-col justify-center gap-[40px] text-[var(--text-primary)]","max-sm:gap-[12px]"),children:s})})]}),u&&(0,a.jsxs)("div",{className:"absolute z-[9] w-full bottom-0 p-6 flex justify-center items-center gap-6",children:[(0,a.jsx)("a",{href:x.bw.terms.root,target:"_blank",className:"text-[12px] leading-[18px] text-[var(--text-tertiary)] underline underline-offset-1 cursor-pointer hover:text-[var(--text-primary)] active:opacity-80",rel:"noreferrer",children:h.I.t("Terms of Service")}),(0,a.jsx)("a",{href:x.bw.privacy.root,target:"_blank",className:"text-[12px] leading-[18px] text-[var(--text-tertiary)] underline underline-offset-1 cursor-pointer hover:text-[var(--text-primary)] active:opacity-80",rel:"noreferrer",children:h.I.t("Privacy Policy")})]})]})}function b(){let{isLogin:e}=(0,c.GV)(d.R.selectors.authStatus),{handleLogout:t}=(0,u.As)(),[i,r]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{m.d.isInApp()||r(!0)},[]),e&&i)return(0,a.jsx)("button",{onClick:async()=>{t()},className:(0,p.cn)("clickable h-9 px-3 rounded-lg","border border-[rgba(255, 255, 255, 0.20)] dark:border-[var(--border-white)]","dark:shadow-[0px_1px_2px_-0.5px_var(--shadow-XS),inset_0px_-0.5px_0px_0px_var(--shadow-XS)]","flex items-center gap-1","text-sm text-[var(--text-primary)]","hover:bg-[var(--fill-tsp-white-light)]"),children:h.I.t("Sign out")})}function C(){return(0,a.jsx)("div",{className:(0,p.cn)("flex items-center gap-[12px] text-[12px] text-[var(--text-tertiary)]",'before:content-[""] before:flex-1 before:h-[1px] before:bg-[var(--border-main)]','after:content-[""] after:flex-1 after:h-[1px] after:bg-[var(--border-main)]'),children:h.I.t("Or")})}function S(e){let{label:t,labelSuffix:i,children:r,id:s,required:n,error:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[t&&(0,a.jsxs)("div",{className:"w-full flex items-center justify-between gap-[12px] mb-[8px]",children:[(0,a.jsx)("label",{htmlFor:s,className:(0,p.cn)("text-[13px] text-[var(--text-primary)] font-medium",n?'after:content-["*"] after:text-[var(--function-error)] after:ml-[4px]':""),children:(0,a.jsx)("span",{children:t})}),i]}),r,(0,a.jsx)("div",{className:(0,p.cn)("text-[13px] text-[var(--function-error)] leading-[18px] overflow-hidden","transition-all duration-300 ease-out",l?"opacity-100 max-h-[60px] mt-[2px]":"opacity-0 max-h-0 mt-0"),children:l})]})}function j(e){let{label:t,labelSuffix:i,id:n,required:l,error:o,type:c,inputCls:d,onEnter:u,...m}=e;return"password"===c?(0,a.jsx)(S,{id:n,label:t,labelSuffix:i,required:l,error:o,children:(0,a.jsx)(r.y,{className:d,placeholder:h.I.t("Password"),type:"password",error:o,onEnter:u,...m})}):(0,a.jsx)(S,{id:n,label:t,labelSuffix:i,required:l,error:o,children:(0,a.jsx)(s.p,{id:n,paddingSize:"thin",bgColor:"white",error:!!o,className:(0,p.cn)("w-full",d),type:c,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||null==u||u()},...m})})}},75563:(e,t,i)=>{"use strict";i.d(t,{r:()=>I});var a=i(2635),r=i(76743),s=i(33890),n=i(78308),l=i(53708),o=i(9205),c=i(99515);let d=e=>{let{size:t,color:i}=e,r=null!=i?i:"#010101";return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M25.1959 21.4143C25.293 21.1223 25.706 21.1223 25.8032 21.4143L26.117 22.3577C26.4353 23.3147 27.1863 24.0657 28.1434 24.384L29.0867 24.6978C29.3787 24.795 29.3787 25.208 29.0867 25.3051L28.1434 25.6189C27.1863 25.9373 26.4353 26.6882 26.117 27.6453L25.8032 28.5887C25.706 28.8806 25.293 28.8806 25.1959 28.5887L24.8821 27.6453C24.5637 26.6882 23.8128 25.9373 22.8557 25.6189L21.9124 25.3051C21.6204 25.208 21.6204 24.795 21.9124 24.6978L22.8557 24.384C23.8128 24.0657 24.5637 23.3147 24.8821 22.3577L25.1959 21.4143Z",fill:r}),(0,a.jsx)("path",{d:"M25.1959 1.41431C25.293 1.12231 25.706 1.12231 25.8032 1.41431L26.6162 3.85844C26.9345 4.81551 27.6855 5.56647 28.6426 5.88483L31.0867 6.69784C31.3787 6.79497 31.3787 7.20799 31.0867 7.30512L28.6426 8.11813C27.6855 8.43649 26.9345 9.18745 26.6162 10.1445L25.8032 12.5886C25.706 12.8806 25.293 12.8806 25.1959 12.5887L24.3829 10.1445C24.0645 9.18745 23.3136 8.43649 22.3565 8.11813L19.9124 7.30512C19.6204 7.20799 19.6204 6.79497 19.9124 6.69784L22.3565 5.88483C23.3136 5.56647 24.0645 4.81551 24.3829 3.85844L25.1959 1.41431Z",fill:r}),(0,a.jsx)("path",{d:"M4.69588 2.41431C4.79301 2.12231 5.20604 2.12231 5.30317 2.41431L5.49216 2.98246C5.81052 3.93953 6.56147 4.69049 7.51855 5.00885L8.0867 5.19784C8.37869 5.29497 8.37869 5.70799 8.0867 5.80512L7.51855 5.99411C6.56147 6.31247 5.81052 7.06343 5.49216 8.0205L5.30317 8.58865C5.20604 8.88065 4.79301 8.88065 4.69588 8.58865L4.5069 8.0205C4.18854 7.06343 3.43758 6.31247 2.48051 5.99411L1.91236 5.80512C1.62036 5.70799 1.62036 5.29497 1.91236 5.19784L2.48051 5.00885C3.43758 4.69049 4.18854 3.93953 4.5069 2.98246L4.69588 2.41431Z",fill:r}),(0,a.jsx)("path",{d:"M5.19589 22.4143C5.29301 22.1223 5.70604 22.1223 5.80317 22.4143L5.86735 22.6073C6.18571 23.5643 6.93667 24.3153 7.89374 24.6337L8.0867 24.6978C8.37869 24.795 8.37869 25.208 8.0867 25.3051L7.89374 25.3693C6.93667 25.6877 6.18571 26.4386 5.86735 27.3957L5.80317 27.5887C5.70604 27.8806 5.29301 27.8806 5.19589 27.5887L5.1317 27.3957C4.81334 26.4386 4.06238 25.6877 3.10531 25.3693L2.91236 25.3051C2.62036 25.208 2.62036 24.795 2.91236 24.6978L3.10531 24.6337C4.06238 24.3153 4.81334 23.5643 5.1317 22.6073L5.19589 22.4143Z",fill:r}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9681 9.90308C12.2359 12.1043 10.5087 13.8316 8.30738 14.5638L3.88148 16.036C3.15149 16.2788 3.15149 17.3114 3.88148 17.5542L8.30738 19.0264C10.5086 19.7587 12.2359 21.4859 12.9681 23.6871L14.4403 28.113C14.6831 28.843 15.7157 28.843 15.9585 28.113L17.4307 23.6871C18.163 21.4859 19.8902 19.7587 22.0914 19.0264L26.5173 17.5542C27.2473 17.3114 27.2473 16.2788 26.5173 16.036L22.0914 14.5638C19.8902 13.8316 18.163 12.1044 17.4307 9.90309L15.9585 5.47718C15.7157 4.74719 14.6831 4.74719 14.4403 5.47718L12.9681 9.90308ZM15.1994 11.0874C14.1988 13.7168 12.1211 15.7945 9.49174 16.7951C12.1211 17.7957 14.1988 19.8734 15.1994 22.5028C16.2 19.8734 18.2777 17.7957 20.9071 16.7951C18.2777 15.7945 16.2 13.7168 15.1994 11.0874Z",fill:r})]})};var u=i(19463);let p=e=>{let{size:t,color:i}=e,r=null!=i?i:"currentColor";return(0,a.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M3.50253 21.2659C3.59965 20.9739 4.01268 20.9739 4.10981 21.2659L4.4236 22.2092C4.74196 23.1663 5.49292 23.9172 6.44999 24.2356L7.39334 24.5494C7.68534 24.6465 7.68533 25.0596 7.39334 25.1567L6.44999 25.4705C5.49292 25.7888 4.74196 26.5398 4.4236 27.4969L4.10981 28.4402C4.01268 28.7322 3.59965 28.7322 3.50253 28.4402L3.18873 27.4969C2.87037 26.5398 2.11942 25.7888 1.16234 25.4705L0.218997 25.1567C-0.0729992 25.0596 -0.0729989 24.6465 0.218997 24.5494L1.16234 24.2356C2.11942 23.9172 2.87037 23.1663 3.18873 22.2092L3.50253 21.2659Z",fill:r}),(0,a.jsx)("path",{d:"M25.3395 3.49095C25.4366 3.19896 25.8496 3.19896 25.9468 3.49095L26.2514 4.40686C26.5698 5.36394 27.3208 6.1149 28.2778 6.43325L29.1937 6.73792C29.4857 6.83505 29.4857 7.24808 29.1937 7.3452L28.2778 7.64987C27.3208 7.96823 26.5698 8.71919 26.2514 9.67626L25.9468 10.5922C25.8496 10.8842 25.4366 10.8842 25.3395 10.5922L25.0348 9.67626C24.7165 8.71919 23.9655 7.96823 23.0084 7.64987L22.0925 7.3452C21.8005 7.24808 21.8005 6.83505 22.0925 6.73792L23.0084 6.43325C23.9655 6.1149 24.7165 5.36394 25.0348 4.40686L25.3395 3.49095Z",fill:r}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.97 9.90308C12.2378 12.1043 10.5106 13.8316 8.30934 14.5638L3.88343 16.036C3.15344 16.2788 3.15344 17.3114 3.88343 17.5542L8.30933 19.0264C10.5106 19.7587 12.2378 21.4859 12.97 23.6871L14.4423 28.113C14.6851 28.843 15.7176 28.843 15.9605 28.113L17.4327 23.6871C18.1649 21.4859 19.8921 19.7587 22.0934 19.0264L26.5193 17.5542C27.2493 17.3114 27.2493 16.2788 26.5193 16.036L22.0934 14.5638C19.8921 13.8316 18.1649 12.1044 17.4327 9.90309L15.9605 5.47718C15.7176 4.74719 14.6851 4.74719 14.4423 5.47718L12.97 9.90308ZM15.2014 11.0874C14.2008 13.7168 12.1231 15.7945 9.49369 16.7951C12.1231 17.7957 14.2008 19.8734 15.2014 22.5028C16.2019 19.8734 18.2796 17.7957 20.909 16.7951C18.2796 15.7945 16.2019 13.7168 15.2014 11.0874Z",fill:r})]})};var m=i(59496),x=i(91452),h=i(40757),v=i(17923),f=i(18184),g=i(93847),w=i(31342),y=i(59260),b=i(21731),C=i(25850),S=i(57271),j=i(68209);function I(e){return(0,c.useEffect)(()=>{(0,y.C)({eventName:"buy_credits_dialog_show"})},[]),(0,a.jsx)(s.l,{width:"fit-content",title:(0,a.jsx)("span",{className:(0,b.cn)("font-georgia text-[32px] leading-[34px] pr-[40px] font-normal","max-sm:text-[24px] max-sm:leading-[30px]"),children:S.I.t("Buy add-on credits")}),onDisposed:e.onDisposed,headerClassName:"pt-[32px] px-[32px] pb-[0px] max-sm:px-[16px]",className:"bg-[var(--background-gray-main)] shadow-[0px_8px_32px_0px_var(--shadow-XS)]",children:(0,a.jsxs)("div",{className:(0,b.cn)("flex flex-col items-stretch gap-[24px] p-[32px]","max-sm:px-[16px]"),children:[(0,a.jsx)(N,{}),(0,a.jsx)(_,{})]})})}function N(){let e=(0,x.GV)(v.M.selectors.addOnList),t=e=>e===f.zl.CREDITS_19900?(0,a.jsx)(d,{className:"text-[var(--icon-primary)]",size:32,color:"currentColor"}):e===f.zl.CREDITS_10000?(0,a.jsx)(p,{className:"text-[var(--icon-primary)]",size:32,color:"currentColor"}):(0,a.jsx)(u.L,{className:"text-[var(--icon-primary)]",size:32,color:"currentColor"});return(0,a.jsx)("div",{className:(0,b.cn)("flex gap-[16px] items-stretch max-sm:gap-[8px]","p-[24px] m-[-24px]","max-sm:max-w-[calc(100%+32px)] max-sm:px-[16px] max-sm:py-[24px] max-sm:mt-[-24px] max-sm:mx-[-16px] max-sm:mb-[-12px] overflow-y-visible overflow-x-auto scrollbar-none"),children:e.map(e=>e.plan?(0,a.jsxs)("div",{className:(0,b.cn)("min-w-[180px] flex-auto pt-[32px] px-[16px] pb-[20px] flex flex-col gap-[32px] justify-between","rounded-[16px] border border-[var(--border-main)] shadow-[0px_6px_32px_0px_var(--shadow-S)]","max-sm:min-w-[160px]"),children:[(0,a.jsxs)("div",{className:"w-full flex flex-col items-center gap-[8px]",children:[t(e.plan),(0,a.jsx)("div",{className:(0,b.cn)("text-[var(--text-primary)] text-[20px] leading-[26px] font-semibold text-center","max-sm:text-[18px] max-sm:leading-[24px]"),children:S.I.t("{total} credits",{total:e.credits.toLocaleString()})}),(0,a.jsx)("div",{className:(0,b.cn)("text-[16px] leading-[24px] text-[var(--text-tertiary)] font-normal","max-sm:text-[16px]"),children:(0,g.$g)(e.price)})]}),(0,a.jsx)(k,{item:e})]},e.plan):null)})}function k(e){let{item:t}=e,[i,s]=(0,c.useState)(!1),{buyAddonCredits:d}=(0,w.S)(),u=(0,x.GV)(h.R.selectors.disablePayment),p=(0,x.GV)(h.R.selectors.paymentPlatform),v=(0,l.W)(()=>u||"live_event"===p),f=async e=>{let t=e.plan;(0,y.C)({eventName:"buy_credits_dialog_click",extData:{planKey:t}});try{s(!0),await d({planKey:t,quantity:e.credits})}catch(e){(0,o.oR)({variant:"error",title:m.P.formatErrorToString(e)})}finally{s(!1)}};return(0,a.jsx)(n.m,{title:v?S.I.t("The payment service is currently unavailable"):"",dismissProps:{referencePress:!0},children:(0,a.jsx)(r.A,{size:"large",color:"black",shape:"round",onClick:()=>{f(t)},loading:i,disabled:v,className:"max-sm:h-[32px]",children:(0,a.jsx)("span",{children:S.I.t("Buy now")})})})}function _(){let e=[S.I.t("Only {product} Pro and Team versions can buy add-on credits.",{product:C.KR}),S.I.t("Add-on credits can only be used during the membership period and do not expire."),S.I.t("Please visit our <help>Help Center</help> to quickly find answers.")];return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[13px] leading-[18px] font-semibold text-[var(--text-secondary)] mb-[8px]",children:S.I.t("Rules")}),(0,a.jsx)("ul",{className:"text-[var(--text-tertiary)] text-[12px] leading-[16px] list-decimal pl-[16px] flex flex-col items-stretch gap-[2px]",children:e.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(j.p,{S:e,components:{help:e=>(0,a.jsx)("a",{className:"underline font-medium text-[var(--text-tertiary)] cursor-pointer hover:opacity-80 active:opacity-70 transition-opacity",href:C.mE,target:"_blank",rel:"noopener noreferrer",children:e})}})},t))})]})}},21496:(e,t,i)=>{"use strict";i.d(t,{d:()=>Y});var a=i(2635),r=i(51416),s=i(91452),n=i(40757),l=i(29298),o=i(76743),c=i(33890),d=i(85078),u=i(75958),p=i(59260),m=i(21731),x=i(25850),h=i(89310),v=i(57271),f=i(99515),g=i(16834);function w(e){let t=(0,s.GV)(n.R.selectors.isTeamAccount);return((0,f.useEffect)(()=>{(0,p.C)({eventName:"questionnaire_invitation_page_show"})},[]),t)?(0,a.jsxs)(c.l,{width:450,onDisposed:e.onDisposed,className:"bg-[var(--background-gray-main)]",children:[(0,a.jsx)("div",{className:"self-stretch px-5 py-[8px] flex flex-col items-center gap-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-[var(--text-primary)] text-center text-2xl font-[600] leading-[30px] whitespace-pre-wrap",children:v.I.t("We're sorry to see you go")}),(0,a.jsx)("p",{className:"w-96 text-center",children:(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-sm leading-snug",children:v.I.t("Your {product} subscription has been successfully cancelled. You'll continue to have access until the end of your current billing period.",{product:x.KR})})})]})}),(0,a.jsx)("div",{className:"mt-[20px] self-stretch px-8 flex justify-end items-center gap-3 pb-8",children:(0,a.jsx)(o.A,{variant:"default",size:"large",color:"black",className:"w-full",onClick:()=>{e.onDisposed()},children:v.I.t("Got it")})})]}):(0,a.jsx)(c.l,{width:400,onDisposed:e.onDisposed,className:"bg-[var(--background-gray-main)]",title:v.I.t("Subscription cancelled"),children:(0,a.jsxs)("div",{className:"px-[20px]",children:[(0,a.jsx)("p",{className:"text-[var(--text-tertiary)] text-sm leading-[22px]",children:v.I.t("Please share your feedback! We use this information to improve your experience, even as you switch to our free plan.")}),(0,a.jsxs)("div",{className:"py-[20px] flex gap-[8px]",children:[(0,a.jsx)(o.A,{size:"large",color:"gray",onClick:e.onDisposed,className:"w-[175px]",children:v.I.t("No, thanks")}),(0,a.jsx)("a",{href:"https://form.typeform.com/to/".concat(g.tN.CANCEL_SUBSCRIPTION),target:"_blank",className:"flex-1 flex min-w-0",onClick:()=>{e.onDisposed(),(0,p.C)({eventName:"questionnaire_invitation_click"})},rel:"noreferrer noopener",children:(0,a.jsx)(o.A,{size:"large",color:"black",className:"w-full min-w-0",children:v.I.t("Take the survey")})})]})]})})}var y=i(67260),b=i(96962),C=i(16001);let S=[{get text(){return v.I.t("Too expensive")},value:h.Po.CancelReason_TooExpensive},{get text(){return v.I.t("Missing features")},value:h.Po.CancelReason_MissingFeatures},{get text(){return v.I.t("Switched to a better alternative")},value:h.Po.CancelReason_SwitchedToABetterAlternative},{get text(){return v.I.t("Not using {product} enough",{product:x.KR})},value:h.Po.CancelReason_NotUsingManusEnough},{get text(){return v.I.t("Too many technical issues")},value:h.Po.CancelReason_TooManyTechnicalIssues},{get text(){return v.I.t("Unsatisfied with task results")},value:h.Po.CancelReason_UnsatisfiedWithTaskResults},{get text(){return v.I.t("Too difficult to use")},value:h.Po.CancelReason_TooDifficultToUse},{get text(){return v.I.t("Too slow")},value:h.Po.CancelReason_TooSlow},{get text(){return v.I.t("Other")},value:h.Po.CancelReason_OtherReason}];function j(e){let{reason:t,comment:i,onChange:r}=e,s=(0,f.useMemo)(()=>[...S.slice(0,-1).sort(()=>Math.random()-.5),...S.slice(-1)],[]);return(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[s.map((e,s)=>{let{text:n,value:l}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{r(l,i)},children:[t===l?(0,a.jsx)(b.w,{size:20}):(0,a.jsx)(C.r,{color:"var(--icon-tertiary)",size:20}),(0,a.jsx)("div",{className:"text-[var(--text-primary)]  text-sm leading-[22px] ",children:n})]},s)}),t===h.Po.CancelReason_OtherReason&&(0,a.jsx)(y._,{className:"min-h-[90px]",placeholder:v.I.t("Enter other reasons"),value:i,autoFocus:!0,onChange:e=>{r(t,e.target.value)}})]})}function I(e){let t=(0,r.s)(w),[i,s]=(0,f.useState)(),[n,l]=(0,f.useState)(),g=(0,u.w)(()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()}),y=(0,u.w)(async()=>{await e.onConfirm({cancelReason:i,comment:i===h.Po.CancelReason_OtherReason?n:void 0}),e.onDisposed(),t.open()}),{isLoading:b,run:C}=(0,d.W)();return(0,f.useEffect)(()=>{(0,p.C)({eventName:"cancel_subscription_page_show"})},[]),(0,a.jsx)(c.l,{width:450,title:v.I.t("Sorry to see you go"),onDisposed:g,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch",children:[(0,a.jsx)("p",{className:(0,m.cn)("text-[var(--text-primary)] text-sm font-medium mb-[10px]"),children:v.I.t("What was the main reason you decided to cancel your {product} subscription?",{product:x.KR})}),(0,a.jsx)(j,{comment:n,reason:i,onChange:(e,t)=>{s(e),l(t)}}),(0,a.jsxs)("div",{className:(0,m.cn)("flex justify-end gap-2 mt-8"),children:[(0,a.jsx)(o.A,{size:"medium",color:"gray",onClick:()=>{g(),(0,p.C)({eventName:"keep_subscription_click"})},className:"clickable",children:v.I.t("Keep subscription")}),(0,a.jsx)(o.A,{size:"medium",color:"danger",loading:b,onClick:()=>{C(y)},disabled:i===h.Po.CancelReason_OtherReason&&!(null==n?void 0:n.trim())||!i,children:v.I.t("Cancel subscription")})]})]})})}var N=i(9205),k=i(59496),_=i(27846),T=i(4232),P=i(17923),L=i(18184),E=i(93847),M=i(31342),A=i(47488),R=i(28715),F=i(78085),D=i(68209),U=i(8398);function V(e){let t=(0,s.GV)(n.R.selectors.planKey),i=(0,s.GV)(P.M.selectors.planList),r=(0,E.wZ)(t),l=i.find(e=>e.plan===r),o=R.r4,c=r?o[r]:[];return 0===c.length?null:(0,a.jsx)("ul",{className:(0,m.cn)("flex flex-col items-stretch gap-[12px]","text-[14px] leading-[22px] font-normal text-[var(--text-primary)]","p-3 rounded-[12px] bg-[var(--fill-tsp-white-light)]"),children:c.map((e,t)=>(0,a.jsxs)("li",{className:"relative pl-[24px] text-sm",children:[(0,a.jsx)("div",{className:"absolute top-[3px] left-0",children:(0,a.jsx)(U.A,{size:16,color:"var(--function-error)"})}),(0,a.jsx)(D.p,{S:e,data:{credits:(null==l?void 0:l.credits)?(0,x.Ql)(l.credits):"-",concurrentTasks:(null==l?void 0:l.maxConcurrentTask)||"-",maxScheduledTask:(null==l?void 0:l.maxScheduledTask)||"-"},components:{b:e=>(0,a.jsx)("span",{className:(0,m.cn)("font-medium text-[var(--text-primary)]"),children:e}),link:e=>(0,a.jsx)("a",{className:"underline hover:opacity-80 text-[var(--text-tertiary)] text-[13px] leading-[22px]",href:F.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})]},"".concat(e,"_").concat(t)))})}var O=i(55866),z=i(18214),B=i(50232),W=i(79621);function K(e){let{newPlanKey:t}=e,i=(0,s.GV)(n.R.selectors.planKey),r=(0,s.GV)(n.R.selectors.userInfo),{getPlanInfo:l}=(0,M.S)(),o=l(i),c=l(t);if(!o||!c)return null;let d=(0,E.$g)(o.monthlyPrice-c.monthlyPrice),u="yearly"===(0,E.aL)(i);return(0,a.jsxs)("div",{className:(0,m.cn)("rounded-xl border border-[var(--border-dark)] bg-[var(--background-menu-white)]"),children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-sm",children:v.I.t("Current plan")}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-base font-bold font-serif",children:o.planName}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-[var(--text-secondary)] text-base font-semibold",children:["$",(0,a.jsx)("div",{className:"relative -bottom-[7px] inline-flex text-[var(--text-primary)]",children:(0,a.jsx)(W.A,{value:o.monthlyPrice})})]}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-xs",children:v.I.t(" / month")})]})]})]}),(0,a.jsx)("hr",{className:"border-t border-[var(--border-light)] mx-4"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-sm",children:v.I.t("New plan")}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-base font-bold font-serif",children:c.planName}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-[var(--text-secondary)] text-base font-semibold",children:["$",(0,a.jsx)("div",{className:"relative -bottom-[7px] inline-flex text-[var(--text-primary)]",children:(0,a.jsx)(W.A,{value:c.monthlyPrice})})]}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-xs",children:v.I.t(" / month")})]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-1",children:(0,a.jsx)("div",{className:(0,m.cn)("rounded-[99px] outline outline-[var(--icon-primary)] bg-[var(--fill-tsp-white-light)] px-2 py-0.5","text-[var(--text-primary)] text-[13px] font-medium leading-[18px]"),children:u?v.I.t("Save {savings} / month",{savings:d}):v.I.t("Save {savings}",{savings:d})})})]}),(0,a.jsxs)("div",{className:"bg-[var(--fill-tsp-white-light)] pl-4 pr-3 py-2.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.K,{size:16,color:"var(--icon-disable)"}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-[13px]",children:v.I.t("Changes apply after current subscription ends")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(B.A,{size:16,color:"var(--icon-disable)"}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-[13px]",children:(0,a.jsx)(D.p,{S:v.I.t("Next charge will be on <b>{date}</b>"),data:{date:z.F.format(new Date(1e3*Number(null==r?void 0:r.currentPeriodEnd)),"PP")},components:{b:e=>(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:e})}})})]})]})]})}function G(e){let{submitSubscribe:t}=(0,M.S)(),{updateCredits:i}=(0,T.I)(),{fetchUserInfo:r}=(0,_.As)(),l=(0,s.GV)(n.R.selectors.membershipInterval),d=(0,s.GV)(n.R.selectors.nextMembershipInterval),x=L.OL.CASUAL,h=(d?"yearly"===d:"yearly"===l)?L.zl.CASUAL_YEARLY:L.zl.CASUAL_MONTHLY,g=(0,s.GV)(P.M.selectors.planList).find(e=>e.plan===x),w=(0,u.w)(()=>{e.onDisposed()}),y=(0,u.w)(async()=>{try{(0,p.C)({eventName:"switch_starter_click"}),await t(L.v6.downgrade,{planKey:h,onSuccess:async()=>{(0,E.K6)(L.v6.downgrade)&&(await Promise.all([r(),i()]),(0,N.oR)({variant:"success",title:v.I.t("Subscription plan changed successfully.")}),A.T.emit("subscriptionChange",{type:L.v6.downgrade,plan:h})),e.onDisposed()}})}catch(e){(0,N.oR)({variant:"error",title:k.P.formatErrorToString(e)})}});return(0,f.useEffect)(()=>{(0,p.C)({eventName:"switch_starter_show"})},[]),(0,a.jsx)(c.l,{width:450,title:v.I.t("Confirm cancellation"),onDisposed:w,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch ",children:[(0,a.jsx)("p",{className:"text-[14px] leading-[22px] text-[var(--text-secondary)] mb-2",children:v.I.t("Current benefits remain until cycle ends, then you'll lose these benefits:")}),(0,a.jsx)(V,{}),(0,a.jsx)("p",{className:(0,m.cn)("text-[var(--text-secondary)] text-sm leading-[22px] mt-4 mb-2"),children:v.I.t("Before you go, consider the alternative:")}),(0,a.jsx)(K,{newPlanKey:h}),(0,a.jsxs)("div",{className:(0,m.cn)("flex justify-end items-center gap-2 mt-8 flex-wrap"),children:[(0,a.jsx)(o.A,{size:"medium",color:"gray",onClick:()=>{e.onDisposed(),e.onCancelSubscription()},children:v.I.t("Cancel subscription")}),g&&(0,a.jsx)(o.A,{size:"medium",color:"black",onClick:y,children:v.I.t("Switch to Plus")})]})]})})}function H(e){let[t,i]=(0,f.useState)(),[s,n]=(0,f.useState)(),l=(0,r.s)(w),p=(0,u.w)(()=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e),e.onDisposed()}),g=(0,u.w)(async()=>{await e.onConfirm({cancelReason:t,comment:t===h.Po.CancelReason_OtherReason?s:void 0}),e.onDisposed(),l.open()}),{isLoading:y,run:b}=(0,d.W)();return(0,a.jsx)(c.l,{width:450,title:v.I.t("Confirm cancellation"),onDisposed:p,className:"bg-[var(--background-gray-main)]",headerClassName:"px-[20px] pb-[16px]",closeIconClass:"top-[16px] right-[12px]",children:(0,a.jsxs)("div",{className:"px-[20px] pb-[20px] flex flex-col items-stretch ",children:[(0,a.jsx)("p",{className:(0,m.cn)("text-[var(--text-secondary)] text-sm leading-[22px] mb-2"),children:v.I.t("Cancellation stops future billing. You keep current benefits until this cycle ends. Afterwards, you will lose the following benefits:")}),(0,a.jsx)(V,{}),(0,a.jsx)("p",{className:(0,m.cn)("text-[var(--text-primary)] text-sm font-medium mt-4 mb-[10px]"),children:v.I.t("What was the main reason you decided to cancel your {product} subscription?",{product:x.KR})}),(0,a.jsx)(j,{reason:t,comment:s,onChange:(e,t)=>{i(e),n(t)}}),(0,a.jsxs)("div",{className:(0,m.cn)("flex justify-end gap-2 mt-8"),children:[(0,a.jsx)(o.A,{size:"medium",color:"gray",onClick:()=>{p()},className:"clickable",children:v.I.t("Keep subscription")}),(0,a.jsx)(o.A,{size:"medium",color:"danger",loading:y,onClick:()=>{b(g)},disabled:t===h.Po.CancelReason_OtherReason&&!(null==s?void 0:s.trim())||!t,children:v.I.t("Cancel subscription")})]})]})})}function Y(e){let t=(0,r.s)(I),i=n.R.selectors.membershipVersion(s.M_.getState()),o=n.R.selectors.nextMembershipVersion(s.M_.getState()),c=[l.b.Lite,l.b.Casual,l.b.Team];return c.includes(i)||c.includes(o)?(0,a.jsx)(H,{...e}):i===l.b.Pro?(0,a.jsx)(G,{...e,onCancelSubscription:()=>{t.open(e)}}):null}},11258:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var a=i(2635),r=i(76743),s=i(33890),n=i(51416);function l(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"none",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M6 34L10 38L18 30",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6 14L10 18L18 10",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26 12H42",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26 24H42",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M26 36H42",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}l._id="26261dfc8d4e730968edbd801fc5f56b";var o=i(5685),c=i(40757),d=i(93847),u=i(59260),p=i(57271),m=i(54914);function x(e){let{onDisposed:t}=e,i=(0,o.GV)(c.R.selectors.userInfo),x=!(0,o.GV)(c.R.selectors.isTeamAccount)&&!(0,d.oD)(null==i?void 0:i.membershipVersion),{open:h}=(0,n.s)(m.v);return(0,a.jsx)(s.l,{width:460,onDisposed:t,className:"max-w-[90%]",headerClassName:"none p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-center pt-[44px] pb-[32px] px-8",children:[(0,a.jsx)(l,{size:48,className:"text-[var(--text-primary)]"}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{className:"text-[var(--text-primary)] text-center text-2xl font-[600] leading-[30px]",children:p.I.t("Concurrent task limit reached")}),(0,a.jsx)("div",{className:"mt-2 text-[var(--text-tertiary)] text-center text-sm leading-[22px] whitespace-pre-line",children:x?p.I.t("You've reached your concurrent task limit.\nUpgrade your plan to unlock more."):p.I.t("You've reached your concurrent task limit.")})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-between gap-3 w-full",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"flex-1 h-10 ",variant:"outline",size:"medium",onClick:t,children:p.I.t("Cancel")}),(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:()=>{t(),(0,u.C)({eventName:"limit_dialog_upgrade_click",extData:{source:"concurrency_limit"}}),h({motivation:{page:"session",event:"concurrency_limit",reason:"upgrade"}})},children:p.I.t("Upgrade now")})]}):(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:t,children:p.I.t("Got it")})})]})})}},57055:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var a=i(2635),r=i(76743),s=i(33890),n=i(51416),l=i(5685),o=i(40757),c=i(93847),d=i(59260),u=i(21731),p=i(57271),m=i(54914);function x(e){let{onDisposed:t,icon:i,description:x,upgradeTitle:h,title:v,cancelText:f,cancelOnClick:g,motivation:w}=e,y=(0,l.GV)(o.R.selectors.userInfo),b=!(0,l.GV)(o.R.selectors.isTeamAccount)&&!(0,c.oD)(null==y?void 0:y.membershipVersion),{open:C}=(0,n.s)(m.v);return(0,a.jsx)(s.l,{width:460,onDisposed:t,className:"max-w-[90%]",headerClassName:"none p-0",children:(0,a.jsxs)("div",{className:"flex flex-col items-center pt-[44px] pb-[32px] px-8",children:[(0,a.jsx)(i,{className:(0,u.cn)("size-[48px] text-[var(--icon-primary)]")}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("p",{className:"text-[var(--text-primary)] text-center text-2xl font-[600] leading-[30px]",children:v}),(0,a.jsx)("div",{className:"mt-2 text-[var(--text-tertiary)] text-center text-sm leading-[22px] whitespace-pre-line",children:x})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-between gap-3 w-full",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"flex-1 h-10 ",variant:"outline",size:"medium",onClick:()=>{g?g():t()},children:f||p.I.t("Cancel")}),(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:()=>{t(),C({title:h,motivation:w}),(null==w?void 0:w.event)&&(null==w?void 0:w.page)&&(0,d.C)({eventName:"limit_dialog_upgrade_click",extData:{source:(null==w?void 0:w.event)||""}})},children:p.I.t("Upgrade now")})]}):(0,a.jsx)(r.A,{className:"flex-1 h-10",variant:"default",size:"medium",color:"black",onClick:t,children:p.I.t("Got it")})})]})})}},50220:(e,t,i)=>{"use strict";i.d(t,{l:()=>u});var a=i(2635),r=i(76743),s=i(33890),n=i(99820),l=i(91452),o=i(17923),c=i(31342),d=i(57271);function u(e){let{onDisposed:t}=e,i=(0,l.GV)(o.M.selectors.stripeBillingLoading),{goStripeBilling:u}=(0,c.S)();return(0,a.jsx)(s.l,{onDisposed:t,className:"w-[440px]",children:(0,a.jsxs)("div",{className:"pt-[20px] pb-[40px] flex flex-col items-center justify-center",children:[(0,a.jsx)(n.i,{size:80,color:"var(--icon-disable)"}),(0,a.jsx)("div",{className:"mt-[24px] text-xl  font-[600] leading-[26px] text-[var(--text-primary)] ",children:d.I.t("Something went wrong")}),(0,a.jsxs)("div",{className:"mt-2 text-sm leading-[22px] text-center text-[var(--text-tertiary)]",children:[(0,a.jsx)("div",{children:d.I.t("You have an unpaid renewal impacting billing.")}),d.I.t("Please manage your billing first.")]}),(0,a.jsx)(r.A,{className:"mt-[48px] w-[300px]",color:"black",loading:i,size:"large",onClick:async()=>{await u(),t()},children:d.I.t("Edit billing")})]})})}},17550:(e,t,i)=>{"use strict";i.d(t,{$:()=>S,M:()=>C});var a=i(2635),r=i(78308),s=i(93578),n=i(53708),l=i(91452),o=i(40757),c=i(18184),d=i(93847),u=i(31342),p=i(57107),m=i(21731),x=i(78085),h=i(57271),v=i(68209),f=i(48046),g=i(73518),w=i(99515),y=i(79621),b=i(79349);let C=e=>{switch(e){case"lib4":return"pricing";case"lib5":return"dialog";default:return}},S=e=>{var t;let{plan:i,isAnnually:C=!1,asLib:S=null,libOnlyOneCard:j=!1,isHideBasic:I=!1,isCurrentHighlight:N=!1}=e,{getPlanInfo:k,getPlanInfoLib6:_,getPlanInfoPoorArea0:T}=(0,u.S)(),P=(0,l.GV)(p.s.selectors.getPoorArea0CreditsVariant),L=(0,l.GV)(p.s.selectors.getPoorArea0CreditsBrazilVariant),E=(0,l.GV)(p.s.selectors.getOldUser0CreditsVariant),M=(null==P?void 0:P.value)==="treatment"||(null==L?void 0:L.value)==="treatment"||(null==E?void 0:E.value)==="treatment",A=(0,n.W)(()=>"lib6"===S?_:M?T:k),R=(0,l.GV)(o.R.selectors.isVip),F=(0,d.nW)(i.plan,C),D=(0,l.GV)(o.R.selectors.userInfo),U=A(F),V="lib5"===S,O="lib6"===S;if(!U)return;let z=N||O&&i.plan===c.OL.PRO;return(0,a.jsx)("div",{className:(0,m.cn)("flex-col items-center justify-center w-full  max-w-[330px] min-w-[308px] flex-1","max-[1200px]:odd:justify-self-end",{"pt-5 max-[1200px]:pt-0":!z},{"pt-0":V||O},{"md:!pt-5 ":!R&&i.plan===c.OL.FREE&&z},"max-md:!justify-self-center ",I?"max-[1200px]:last:col-span-2 last:!justify-self-center":""),children:(0,a.jsxs)("div",{className:(0,m.cn)("relative h-full px-[16px] pb-[24px] bg-[var(--background-menu-white)] rounded-[16px] border  flex flex-col items-center gap-5 overflow-hidden",z&&!j?" pt-[36px] border-[2px] border-[var(--Button-primary-brand)] ":" pt-[16px]  border border-[var(--border-main)]",V||O?"pt-[16px] border-[1px]":""),children:[z&&!V&&!O&&(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 flex h-6 py-1.5 px-5 justify-center items-center gap-2.5 flex-shrink-0 bg-[var(--fill-blue)]",children:(0,a.jsx)("span",{className:"text-[var(--text-blue)] text-xs font-[500] ",children:h.I.t(i.isPopularText||h.I.t("POPULAR"))})}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center content-center text-[var(--text-primary)] text-[18px] font-[700] leading-[22px]",children:[(0,a.jsx)("span",{className:"font-georgia",children:U.planName}),(0,a.jsx)("span",{className:"  rounded-tl-[10px] rounded-tr-[10px] rounded-br-[10px] border border-[var(--border-dark)] text-[12px] leading-[16px] text-[var(--text-tertiary)] px-[6px] ms-[6px] font-medium",children:h.I.t("Beta")}),z&&V&&(0,a.jsx)("span",{className:"ml-auto rounded-[4px] bg-[var(--fill-blue)] flex h-5 py-1 px-2 justify-center items-center gap-2.5 text-[var(--text-blue)] text-xs font-[500] truncate",children:h.I.t(i.isPopularText||h.I.t("POPULAR"))}),z&&O&&(0,a.jsx)("span",{className:"ml-auto rounded-[4px] bg-[var(--fill-blue)] flex h-5 py-1 px-2 justify-center items-center gap-2.5 text-[var(--text-blue)] text-xs font-[500] truncate",children:h.I.t("Recommended")})]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-[var(--text-primary)] text-center text-[32px] font-[600] leading-[40px]",children:["$",(0,a.jsx)(y.A,{value:U.monthlyPrice})]}),(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-center text-base font-[400]",children:i.plan===c.OL.TEAM?h.I.t(" / person / month"):h.I.t(" / month")})]})]}),(0,a.jsx)(b.n,{asLib:S,isAnnually:C,planType:i.plan,isPopular:i.isPopular}),O&&(0,a.jsx)("div",{className:"border-b-[1px] border-dashed border-[var(--border-dark)] w-full mt-[4px] mb-[-12px]"}),(0,a.jsx)("div",{className:"w-full flex flex-col gap-[6px] mt-2",children:null===(t=U.benefits)||void 0===t?void 0:t.map((e,t)=>e.match&&!e.match(D)?null:(0,a.jsxs)("div",{className:"w-full flex items-start self-start gap-2",children:[(0,a.jsx)("div",{className:"flex items-center self-start mt-[3px]",children:e.icon?w.createElement(e.icon,{size:16,color:"var(--icon-primary)"}):(0,a.jsx)(f.A,{size:16,color:"var(--icon-primary)"})}),(0,a.jsx)("div",{className:"flex-1 items-center gap-1",children:(0,a.jsxs)("div",{className:"text-[var(--text-secondary)] text-sm",children:["string"==typeof e.label?(0,a.jsx)(s.A,{trigger:["hover","touch"],placement:"top",showArrow:!0,arrowProps:{className:"border-[var(--border-dark)]"},className:"w-[294px] max-w-[90%]  p-[16px] rounded-[12px] border-[0.5px] border-[var(--border-dark)] bg-[var(--background-menu-white)] shadow-[0px_4px_11px_0px_var(--shadow-M)]",disabled:!e.popover,content:e.popover,children:(0,a.jsx)("span",{className:(0,m.cn)({"me-[6px]":!!e.badge,"underline decoration-dotted cursor-help hover:opacity-80":!!e.popover}),children:(0,a.jsx)(v.p,{S:e.label,components:{b:e=>(0,a.jsx)("span",{className:"font-[500] text-[var(--text-primary)]",children:e}),link:e=>(0,a.jsx)("a",{className:"inline-block underline hover:opacity-80 text-[var(--text-tertiary)] text-sm leading-[22px]",href:x.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})})}):e.label,!!e.badge&&(0,a.jsx)(v.p,{S:e.badge,components:{limited:e=>(0,a.jsx)("span",{className:"inline-block relative rounded-full border border-[var(--icon-disable)] bg-[var(--fill-tsp-white-light)] text-[11px] leading-[16px] text-[var(--text-primary)] px-[8px] font-medium",children:e})}}),e.tooltip&&(0,a.jsx)(r.m,{title:e.tooltip,className:"whitespace-pre-wrap",children:(0,a.jsx)(g.A,{size:16,color:"var(--icon-tertiary)",className:"relative top-[-1px] ml-[4px] inline-block cursor-help"})})]})})]},t))})]})})}},71862:(e,t,i)=>{"use strict";i.d(t,{U:()=>K});var a=i(2635),r=i(76743),s=i(7487),n=i(24683),l=i(53708),o=i(51416),c=i(27168),d=i(75958),u=i(9205),p=i(16834),m=i(59496),x=i(91452),h=i(40757),v=i(29298),f=i(27846),g=i(4232),w=i(17923),y=i(18184),b=i(93847),C=i(31342),S=i(57107),j=i(72551),I=i(59260),N=i(19417),k=i(21731),_=i(18620),T=i(93347),P=i(57271),L=i(68209),E=i(1566),M=i(99515),A=i(21496),R=i(19463),F=i(75563),D=i(46936);function U(e){let t=(0,x.GV)(j.u.selectors.isTeamOwner),i=(0,x.GV)(h.R.selectors.membershipVersion),{open:s}=(0,o.s)(F.r),{open:n}=(0,o.s)(D.g);return i===v.b.Lite||i===v.b.Casual?null:(0,a.jsx)("div",{className:(0,k.cn)("flex max-w-full justify-between items-center flex-1","min-[1200px]:max-w-[630px]"),children:(0,a.jsxs)("div",{className:(0,k.cn)("flex w-full py-[10px] items-center pe-[13px] ps-5 gap-[10px]","rounded-[16px] max-md:rounded-[16px] border border-[var(--border-main)] bg-[var(--background-menu-white)]"),children:[(0,a.jsx)("div",{className:"flex p-2 items-center  rounded-[8px] border border-[var(--border-main)]",children:(0,a.jsx)(R.L,{size:20,color:"var(--icon-primary)"})}),(0,a.jsxs)("div",{className:"flex-1  flex-col gap-[6px]",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] font-[Georgia] text-sm font-[700] ",children:P.I.t("Buy add-on credits")}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)]  text-[13px] leading-[18px]",children:P.I.t("One-time payment to purchase credits")})]}),(0,a.jsx)(r.A,{color:"black",size:"small",shape:"round",className:(0,k.cn)("text-[13px]"),onClick:async()=>{t?n():s()},children:(0,a.jsx)("span",{children:P.I.t("Buy credits")})})]})})}var V=i(17550),O=i(95040),z=i(25850),B=i(79349);function W(e){let{isAnnually:t}=e,i=y.OL.TEAM,{getPlanInfo:r}=(0,C.S)(),s=r((0,b.nW)(y.OL.TEAM,t));if(s)return(0,a.jsx)("div",{className:(0,k.cn)("flex max-w-full justify-between items-center flex-1","min-[1200px]:max-w-[630px]"),children:(0,a.jsxs)("div",{className:(0,k.cn)("flex w-full py-[10px] items-center pe-[13px] ps-5 gap-[10px]","rounded-[16px] max-md:rounded-[16px] border border-[var(--border-main)] bg-[var(--background-menu-white)]"),children:[(0,a.jsx)("div",{className:"flex p-2 items-center  rounded-[8px] border border-[var(--border-main)]",children:(0,a.jsx)(O.O,{size:20,color:"var(--icon-primary)"})}),(0,a.jsxs)("div",{className:"flex-1  flex-col gap-[6px]",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] font-[Georgia] text-sm font-[700] ",children:null==s?void 0:s.planName}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)]  text-[13px] leading-[18px]",children:P.I.t("Scale your team's productivity with {product}",{product:z.KR})})]}),(0,a.jsx)(B.n,{className:"w-auto",isAnnually:t,planType:i})]})})}let K=e=>{let{planListHelperTips:t=!1,asLib:i=null}=e,r=(0,x.GV)(w.M.selectors.planList),m=(0,x.GV)(w.M.selectors.subscriptions),v=(0,x.GV)(h.R.selectors.isVip),b=(0,x.GV)(h.R.selectors.userInfo),_=(0,x.GV)(w.M.selectors.subscriptionSource),E=(0,x.GV)(S.s.selectors.getNewUserDoubleCreditsVariant),R=(0,x.GV)(S.s.selectors.getPoorArea0CreditsVariant),F=(0,x.GV)(S.s.selectors.getPoorArea0CreditsBrazilVariant),D=(0,x.GV)(S.s.selectors.getOldUser0CreditsVariant),O=(null==R?void 0:R.value)==="treatment"||(null==F?void 0:F.value)==="treatment"||(null==D?void 0:D.value)==="treatment",z=(0,x.GV)(w.M.selectors.planListPoorArea0),B=(null==E?void 0:E.value)==="hide_basic"||(null==E?void 0:E.value)==="hide_basic_highlight_plus"||(null==E?void 0:E.value)==="hide_basic_highlight_pro",K=e=>(null==E?void 0:E.value)!=="hide_basic"&&((null==E?void 0:E.value)==="hide_basic_highlight_plus"?e===y.OL.CASUAL:(null==E?void 0:E.value)==="hide_basic_highlight_pro"&&e===y.OL.PRO),H=(0,x.GV)(h.R.selectors.isTeamAccount),Y=(0,x.GV)(j.u.selectors.isTeamOwner),{fetchUserInfo:Z}=(0,f.As)(),{updateCredits:$}=(0,g.I)(),{open:q}=(0,o.s)(A.d),{getPlanDiscount:J}=(0,C.S)(),Q=J(),X=(0,c.a)(768),ee=[{label:P.I.t("Monthly"),value:!1},{label:(0,a.jsxs)(a.Fragment,{children:[P.I.t("Annually"),(0,a.jsx)("div",{className:"text-[var(--text-blue)] text-[13px]  font-[500] ",children:(0,a.jsx)(L.p,{S:P.I.t("Save <percent></percent>"),components:{percent:()=>(0,a.jsxs)("span",{dir:"ltr",children:[Q,"%"]})}})})]}),value:!0}],[et,ei]=(0,M.useState)(!0),ea=(O?z:r).flatMap(e=>B&&e.plan===y.OL.LITE?[]:K(e.plan)?[{...e,isPopular:!0,isPopularText:e.plan===y.OL.PRO?P.I.t("BEST VALUE"):void 0}]:X&&e.plan===y.OL.FREE?[]:[e]),er=(0,d.w)(()=>{(0,I.C)({eventName:"cancel_subscription_click"}),q({onConfirm:async e=>{let{cancelReason:t,comment:i}=e;await T.F.SubscriptionService.cancel({cancelReason:t,comment:i}),await Promise.all([Z(),$()]),(0,u.oR)({variant:"success",title:P.I.t("Subscription cancelled.")})}})}),es=(0,l.W)(()=>!H&&!!v&&(null==b||!b.isMembershipTrial)),en=(0,d.w)(e=>{ei(e),N.J.trackSwitchInterval(e)});return(0,a.jsxs)("div",{className:(0,k.cn)("flex flex-col w-full relative"),children:[0!==ea.length&&(0,a.jsx)(n.t,{classNames:{root:"mb-6 self-center ",item:"flex gap-[5px] text-[13px]"},value:et,onChange:en,options:ee}),0===m.length?(0,a.jsx)(s.R,{size:24,className:" w-full min-h-[620px]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,k.cn)("grid grid-cols-1 md:grid-cols-2  flex-1 w-full",X?"gap-y-2":"gap-2",B?"min-[1200px]:grid-cols-3":"min-[1200px]:grid-cols-4","pricing"===_&&" px-0"),children:ea.filter(e=>e.plan!==y.OL.TEAM).map(e=>{let t=K(e.plan);return(0,a.jsx)(V.$,{asLib:i,plan:e,isAnnually:et,isHideBasic:B,isCurrentHighlight:t},e.plan)})}),!i&&(0,a.jsxs)("div",{className:(0,k.cn)("flex flex-row gap-2 items-center justify-center",X?"flex-col mt-2":"flex-row mt-6"),children:[ea.filter(e=>e.plan===y.OL.TEAM).map(e=>(0,a.jsx)(W,{isAnnually:et},e.plan)),(Y||v&&!H)&&(0,a.jsx)(U,{})]})]}),t&&(0,a.jsxs)("div",{className:(0,k.cn)("w-full mt-6 max-md:flex-col text-center flex-shrink-0 flex items-center gap-[12px]",i?"justify-center":"justify-between"),children:[(0,a.jsx)("div",{className:(0,k.cn)("inline-block text-[13px] leading-[18px] text-[var(--text-tertiary)]",!es&&"mx-auto"),children:(0,a.jsx)(L.p,{S:P.I.t("Having a problem? <help>Go to Help center</help>."),components:{help:e=>(0,a.jsx)("a",{href:p.TE.BILLING_ISSUE,className:"text-[13px] leading-[18px] text-[var(--text-tertiary)] underline me-1",target:"_blank",rel:"noreferrer",children:e})}})}),!i&&(0,a.jsx)("div",{className:"inline-flex items-center gap-[8px] ",children:es&&(0,a.jsx)(G,{onUnsubscribe:er})})]})]})},G=e=>{let{onUnsubscribe:t}=e,i=(0,x.GV)(h.R.selectors.cancelAtPeriodEnd),s=(0,x.GV)(h.R.selectors.paymentPlatform),{open:n}=(0,o.s)(_.X),[l,c]=(0,M.useState)(!1),p=(0,d.w)(()=>s===v.a.stripe||(n({title:P.I.t("Unable to manage subscription"),text:P.I.t("This subscription was made through {platform}. Please manage it on the corresponding platform.",{platform:(0,b.BN)(s)}),btnText:P.I.t("Got it")}),!1)),f=(0,d.w)(async()=>{if((0,I.C)({eventName:"subscription_management"}),p())try{c(!0);let e=await T.F.SubscriptionService.billingPage({});window.open(e.url,"_blank","noreferrer noopener")}catch(e){(0,u.oR)({variant:"error",title:m.P.formatErrorToString(e)})}finally{c(!1)}});return s&&s!==v.a.stripe?null:(0,a.jsxs)(a.Fragment,{children:[!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{variant:"outline",color:"gray",size:"small",className:"outline-0 bg-transparent text-[13px] text-[var(--text-tertiary)] hover:opacity-100",onClick:t,children:P.I.t("Cancel subscription")}),(0,a.jsx)("span",{className:"w-[1px] h-[16px] bg-[var(--border-dark)]"})]}),(0,a.jsx)(r.A,{variant:"outline",size:"small",className:"outline-0 bg-transparent text-[13px] text-[var(--text-tertiary)] hover:opacity-100",icon:(0,a.jsx)(E.A,{size:16,color:"var(--icon-tertiary)"}),iconPosition:"right",loading:l,onClick:f,children:P.I.t("Edit billing")})]})}},79621:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var a=i(2635),r=i(46832),s=i(65623),n=i(56595),l=i(99515);function o(e){let{mv:t,number:i,height:n}=e,l=(0,r.G)(t,e=>{let t=(10+i-e%10)%10,a=t*n;return t>5&&(a-=10*n),a});return(0,a.jsx)(s.P.span,{style:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",y:l},children:i})}function c(e){let{place:t,value:i,height:r}=e,s=Math.floor(i/t),c=(0,n.z)(s,{stiffness:500,damping:50,mass:.6});return(0,l.useEffect)(()=>{c.set(s)},[c,s]),(0,a.jsx)("div",{style:{height:r,position:"relative",width:"1ch",fontVariantNumeric:"tabular-nums"},children:Array.from({length:10},(e,t)=>(0,a.jsx)(o,{mv:c,number:t,height:r},t))})}function d(e){let{value:t=99,fontSize:i=32,padding:r=1,gap:s=0,borderRadius:n=4,horizontalPadding:l=0}=e,o=i+r,d=t<10?[1]:t<100?[10,1]:t<1e3?[100,10,1]:[1e3,100,10,1];return(0,a.jsxs)("div",{dir:"ltr",style:{position:"relative",display:"inline-block"},children:[(0,a.jsx)("div",{style:{fontSize:i,display:"flex",gap:s,overflow:"hidden",borderRadius:n,paddingLeft:l,paddingRight:l,lineHeight:1},children:d.map(e=>(0,a.jsx)(c,{place:e,value:t,height:o},e))}),(0,a.jsx)("div",{style:{pointerEvents:"none",position:"absolute",top:0,bottom:0,left:0,right:0}})]})}},79349:(e,t,i)=>{"use strict";i.d(t,{n:()=>V});var a=i(2635),r=i(76743),s=i(78308),n=i(51416),l=i(75958),o=i(9205),c=i(59496),d=i(91452),u=i(27846),p=i(15543),m=i(17923),x=i(18184),h=i(93847),v=i(32236),f=i(14496),g=i(68720),w=i(57271),y=i(40757),b=i(29298),C=i(72551),S=i(74677),j=i(31342),I=i(47488),N=i(59260),k=i(19417),_=i(21731),T=i(53120),P=i(7487),L=i(14949);let E=null,M=!1;function A(){return(0,a.jsxs)("div",{className:"fixed inset-0 bg-opacity-50 flex items-center justify-center z-[99999] bg-[var(--background-mask)]",children:[(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full bg-[var(--background-tsp-menu-white,rgba(255,255,255,0.08))] backdrop-blur-[20px]"}),(0,a.jsx)("div",{className:"flex w-[400px] h-[180px] pt-8 pb-5 justify-center items-center gap-2 rounded-[20px] border border-[var(--border-main)] bg-[var(--background-menu-white)] shadow-[0px_8px_32px_0px_var(--shadow-XS)] relative z-10",children:(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[(0,a.jsx)(P.R,{color:"var(--text-primary)"}),(0,a.jsx)("p",{className:'text-[var(--text-primary)] text-center font-["SF_Pro"] text-base font-[600] leading-[22px] ml-2',children:w.I.t("Switching, please wait")})]})})]})}let R={show:()=>{M||(M=!0,(function(){if(!E){let e=document.createElement("div");document.body.appendChild(e),E=L.createRoot(e)}return E})().render((0,a.jsx)(A,{})))},hide:()=>{M&&(M=!1,E&&(E.unmount(),E=null))}};var F=i(78085),D=i(68209),U=i(17550);function V(e){let{className:t,planType:i,isAnnually:P,asLib:L=null,isPopular:E=!1}=e,{disabled:M,btnText:A,btnLoading:V,subscribeType:O,disabledTooltip:z}=function(e,t){var i;let a=(0,h.nW)(e,t),r=(0,d.GV)(y.R.selectors.membershipVersion),s=(0,d.GV)(y.R.selectors.nextMembershipVersion),n=(0,d.GV)(y.R.selectors.isVip),l=(0,d.GV)(y.R.selectors.nextMembershipInterval),{isLogin:o}=(0,d.GV)(y.R.selectors.authStatus),c=(0,d.GV)(y.R.selectors.paymentPlatform),u=(0,d.GV)(y.R.selectors.disablePayment),p=(0,d.GV)(y.R.selectors.cancelAtPeriodEnd),v=(0,d.GV)(y.R.selectors.userInfo),j=(0,d.GV)(C.u.selectors.role),I=(0,d.GV)(y.R.selectors.planKey),N=(0,h.i7)(I),k=(0,h.i7)(a),_=(0,d.GV)(y.R.selectors.isTeamAccount),T=(0,d.GV)(m.M.selectors.loadingKey),P=!!(T&&T!==a),L=T===a,E=r===b.b.Free,M=null===(i=S.h3.find(e=>e.plan===(0,h.wZ)(a)))||void 0===i?void 0:i.planName,A="",R=(0,h.wZ)(I)===e;if(!o)return{subscribeType:x.v6.upgrade,disabled:!1,btnText:w.I.t("Log in to subscribe")};if(u)return A=w.I.t("The payment service is currently unavailable"),{subscribeType:x.v6.notSupport,disabled:!0,btnText:w.I.t("Unavailable"),disabledTooltip:A};if((null==v?void 0:v.subscriptionStatus)===g.it.PastDueSubscriptionStatus)return{subscribeType:x.v6.pastDueSubscription,btnText:w.I.t("Upgrade to {planName}",{planName:M})};if(_)return e===x.OL.TEAM&&j===f.mb.OWNER?{subscribeType:x.v6.addSeats,disabled:!1,btnText:w.I.t("Add seats")}:{subscribeType:x.v6.switchToPersonal,disabled:!1,btnText:w.I.t("Switch to personal")};if(e===x.OL.TEAM)return{subscribeType:x.v6.init,disabled:!1,btnText:w.I.t("Get Team")};if(!(!c||c===b.a.stripe)&&!E)return{subscribeType:x.v6.notSupport,disabled:!0,btnText:w.I.t("Unavailable"),disabledTooltip:"live_event"===c?w.I.t("Event Status"):w.I.t("Unsupported payment platform: {platform}",{platform:c})};if(null==v?void 0:v.isMembershipTrial)return{subscribeType:x.v6.notSupport,disabled:!0,btnText:w.I.t("Unavailable")};if(e===x.OL.FREE)return n?{subscribeType:x.v6.notSupport,disabled:!0,btnText:w.I.t("Unavailable")}:{subscribeType:x.v6.notSupport,disabled:!0,btnText:w.I.t("Current plan")};if(p&&r!==b.b.Free)return k<N?{subscribeType:x.v6.reactiveDowngrade,btnText:w.I.t("Reactivate {planName}",{planName:M}),disabled:P,btnLoading:L}:k>N?{subscribeType:x.v6.reactiveUpgrade,btnText:w.I.t("Reactivate {planName}",{planName:M}),disabled:P,btnLoading:L}:{subscribeType:x.v6.reactive,btnText:w.I.t("Reactivate {planName}",{planName:M}),disabled:P,btnLoading:L};if(s&&!E){let e=(0,h.Tw)(s);if(a===I)return{isCurrentPlan:!0,subscribeType:x.v6.restore,btnText:w.I.t("Reactivate {planName}",{planName:M})};if(a===(0,h.nW)(e,"yearly"===l))return{subscribeType:x.v6.notSupport,disabled:!0,btnText:w.I.t("Next cycle plan")}}if(k===N)return{isCurrentPlan:!0,subscribeType:x.v6.same,disabled:!0,btnText:w.I.t("Current plan")};if(k<N){if((0,h.D)(I,a))return{subscribeType:x.v6.upgrade,disabled:P,btnLoading:L,btnText:w.I.t("Upgrade to {planName}",{planName:M})};{let e=w.I.t("Downgrade to {planName}",{planName:M});return R&&(e=t?w.I.t("Downgrade to annual"):w.I.t("Downgrade to monthly")),{subscribeType:x.v6.downgrade,disabled:P,btnLoading:L,btnText:e}}}let F=w.I.t("Upgrade to {planName}",{planName:M});return R&&(F=t?w.I.t("Upgrade to annual"):w.I.t("Upgrade to monthly")),{subscribeType:r===b.b.Free?x.v6.init:x.v6.upgrade,disabled:P,btnLoading:L,btnText:F}}(i,P),B=(0,d.GV)(y.R.selectors.planKey),W=i===x.OL.FREE&&("lib4"===L||"lib5"===L),K=W?w.I.t("Stay on Free"):A,G=V||!W&&M,H=(0,d.GV)(m.M.selectors.subscriptionSource),{submitSubscribe:Y}=(0,j.S)(),{checkAuthStatus:Z}=(0,p.D)(),{switchAccount:$}=(0,u.As)(),q=(0,d.GV)(C.u.selectors.listTeamResponse),{open:J}=(0,n.s)(T.u),{initExchangeInfo:Q,loadExchangeInfo:X}=(0,v.L)(),ee=(0,l.w)(async()=>{let e=null==q?void 0:q.userId;if(e){try{R.show(),await $(e),Q(),X()}catch(e){(0,o.oR)({title:c.P.formatErrorToString(e),variant:"error"})}setTimeout(()=>{R.hide()},800)}}),et=(0,l.w)(async()=>{if(G)return;if(W)return(0,N.C)({eventName:"promotion_dialog_click",extData:{plan:0,libType:(0,U.M)(L)}}),I.T.emit("subscriptionChange");if(!Z("webapp",{redirectUrl:F.bw.app.root()+"?paymentType=upgrade"}))return;if(O===x.v6.switchToPersonal){ee();return}if(O===x.v6.addSeats){J({type:"edit",source:H});return}if(i===x.OL.TEAM){J({isAnnually:P,source:H});return}let e=(0,h.nW)(i,P);if(e){"lib6"===L?(0,N.C)({eventName:"no_credits_upgrade_dialog_upgrade_click",extData:{planClick:e,planCurrent:B||x.zl.UNKNOWN}}):L?(0,N.C)({eventName:"promotion_dialog_click",extData:{plan:e}}):(0,N.C)({eventName:"upgrade_dialog_click",extData:{planKey:e,source:H}});try{if(L){let t={page:"home",event:"upgrade_promotion",reason:(0,U.M)(L),type:"init",item:k.J.formatPlan(e)};k.J.trackPayment(t)}else"pricing"===H?k.J.setMotivation({page:"pricing",event:"upgrade",reason:"upgrade"}):"session"===H?k.J.setMotivation({page:"session",event:"schedule_task_create",reason:"task_limit"}):"settings"===H&&k.J.setMotivation({page:"settings",event:"schedule_task_manage",reason:"task_limit"});await Y(O,{planKey:e})}catch(e){(0,o.oR)({variant:"error",title:c.P.formatErrorToString(e)})}}}),ei=E||"lib6"===L&&i===x.OL.PRO;return(0,a.jsx)(s.m,{title:z?(0,a.jsx)(D.p,{S:z,components:{contact:e=>(0,a.jsx)("a",{className:"underline hover:opacity-80 active:opacity-70",href:F.bw.feedback.issueType("FEATURE_MEMBERSHIP_OR_PAYMENT"),target:"_blank",rel:"noopener noreferrer",children:e})}}):null,children:(0,a.jsx)("span",{className:(0,_.cn)("flex w-full flex-col",t),children:(0,a.jsx)(r.A,{color:W?"black":ei?"brand":"black",size:i===x.OL.TEAM?"small":"large",shape:"round",disabled:V||G,loading:V,className:(0,_.cn)({"text-[13px]":i===x.OL.TEAM}),onClick:async()=>{await et()},children:(0,a.jsx)("span",{children:K})})})})}},54914:(e,t,i)=>{"use strict";i.d(t,{v:()=>w});var a=i(2635),r=i(33890),s=i(17260),n=i(97603);i(16834);var l=i(91452),o=i(27846),c=i(17923),d=i(57107),u=i(47488),p=i(59260),m=i(19417),x=i(21731),h=i(57271),v=i(8398),f=i(99515),g=i(71862);let w=e=>{let{onDisposed:t,title:i,source:w,featureList:y,motivation:b}=e,C=(0,l.jL)(),{fetchUserInfo:S}=(0,o.As)(),j=(0,l.GV)(d.s.selectors.getNewUserDoubleCreditsVariant);(0,f.useEffect)(()=>{if(null==j?void 0:j.value){var e;null===(e=n.K.experiment)||void 0===e||e.exposure("v2-new-user-substriptoin")}},[null==j?void 0:j.value]);let I=(null==j?void 0:j.value)==="hide_basic"||(null==j?void 0:j.value)==="hide_basic_highlight_plus"||(null==j?void 0:j.value)==="hide_basic_highlight_pro";return(0,f.useEffect)(()=>{(0,p.C)({eventName:"upgrade_dialog_show",extData:{source:w}}),C(c.M.actions.setSubscriptionSource(w)),S()},[w]),(0,f.useEffect)(()=>(u.T.on("subscriptionChange",()=>{t()}),()=>{u.T.off("subscriptionChange")}),[t]),(0,f.useEffect)(()=>{b&&m.J.setMotivation(b)},[b]),(0,a.jsx)(r.l,{onDisposed:t,closeIconVisible:!1,overlayClassName:"",className:(0,x.cn)("flex pt-0 flex-col max-w-full w-full h-full  bg-[var(--background-gray-main)] shadow-[0px_8px_32px_0px_var(--shadow-XS)] overflow-hidden","rounded-none max-h-[100%] h-[100%] "),headerClassName:"py-0 ps-4 md:pl-8 pe-[15%] w-full",title:null,children:(0,a.jsxs)("div",{className:"flex px-1  pb-6 flex-col flex-1  w-full h-[calc(100vh)] overflow-y-auto",children:[(0,a.jsx)(s.K,{className:(0,x.cn)("absolute z-50 top-[20px] ltr:right-[12px] rtl:left-[12px]","rounded-[100px] bg-[var(--background-menu-white)] shadow-[0px_0px_1.25px_0px_var(--shadow-M),_0px_5px_16px_0px_var(--shadow-M)]"),title:h.I.t("Close"),icon:v.A,onClick:()=>{t()}}),(0,a.jsx)("div",{className:"flex-1 w-full flex flex-col items-center justify-center px-4",children:(0,a.jsxs)("div",{className:(0,x.cn)("max-w-full w-[1400px] m-auto overflow-hidden",I?"w-[1036px]":"w-[1400px]"),children:[(0,a.jsx)("div",{className:"pt-6 mb-[24px] text-[var(--text-primary)] text-center md:text-[32px] font-georgia text-2xl font-[400] leading-[34px] shrink-0",children:i||h.I.t("Upgrade your plan for more credits")}),(0,a.jsx)(g.U,{featureList:y,planListHelperTips:!0})]})})]})})}},36677:(e,t,i)=>{"use strict";i.d(t,{f:()=>j});var a=i(2635),r=i(76743),s=i(33890),n=i(38933),l=i(93578),o=i(19737),c=i(85078),d=i(51416),u=i(63364),p=i(75958),m=i(21731),x=i(85380),h=i(49167),v=i(93347),f=i(25850),g=i(1518),w=i(57271),y=i(83532),b=i(99515),C=i(46859);function S(e){return(0,a.jsxs)(s.l,{onDisposed:e.onDisposed,width:440,closeIconVisible:!1,headerClassName:"p-0",className:"flex flex-col items-center px-8 py-10",children:[(0,a.jsx)(C.f,{size:80}),(0,a.jsx)("h2",{className:"text-[20px] leading-[26px] text-[var(--text-primary)] font-bold text-center mt-6 mb-2",children:w.I.t("Submitted Successfully")}),(0,a.jsx)("p",{className:"mb-12 text-[14px] leading-[22px] font-normal text-[var(--text-tertiary)]",children:w.I.t("We've received your inquiry and will contact you shortly via email.")}),(0,a.jsx)(r.A,{size:"large",onClick:e.onDisposed,className:"w-[300px]",children:w.I.t("Got it")})]})}function j(e){var t;let{cb:i,onDisposed:C}=e,j=[{label:w.I.t("I'd love to learn more about {productName} team",{productName:f.KR}),value:"I'd love to learn more about Manus Team"},{label:w.I.t("I'm interested in {productName} enterprise (coming soon)",{productName:f.KR}),value:"I'm interested in Manus Enterprise (coming soon)"},{label:w.I.t("I'd like to schedule a demo"),value:"I'd like to schedule a demo"},{label:w.I.t("I need help choosing a plan"),value:"I need help choosing a plan"},{label:w.I.t("Other"),value:"Other"}],I=["<100","100-299","300-1999","2000+"],[N,k]=(0,b.useState)(I[0]),[_,T]=(0,b.useState)(j[0].value),{run:P,isLoading:L}=(0,c.W)(),{open:E}=(0,d.s)(S),M={firstName:[{required:!0,message:w.I.t("Please enter your first name")}],lastName:[{required:!0,message:w.I.t("Please enter your last name")}],email:[{required:!0,message:w.I.t("Please enter your email")},{validator:x.xf,message:w.I.t("Invalid email address.")}],helpContent:[{required:!0,message:w.I.t("Please enter content")}]},{formValues:A,formError:R,handleValidate:F,handleChange:D}=(0,u.m)({initValues:{firstName:"",lastName:"",email:"",helpContent:""},validator:M}),U=(0,p.w)(()=>{F("onValidate",A)||P(async()=>{await v.F.UserPublicService.submitFeedback({type:g.MW.TEAM_ISSUE,title:_,content:A.helpContent,email:A.email,extraData:{firstName:A.firstName||"",lastName:A.lastName||"",companySize:N}}),null==C||C(),i&&i(),E()})});return(0,a.jsxs)(s.l,{title:w.I.t("Get in touch with sales"),onDisposed:C,headerClassName:"px-5",width:450,children:[(0,a.jsxs)("div",{className:"px-5 pb-3 flex flex-col gap-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:w.I.t("We're here to answer your questions and find the right plan for your team.")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex gap-4 [&>*]:flex-1",children:[(0,a.jsx)(h.ZQ,{id:"firstName",error:R.firstName,value:A.firstName,onChange:e=>{D("firstName",e.target.value)},onBlur:()=>F("onBlur",A),label:w.I.t("First name"),inputCls:"bg-[var(--fill-tsp-white-main)]"}),(0,a.jsx)(h.ZQ,{id:"lastName",error:R.lastName,value:A.lastName,onChange:e=>{D("lastName",e.target.value)},onBlur:()=>F("onBlur",A),label:w.I.t("Last name"),inputCls:"bg-[var(--fill-tsp-white-main)]"})]}),(0,a.jsx)(h.ZQ,{id:"email",error:R.email,value:A.email,onChange:e=>{D("email",e.target.value)},onBlur:()=>F("onBlur",A),label:w.I.t("Work email"),inputCls:"bg-[var(--fill-tsp-white-main)]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"w-full flex items-center justify-between gap-[12px] mb-[10px]",children:w.I.t("Company size")}),(0,a.jsx)("div",{className:"flex gap-2 [&>*]:flex-1",children:I.map(e=>(0,a.jsx)(r.A,{variant:"outline",className:(0,m.cn)(N===e&&"bg-[var(--fill-tsp-white-light)]"),onClick:()=>k(e),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"w-full flex items-center justify-between gap-[12px]",children:w.I.t("How can we help?")}),(0,a.jsx)(l.A,{content:(0,a.jsx)(n.r,{items:j.map(e=>({label:e.label,checked:e.value===_,onClick:()=>{T(e.value)}}))}),children:(0,a.jsxs)("div",{className:"flex items-center ps-4 pe-3 py-2 bg-[var(--fill-tsp-white-main)] rounded-[10px]",children:[(0,a.jsx)("span",{className:"flex-1 whitespace-nowrap overflow-hidden text-ellipsis",children:null===(t=j.find(e=>e.value===_))||void 0===t?void 0:t.label}),(0,a.jsx)(y.A,{size:16})]})}),(0,a.jsx)(h.eI,{id:"helpContent",error:R.helpContent,children:(0,a.jsx)("div",{className:(0,m.cn)("w-full rounded-[10px] bg-[var(--fill-tsp-white-main)] max-h-[260px] overflow-y-auto",R.helpContent&&"ring-[1.5px] ring-[var(--Button-secondary-error-border)]"),children:(0,a.jsx)(o.T,{value:A.helpContent,onChange:e=>{D("helpContent",e.target.value)},onBlur:()=>F("onBlur",A),placeholder:w.I.t("What would you like to learn more about?"),autoResize:!0,className:(0,m.cn)("leading-[22px] resize-none border-none overflow-hidden","focus-visible:ring-0 focus-visible:ring-offset-0")})})})]})]}),(0,a.jsxs)("div",{className:"p-5 flex gap-[10px] [&>*]:flex-1",children:[(0,a.jsx)(r.A,{color:"gray",onClick:()=>C(),children:w.I.t("Cancel")}),(0,a.jsx)(r.A,{color:"black",loading:L,onClick:()=>U(),children:w.I.t("Send request")})]})]})}},46936:(e,t,i)=>{"use strict";i.d(t,{g:()=>P});var a=i(2635),r=i(76743),s=i(33890),n=i(41661),l=i(61640),o=i(51416),c=i(75958),d=i(9205);function u(e){let{color:t="currentColor",size:i=16,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 7",fill:"none",width:2*i,height:i,color:t,...r,children:(0,a.jsx)("path",{d:"M5.50947 5.58726C6.30437 6.47454 7.69383 6.47454 8.48873 5.58726L13.4943 0H0.503906L5.50947 5.58726Z",fill:"currentColor"})})}u._id="49e61f32a29278ab08fd5b9f1cad6ae2";var p=i(19463),m=i(16834),x=i(59496),h=i(91452),v=i(18184),f=i(93847),g=i(31342),w=i(72551),y=i(27810),b=i(21731),C=i(36677),S=i(25850),j=i(57271),I=i(68209),N=i(20948),k=i(21151),_=i(99515),T=i(71918);function P(e){var t,i,r;let{onDisposed:n}=e,l=(0,h.GV)(w.u.selectors.currentTeamInfo),[o,c]=(0,_.useState)(m.Q9.DEFAULT_CREDITS),[d,u]=(0,_.useState)(null!==(t=null==l?void 0:l.autoDeduction)&&void 0!==t&&t),[p,x]=(0,_.useState)(null!==(i=null==l?void 0:l.singleDeductionAmount)&&void 0!==i?i:m.ep.MIN_SINGLE_AMOUNT),[f,g]=(0,_.useState)(null!==(r=null==l?void 0:l.monthlyDeductionLimit)&&void 0!==r?r:m.ep.DEFAULT_MAX_MONTH_DEDUCTION);return l?(0,a.jsx)(s.l,{className:"border border-[var(--border-main)] bg-[var(--background-gray-main)]",onDisposed:n,width:500,children:(0,a.jsxs)("div",{className:"flex flex-col gap-5 px-8 pb-8",children:[(0,a.jsx)("div",{className:"text-[var(--text-primary)] text-center font-[Georgia] text-[32px] leading-[34px]",children:j.I.t("Buy add-on credits")}),(0,a.jsx)(L,{credits:o,onCreditsChange:c,children:(0,a.jsx)(E,{item:{plan:v.zl.TEAM_ADDON,price:o/100,credits:o},autoDeductionConfig:{enableAutoDeduction:d,singleAmount:p,monthLimit:f}})}),(0,a.jsx)(T.n,{enableAutoDeduction:d,onEnableAutoDeductionChange:u,singleAmount:p,monthLimit:f,autoDeductionChange:(e,t)=>{x(e),g(t)}}),(0,a.jsx)(M,{onDisposed:n})]})}):null}function L(e){let{credits:t,onCreditsChange:i,children:r}=e,s=(0,_.useRef)(null),o=t/(m.Q9.MAX_CREDITS-m.Q9.MIN_CREDITS)*100,d=(0,c.w)(e=>{if((0,N.A)(e))return;let t=100*Math.ceil(Number(e)/100),a=t;t<m.Q9.MIN_CREDITS?a=m.Q9.MIN_CREDITS:t>m.Q9.MAX_CREDITS&&(a=m.Q9.MAX_CREDITS),i(a),s.current&&(s.current.value=a.toString(),s.current.size=a.toString().length+1)}),x=(0,c.w)(e=>{if(!s.current)return;let t=e.target.value.replace(/[^0-9]/g,"");s.current.value=t,s.current.size=t.length+1}),h=(0,c.w)(()=>{s.current&&s.current.focus()}),v=t/100;return(0,a.jsxs)("div",{className:"flex flex-col gap-5 w-full rounded-2xl border px-4 pt-5 pb-5 bg-[var(--background-card-gray)]",children:[(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("div",{className:"h-12",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:(0,b.cn)("w-fit flex flex-col items-center absolute -translate-x-1/2"),style:{left:"calc(".concat(o,"% + 1px)")},children:[(0,a.jsx)("div",{className:"bg-[var(--Tooltips-main)] rounded-lg flex justify-center items-center",children:(0,a.jsxs)("div",{className:"group flex-1 text-sm font-semibold flex items-center gap-1 ps-3 pe-2 py-[10px] cursor-text ",onClick:()=>{h()},children:[(0,a.jsx)(n.p,{onInputRef:s,maxLength:7,size:t.toString().length+1,className:(0,b.cn)("text-[var(--text-white)] border-none text-center bg-[transparent]  rounded-none h-[20px] leading-5 w-auto p-0","focus:outline-none focus:ring-0 focus:border-none","group-hover:underline group-hover:underline-offset-2"),defaultValue:t,onChange:x,onBlur:e=>d(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t;d(null===(t=s.current)||void 0===t?void 0:t.value)}}}),(0,a.jsx)(k.A,{size:14,color:"var(--icon-white-tsp)"})]})}),(0,a.jsx)(u,{size:7,color:"var(--Tooltips-main)"})]})})}),(0,a.jsx)(l.u,{className:"h-[20px] w-full relative flex items-center cursor-pointer",value:t,min:m.Q9.MIN_CREDITS,max:m.Q9.MAX_CREDITS,step:m.Q9.CREDITS_STEP,onValueChange:e=>{void 0===e||e<m.Q9.MIN_CREDITS||e>m.Q9.MAX_CREDITS||(i(e),s.current&&(s.current.value=e+""))},classNames:{track:"relative flex-grow h-2 rounded-full bg-[var(--fill-tsp-white-main)]",range:"absolute bg-[var(--icon-primary)] rounded-full h-full",thumb:"border-none drop-shadow-none active:outline-none w-[16px] h-[16px] bg-[var(--text-white)] "}}),(0,a.jsxs)("div",{className:"flex justify-between mt-[6px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.L,{size:16,color:(0,b.cn)("var(--text-tertiary)")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:(0,S.Ql)(m.Q9.MIN_CREDITS)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.L,{size:16,color:(0,b.cn)("var(--text-tertiary)")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]",children:(0,S.Ql)(m.Q9.MAX_CREDITS)})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 border-t border-[var(--border-dark)] px-4 pt-5 ",children:[(0,a.jsxs)("div",{className:"flex justify-between  ",children:[(0,a.jsx)("div",{className:"text-[16px] text-[var(--text-secondary)] leading-[22px] font-semibold",children:j.I.t("Credits")}),(0,a.jsx)("div",{className:"text-[18px] text-[var(--text-primary)] leading-6 font-semibold",children:(0,S.Ql)(t)})]}),(0,a.jsxs)("div",{className:"flex justify-between ",children:[(0,a.jsx)("div",{className:"text-[16px] text-[var(--text-secondary)] leading-[22px] font-semibold",children:j.I.t("Total amount")}),(0,a.jsx)("div",{className:"text-[18px] text-[var(--text-primary)] leading-6 font-semibold",children:(0,f.$g)(v)})]})]}),r]})}function E(e){let{item:t,autoDeductionConfig:i}=e,{enableAutoDeduction:s,singleAmount:n,monthLimit:l}=i,[o,c]=(0,_.useState)(!1),{buyAddonCredits:u}=(0,g.S)(),{updateTeamDeductionSetting:p}=(0,y.d)(),m=async e=>{c(!0);try{await p({autoDeduction:s,singleDeductionAmount:n,monthlyDeductionLimit:l})}catch(e){(0,d.oR)({variant:"error",title:x.P.formatErrorToString(e)})}try{let i=w.u.selectors.currentTeamInfo(h.M_.getState());if(!i)return;await u({planKey:e,quantity:t.price,teamUid:i.teamUid})}catch(e){(0,d.oR)({variant:"error",title:x.P.formatErrorToString(e)})}finally{c(!1)}};return(0,a.jsx)(r.A,{size:"large",color:"black",shape:"round",onClick:()=>{m(t.plan)},loading:o,className:"max-sm:h-[32px]",children:(0,a.jsx)("span",{children:j.I.t("Buy now")})})}function M(e){let{onDisposed:t}=e,{open:i}=(0,o.s)(C.f),r=[(0,a.jsx)("p",{children:j.I.t("Only {product} membership users can buy add-on credits.",{product:S.KR})},"rule-1"),(0,a.jsx)("p",{children:j.I.t("Add-on points can only be used during the membership period and do not expire.")},"rule-2"),(0,a.jsx)("div",{children:(0,a.jsx)(I.p,{S:j.I.t("If you have any questions? <contact>Contact us for help</contact>."),components:{contact:e=>(0,a.jsx)("a",{onClick:()=>{i({cb:t})},className:"text-[var(--text-secondary)] underline underline-offset-2 cursor-pointer",children:e})}})},"rule-3")];return(0,a.jsxs)("div",{className:(0,b.cn)("w-full pt-3.5 border-t border-[var(--border-main)] flex flex-col gap-2 text-xs text-[var(--text-tertiary)]"),children:[(0,a.jsx)("div",{className:"text-[13px] leading-[18px] text-[var(--text-secondary)] font-medium",children:j.I.t("Rules")}),(0,a.jsx)("div",{className:"flex flex-col gap-0.5 w-full",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsxs)("div",{children:[t+1,"."]}),e]},t))})]})}},71918:(e,t,i)=>{"use strict";i.d(t,{n:()=>f});var a=i(2635),r=i(88387),s=i(78308),n=i(75958),l=i(16834),o=i(93847),c=i(21731),d=i(25850),u=i(57271),p=i(73518),m=i(89547);let{MIN_MONTH_LIMIT:x,MIN_SINGLE_AMOUNT:h,DEFAULT_MAX_MONTH_DEDUCTION:v}=l.ep;function f(e){let{enableAutoDeduction:t,onEnableAutoDeductionChange:i,singleAmount:l=h,monthLimit:f=v,autoDeductionChange:g}=e,w=(0,n.w)(e=>"".concat(e?(0,o.$g)(e):"$0"," = ").concat((0,d.Ql)(100*e)," ").concat(u.I.t("credits")));return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,a.jsxs)("span",{className:"flex gap-1 items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:u.I.t("Enable auto-deduction")}),(0,a.jsx)(s.m,{title:(0,a.jsx)("div",{className:"u-break-words max-w-[300px]",children:u.I.t("To ensure uninterrupted team usage, credits will be automatically purchased when balance is depleted.")}),children:(0,a.jsx)(p.A,{size:16,color:"var(--icon-tertiary)"})})]}),(0,a.jsx)(r.d,{checked:t,onCheckedChange:i,size:"large"})]}),(0,a.jsxs)("div",{className:(0,c.cn)(" transition-all duration-300 ease-in-out ",t?"opacity-100 max-h-[78px] mt-[10px]":"opacity-0 max-h-0 overflow-hidden"),children:[(0,a.jsxs)("div",{className:(0,c.cn)("flex justify-between items-center w-full mb-2"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-1",children:(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-[13px] leading-[18px]",children:u.I.t("Single deduction amount")})}),(0,a.jsx)(m.Y,{toolTip:w,className:"w-[90px] h-8 px-3 py-2 bg-[var(--fill-tsp-white-main)] rounded-lg flex items-center",inputClassName:"text-start rounded-none border-none p-0 h-auto shadow-none bg-transparent text-[var(--theme-text-primary)] text-sm font-normal focus-visible:ring-0 w-full",prefix:(0,a.jsx)("span",{className:"text-[var(--theme-text-quaternary,#8C8C8C)] text-sm font-medium select-none",children:"$"}),defaultValue:l,onChange:e=>{g(e,f>e?f:e)},controls:!1,min:h})]}),(0,a.jsxs)("div",{className:(0,c.cn)("flex justify-between items-center w-full"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-1",children:(0,a.jsx)("div",{className:"text-[var(--text-tertiary)] text-[13px] leading-[18px]",children:u.I.t("Monthly deduction maximum")})}),(0,a.jsx)(m.Y,{className:"w-[90px] h-8 px-3 py-2 bg-[var(--fill-tsp-white-main)] rounded-lg flex items-center",inputClassName:"text-start rounded-none border-none p-0 h-auto shadow-none bg-transparent text-[var(--theme-text-primary)] text-sm font-normal focus-visible:ring-0 w-full",toolTip:w,min:x>l?x:l,prefix:(0,a.jsx)("span",{className:"text-[var(--theme-text-quaternary,#8C8C8C)] text-sm font-medium select-none",children:"$"}),defaultValue:f,onChange:e=>{g(l,e)},controls:!1},l)]})]})]})}},89547:(e,t,i)=>{"use strict";i.d(t,{Y:()=>m});var a=i(2635),r=i(17260),s=i(41661),n=i(78308),l=i(75958),o=i(21731),c=i(20948),d=i(37134),u=i(12150),p=i(99515);function m(e){let{onChange:t,min:i,minMsg:m,max:x,maxMsg:h,defaultValue:v,controls:f=!0,prefix:g,className:w,inputClassName:y,disabled:b,toolTip:C,autoFocus:S,toolTipPlacement:j="right"}=e,[I,N]=(0,p.useState)(String(v)||""),k=(0,l.w)(e=>(0,c.A)(e)?i||0:Number(e)),_=p.useRef(null),T=(0,l.w)((e,t,i)=>{let a=k(String(e).replace(/[^0-9]/g,""));return void 0!==t&&a<t&&(a=t),void 0!==i&&a>i&&(a=i),a}),P=e=>{N(String(e).replace(/[^0-9]/g,"")),null==t||t(T(e))},L=e=>{let a=T(String(k(e)),i,x);N(String(a)),null==t||t(a)},E=T(k(I),i,x),M=!(0,c.A)(i)&&E<=i,A=!(0,c.A)(x)&&E>=x;return(0,a.jsx)(n.m,{placement:j,title:null==C?void 0:C(Number(I)),children:(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-1",w),children:[f&&(0,a.jsx)(r.K,{title:M?m:"",size:"medium",variant:"outline",icon:d.A,iconClassName:"size-4",disabled:M||b,onClick:()=>P(E-1)}),(0,a.jsxs)("div",{className:"flex items-center gap-1",onClick:()=>{var e;null===(e=_.current)||void 0===e||e.focus()},children:[g,(0,a.jsx)(s.p,{onInputRef:_,className:(0,o.cn)("w-[100px] h-9 py-2 ps-4 pe-3 text-center text-[var(--text-primary)] text-sm font-[500]","bg-[var(--fill-tsp-white-main)]  rounded-lg",y),autoFocus:S,value:I,placeholder:E.toString(),onChange:e=>P(e.target.value),onBlur:e=>L(e.target.value),disabled:b})]}),f&&(0,a.jsx)(r.K,{title:A?h:"",size:"medium",variant:"outline",icon:u.A,iconClassName:"size-4",className:"w-9 p-0",disabled:A||b,onClick:()=>P(E+1)})]})})}},53120:(e,t,i)=>{"use strict";i.d(t,{u:()=>el});var a=i(2635),r=i(98637),s=i(51416),n=i(75958),l=i(9205),o=i(97603),c=i(16834),d=i(59496),u=i(91452),p=i(40757),m=i(27846),x=i(4232),h=i(17923),v=i(18184),f=i(93847),g=i(31342),w=i(72551),y=i(27810),b=i(47488),C=i(19417),S=i(21731),j=i(50220),I=i(93347),N=i(89310),k=i(68720),_=i(57271),T=i(99515);function P(e){let{color:t="var(--icon-disable)",size:i=16,...r}=e;return(0,a.jsx)("svg",{viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:(0,a.jsx)("circle",{id:"Ellipse 544",cx:"10.5",cy:"10",r:"9.5",stroke:"currentColor"})})}function L(e){let{color:t="var(--icon-blue)",size:i=16,...r}=e;return(0,a.jsx)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:(0,a.jsx)("circle",{id:"Ellipse 544",cx:"10",cy:"10",r:"7",stroke:"currentColor",strokeWidth:"6"})})}P._id="cc7e6998b1855a84700567c970fdee72",L._id="450381f7b8fa3ef4bc90014bee0cfebc";var E=i(68209);function M(e){let{vm:t}=e,{teamState:i,setState:r}=t,{getPlanDiscount:s}=(0,g.S)(),n=s(v.OL.TEAM),{getPlanInfo:l}=(0,g.S)();return(0,a.jsx)("div",{className:"flex items-center w-full mt-4 mb-5 gap-3",children:[!1,!0].map((e,t)=>{let s=i.isYearly===e,o=l((0,f.nW)(v.OL.TEAM,e));return(0,a.jsxs)("div",{className:(0,S.cn)("flex-1 p-4 rounded-xl flex flex-col gap-2 cursor-pointer border clickable relative","border-[var(--border-dark)] bg-[var(--background-tsp-menu-white)]","hover:border-[var(--Button-primary-brand)] hover:bg-[var(--fill-blue)]",s&&" border-[var(--Button-primary-brand)] bg-[var(--fill-blue)]"),onClick:()=>{r({isYearly:e})},children:[s?(0,a.jsx)(L,{size:20,color:"var(--Button-primary-brand)"}):(0,a.jsx)(P,{size:20}),e&&(0,a.jsx)("div",{className:"absolute right-0 top-0 bg-[var(--fill-blue)] py-0.5 px-2 rounded-tr-xl rounded-bl-lg",children:(0,a.jsx)("div",{className:"text-[var(--text-blue)] text-xs font-medium",children:(0,a.jsx)(E.p,{S:_.I.t("Save <percent></percent>"),components:{percent:()=>(0,a.jsxs)("span",{dir:"ltr",children:[n,"%"]})}})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"text-[var(--text-primary)] text-lg font-semibold",children:["US ",(0,f.$g)(null==o?void 0:o.displayPrice)]}),(0,a.jsx)("div",{className:"text-[var(--text-secondary)] text-sm",children:e?_.I.t("per member/year"):_.I.t("per member/month")})]})]},t)})})}var A=i(71918);function R(e){let{vm:t}=e,{teamState:i,setState:r}=t;return(0,a.jsx)(A.n,{enableAutoDeduction:i.autoDeduction,onEnableAutoDeductionChange:e=>r({autoDeduction:e}),singleAmount:i.singleDeductionAmount,monthLimit:i.monthlyDeductionLimit,autoDeductionChange:(e,t)=>{r({singleDeductionAmount:e,monthlyDeductionLimit:t})}})}function F(e){let{className:t,children:i}=e;return(0,a.jsx)("div",{className:(0,S.cn)("w-full flex p-4 flex-col gap-4 rounded-[12px] ","border border-[var(--border-dark)] bg-[var(--background-menu-white)]",t),children:i})}var D=i(76743),U=i(53708);function V(e){let{vm:t,className:i}=e,{teamState:r}=t,s=(0,u.GV)(w.u.selectors.currentTeamInfo),n=(0,u.GV)(p.R.selectors.userInfo),l=(0,u.GV)(p.R.selectors.isVip),o=(0,U.W)(()=>{if("add"===r.type||!l||(null==n?void 0:n.cancelAtPeriodEnd))return!1;for(let e of["seats","isYearly","autoDeduction","monthlyDeductionLimit","singleDeductionAmount"])if(r[e]!==(null==s?void 0:s[e]))return!1;return!0}),c=(0,U.W)(()=>"edit"===r.type?(null==n?void 0:n.cancelAtPeriodEnd)?_.I.t("Reactivate"):_.I.t("Confirm"):_.I.t("Upgrade to Team"));return(0,a.jsx)("div",{className:(0,S.cn)("flex flex-col",i),children:(0,a.jsx)(D.A,{variant:"default",size:"large",color:"black",className:(0,S.cn)("w-full ",o?"":"cursor-pointer"),disabled:o,loading:r.submitLoading,onClick:async()=>{t.handleConfirm()},children:c})})}var O=i(89547);function z(e){let{vm:t}=e,{teamState:i}=t,r=(0,n.w)(e=>e<=i.minSeats?_.I.t("Minimum {count} seats",{count:i.minSeats}):"");return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-[var(--text-secondary)]",children:_.I.t("Team seats")}),(0,a.jsx)(O.Y,{defaultValue:i.seats,toolTip:r,toolTipPlacement:"top",onChange:e=>{t.setState({seats:e}),t.calculatePrice(e)},min:i.minSeats})]})}var B=i(33890),W=i(93578),K=i(78308),G=i(78140),H=i(36677),Y=i(78085),Z=i(73518);function $(e){var t;let{onDisposed:i,children:r}=e,{getPlanInfo:n}=(0,g.S)(),l=(0,f.nW)(v.OL.TEAM,!1),o=(0,u.GV)(p.R.selectors.userInfo),c=n(l),{open:d}=(0,s.s)(H.f);if(c)return(0,a.jsx)(B.l,{onDisposed:i,closeIconVisible:!0,overlayClassName:"",className:(0,S.cn)("p-[24px]"),headerClassName:"py-0 ps-4 pe-[15%] w-full",title:null,children:(0,a.jsxs)("div",{className:"flex flex-col max-w-full w-[410px]",children:[(0,a.jsx)("div",{className:"flex flex-col w-full gap-2 ",children:(0,a.jsxs)("div",{className:"flex items-center content-center text-[var(--text-primary)] text-[18px] font-[700] leading-[22px]",children:[(0,a.jsx)("span",{className:"font-georgia",children:c.title}),(0,a.jsx)("span",{className:"  rounded-tl-[10px] rounded-tr-[10px] rounded-br-[10px] border border-[var(--border-dark)] text-[12px] leading-[16px] text-[var(--text-tertiary)] px-[6px] ms-[6px] font-medium",children:_.I.t("Beta")})]})}),r,(0,a.jsx)("div",{className:"w-full flex flex-col gap-[6px] mt-[28px]",children:null===(t=c.benefits)||void 0===t?void 0:t.map((e,t)=>e.match&&!e.match(o)?null:(0,a.jsxs)("div",{className:"w-full flex items-start self-start gap-2",children:[(0,a.jsx)("div",{className:"flex items-center self-start mt-[3px]",children:e.icon?T.createElement(e.icon,{size:16,color:"var(--icon-primary)"}):(0,a.jsx)(G.S,{size:16,color:"var(--icon-primary)"})}),(0,a.jsx)("div",{className:"flex-1 items-center gap-1",children:(0,a.jsxs)("div",{className:"text-[var(--text-secondary)] text-sm gap-",children:["string"==typeof e.label?(0,a.jsx)(W.A,{trigger:["hover","touch"],placement:"top",showArrow:!0,arrowProps:{className:"border-[var(--border-dark)]"},className:"w-[294px] max-w-[90%]  p-[16px] rounded-[12px] border-[0.5px] border-[var(--border-dark)] bg-[var(--background-menu-white)] shadow-[0px_4px_11px_0px_var(--shadow-M)]",disabled:!e.popover,content:e.popover,children:(0,a.jsx)("span",{className:(0,S.cn)("me-[6px]",{"underline decoration-dotted cursor-help hover:opacity-80":!!e.popover}),children:(0,a.jsx)(E.p,{S:e.label,components:{b:e=>(0,a.jsx)("span",{className:"font-[500] text-[var(--text-primary)]",children:e}),link:e=>(0,a.jsx)("a",{className:"inline-block underline hover:opacity-80 text-[var(--text-tertiary)] text-sm leading-[22px]",href:Y.bw.help.credits,target:"_blank",rel:"noopener noreferrer",children:e})}})})}):e.label,!!e.badge&&(0,a.jsx)(E.p,{S:e.badge,components:{limited:e=>(0,a.jsx)("span",{className:"inline-block relative rounded-full border border-[var(--icon-disable)] bg-[var(--fill-tsp-white-light)] text-[11px] leading-[16px] text-[var(--text-primary)] px-[8px]  font-medium",children:e})}}),e.tooltip&&(0,a.jsx)(K.m,{title:e.tooltip,children:(0,a.jsx)(Z.A,{size:16,color:"var(--icon-tertiary)",className:"relative top-[-1px] ml-[4px] inline-block cursor-help"})})]})})]},t))}),(0,a.jsxs)("div",{className:"flex items-center mt-[26px] gap-1 text-[var(--text-tertiary)]",children:[(0,a.jsxs)("div",{className:"text-[13px]  leading-[18px]",children:[" ",_.I.t("Want to learn more?")]}),(0,a.jsx)(D.A,{variant:"link",className:"text-[var(--text-tertiary)]",onClick:()=>{d({})},children:_.I.t("Contact sales")})]})]})})}var q=i(21496);function J(e){let{className:t,vm:i}=e,{goStripeBilling:r}=(0,g.S)(),{open:n}=(0,s.s)(q.d),o=(0,u.GV)(h.M.selectors.stripeBillingLoading);return(0,u.GV)(p.R.selectors.cancelAtPeriodEnd)?null:(0,a.jsxs)("div",{className:(0,S.cn)("flex items-center justify-center gap-2.5 ",t),children:[(0,a.jsx)("div",{className:"flex-1 flex flex-row-reverse",children:(0,a.jsx)(D.A,{variant:"link",className:"text-[var(--text-tertiary)] no-underline font-normal text-[13px] leading-[18px] px-2 py-[7px]",onClick:()=>{n({onConfirm:async e=>{let{cancelReason:t,comment:a}=e;await I.F.SubscriptionService.cancel({cancelReason:t,comment:a}),await i.subscriptionChangeCallback(),i.onDisposed(),(0,l.oR)({variant:"success",title:_.I.t("Subscription cancelled.")})}})},children:_.I.t("Cancel subscription")})}),(0,a.jsx)("div",{className:"border-r h-[14px]  border-[var(--border-dark)]"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(D.A,{variant:"link",className:"text-[var(--text-tertiary)] no-underline font-normal text-[13px] leading-[18px] pxj-2 py-[7px]",onClick:r,disabled:o,children:_.I.t("Edit payment method")})})]})}function Q(e){let{onDisposed:t,children:i}=e;return(0,a.jsx)(B.l,{onDisposed:t,title:_.I.t("Edit billing"),onBack:()=>{},className:"w-[500px] max-w-[98%] rounded-[20px] border border-[var(--border-main)] bg-[var(--background-gray-main)]",headerClassName:(0,S.cn)("pb-5"),children:(0,a.jsx)("div",{className:(0,S.cn)("px-5 flex flex-col gap-3 text-sm pb-5"),children:i})})}var X=i(88387);function ee(e){let{vm:t}=e,{teamState:i,setState:r}=t,{getPlanDiscount:s}=(0,g.S)(),n=s(v.OL.TEAM),l=(0,u.GV)(w.u.selectors.currentTeamInfo),o=(0,u.GV)(p.R.selectors.membershipVersion),c=(0,u.GV)(p.R.selectors.membershipInterval),d=(0,U.W)(()=>null!=l&&!!l.nextSeats&&null!=l&&!!l.seats&&(null==l?void 0:l.nextSeats)<(null==l?void 0:l.seats)||"edit"===i.type&&"team"===o&&"yearly"===c);return(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-[var(--text-secondary)]  text-sm font-[500]",children:_.I.t("Pay annually")}),n&&(0,a.jsx)("div",{className:"flex rounded-[10px] bg-[var(--fill-blue)] py-0.5 px-2 justify-center items-center  text-[var(--text-blue)] text-xs font-[500] ",children:(0,a.jsx)(E.p,{S:_.I.t("Save <percent></percent>"),components:{percent:()=>(0,a.jsxs)("span",{dir:"ltr",children:[n,"%"]})}})})]}),(0,a.jsx)(X.d,{size:"large",checked:i.isYearly,disabled:d,onCheckedChange:e=>{r({isYearly:e}),Promise.resolve().then(()=>{t.calculatePrice()})}})]})}var et=i(7487),ei=i(18214),ea=i(25850);function er(e){var t;let{vm:i}=e,{teamState:r}=i,{getPlanInfo:s}=(0,g.S)(),n=s((0,f.nW)(v.OL.TEAM,r.isYearly)),l=r.seats*((null==n?void 0:n.credits)||0),o=(0,U.W)(()=>{var e;let t=new Date(1e3*Number(null===(e=r.editPreviewData)||void 0===e?void 0:e.nextPaymentAttempt));return ei.F.format(t,"PP")}),c=(0,U.W)(()=>"edit"===r.type&&r.editPreviewData?(0,f.$g)(r.editPreviewData.total):(0,f.$g)(r.seats*((null==n?void 0:n.displayPrice)||0)));return n?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-8",children:["add"===r.type?(0,a.jsxs)("div",{className:"flex flex-col ",children:[(0,a.jsx)("span",{className:"text-sm  font-[500] text-[var(--text-secondary)]",children:_.I.t("Total credits")}),(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] font-[400] text-sm leading-[22px]",children:_.I.t("Shared by all team members")})]}):(0,a.jsx)("span",{className:"text-[var(--text-tertiary)]  text-[13px] leading-[18px]",children:_.I.t("Total shared credits")}),(0,a.jsxs)("span",{className:"text-[var(--text-primary)] font-[600]",children:[(0,ea.Ql)(l),(0,a.jsxs)("span",{className:"text-[14px] text-[var(--text-tertiary)] leading-[22px]  font-normal",children:["/",_.I.t("month")]})]})]}),"edit"===r.type&&r.editPreviewData&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-8",children:[(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-sm ",children:_.I.t("Difference")}),r.isCalculatingPrice?(0,a.jsx)(et.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:(0,f.$g)(r.editPreviewData.subTotal)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center h-8",children:[(0,a.jsx)("span",{className:"text-[var(--text-tertiary)] text-sm ",children:_.I.t("Tax")}),r.isCalculatingPrice?(0,a.jsx)(et.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,a.jsx)("span",{className:"text-[var(--text-primary)]",children:(0,f.$g)(r.editPreviewData.tax)})]})]}),(0,a.jsx)("hr",{className:"mt-4 border-0 border-t border-[var(--border-dark)]"}),(0,a.jsxs)("div",{className:(0,S.cn)("flex justify-between items-center h-6","mt-2"),children:[(0,a.jsx)("span",{className:"text-[var(--text-secondary)] font-medium text-sm ",children:r.editPreviewData||r.isCalculatingPrice?_.I.t("Amount due now"):_.I.t("Total price")}),(0,a.jsxs)("span",{className:"flex items-center",children:[r.isCalculatingPrice?(0,a.jsx)(et.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,a.jsx)("span",{className:"text-[18px] h-6 leading-6 font-semibold text-[var(--text-primary)]",children:c}),(0,a.jsxs)("span",{className:"text-[14px] leading-[22px] text-[var(--text-tertiary)]",children:["/",(null==n?void 0:n.membershipInterval)==="month"?_.I.t("month"):_.I.t("year")]})]})]}),r.editPreviewData&&(0,a.jsxs)("div",{className:"mt-[4px] flex  justify-between items-center text-[var(--text-tertiary)]  text-[13px] leading-[18px]",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[_.I.t("Next renewal date:"),r.isCalculatingPrice?(0,a.jsx)(et.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):o]}),(0,a.jsxs)("div",{className:"flex items-center",children:[_.I.t("Renewal amount: {price}",{price:""}),r.isCalculatingPrice?(0,a.jsx)(et.R,{size:16,className:"leading-none",color:"var(--text-primary)"}):(0,f.$g)(null===(t=r.editPreviewData)||void 0===t?void 0:t.nextTotal)]})]})]}):null}let{MIN_SINGLE_AMOUNT:es,DEFAULT_MAX_MONTH_DEDUCTION:en}=c.ep;function el(e){let{onDisposed:t,type:i="add",source:P,motivation:L}=e,E=(0,u.GV)(w.u.selectors.currentTeamInfo),{updateTeamDeductionSetting:A,fetchTeamInfo:D}=(0,y.d)(),{submitSubscribe:U}=(0,g.S)(),O=(0,u.GV)(p.R.selectors.isVip),{open:B}=(0,s.s)(j.l),W=(0,u.GV)(p.R.selectors.userInfo),{fetchUserInfo:K}=(0,m.As)(),{updateCredits:G}=(0,x.I)(),H=(0,u.jL)(),Y=(0,T.useRef)(null),[Z,q]=(0,T.useState)(()=>{let t={submitLoading:!1,type:i,avatar:"",teamName:"",isYearly:!!e.isAnnually,singleDeductionAmount:es,monthlyDeductionLimit:en,autoDeduction:!1,minSeats:c.iB,seats:c.ve};if("add"===i){let e=new URL(window.location.href),i=e.searchParams.get("quantity"),a=e.searchParams.get("planKey"),r=a?Number(a)===v.zl.TEAM_YEARLY:t.isYearly;return e.searchParams.delete("quantity"),e.searchParams.delete("planKey"),window.history.replaceState({},"",e.toString()),{...t,seats:Number(i)>=c.iB?Number(i):c.ve,isYearly:r}}return"edit"===i&&null!==E?{...t,avatar:E.avatar,teamName:E.name,isYearly:E.isYearly,singleDeductionAmount:E.singleDeductionAmount,monthlyDeductionLimit:E.monthlyDeductionLimit,autoDeduction:E.autoDeduction,minSeats:E.memberCount>c.iB?E.memberCount:c.iB,seats:E.seats}:t}),X=(0,f.nW)(v.OL.TEAM,Z.isYearly),et=(0,n.w)(async()=>{let e="",t=Z.avatarFile;if(t){var i;let a=await (0,S.pJ)(t,128);e=(null===(i=(await (0,S.zM)(a)).split(";")[1])||void 0===i?void 0:i.replace(/^base64,/,""))||""}let a=await I.F.TeamManagementService.createTeam({avatar:t&&e?{fileName:t.name,mimeType:t.type,data:e}:void 0,name:Z.teamName||_.I.t("New Team"),seats:Z.seats,autoDeduction:Z.autoDeduction,singleDeductionAmount:Z.singleDeductionAmount,monthlyDeductionLimit:Z.monthlyDeductionLimit});if(!(null==a?void 0:a.teamUid))throw Error("Failed to create team");if(!X)return;let r=a.teamUid;await U(v.v6.init,{planKey:X,teamUid:r,quantity:Z.seats})}),ei=(0,n.w)(async()=>{await Promise.all([K(),G(),D()]),b.T.emit("subscriptionChange")}),ea=(0,n.w)(async()=>{let e=null==E?void 0:E.teamUid;if(await A({autoDeduction:Z.autoDeduction,singleDeductionAmount:Z.singleDeductionAmount,monthlyDeductionLimit:Z.monthlyDeductionLimit}),!O){if((null==W?void 0:W.subscriptionStatus)===k.it.PastDueSubscriptionStatus){B();return}if(null===X||!e){(0,l.oR)({variant:"error",title:_.I.t("Failed to change subscription plan.")});return}await U(v.v6.init,{planKey:X,teamUid:e,quantity:Z.seats});return}let{IsUpgrade:i,invoiceId:a}=await I.F.SubscriptionService.teamSubscriptionUpdate({planKey:X,quantity:Z.seats});i&&await new Promise((e,t)=>{let i=20;Y.current=setInterval(async()=>{i-=2;let{status:r}=await I.F.SubscriptionService.loopTeamUpgradeStatus({teamUid:null==E?void 0:E.teamUid,invoiceId:a});r===N.zn.LoopStatus_Success&&(e(!0),Y.current&&clearInterval(Y.current)),(i<0||r===N.zn.LoopStatus_Failed)&&(t(Error("Subscription query timeout")),Y.current&&clearInterval(Y.current))},2e3)}),ei(),t(),(0,l.oR)({variant:"success",title:_.I.t("Subscription plan changed successfully.")}),ed.setState({submitLoading:!1})}),el=(0,n.w)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ed.teamState.seats;if("add"!==i&&O){if(Z.isYearly===(null==E?void 0:E.isYearly)&&E&&e<=(null==E?void 0:E.seats)){ed.setState({isCalculatingPrice:!1,editPreviewData:void 0});return}ed.setState({isCalculatingPrice:!0}),ec()}}),eo=(0,n.w)((e,t)=>{e===Z.seats?ed.setState({editPreviewData:t,isCalculatingPrice:!1}):ed.setState({editPreviewData:void 0,isCalculatingPrice:!1})}),ec=(0,r.x)((0,n.w)(async()=>{try{let e=(0,f.nW)(v.OL.TEAM,Z.isYearly),t=Z.seats,i=await I.F.SubscriptionService.teamSubscriptionPreview({planKey:e,quantity:t});Z.seats===t&&eo(t,i)}catch(e){(0,l.oR)({variant:"error",title:d.P.formatErrorToString(e)})}ed.setState({isCalculatingPrice:!1})}),300),ed={teamState:Z,setState:e=>{q(t=>({...t,...e}))},handleConfirm:(0,n.w)(async()=>{ed.setState({submitLoading:!0});try{"add"===i?await et():await ea()}catch(e){ed.setState({submitLoading:!1}),(0,l.oR)({variant:"error",title:d.P.formatErrorToString(e)})}}),calculatePrice:el,onDisposed:t,subscriptionChangeCallback:ei},eu=(0,u.GV)(p.R.selectors.nextMembershipInterval),ep=(0,u.GV)(p.R.selectors.membershipInterval);(0,T.useEffect)(()=>(H(h.M.actions.setSubscriptionSource(P)),()=>{Y.current&&clearInterval(Y.current)}),[]),(0,T.useEffect)(()=>{L&&C.J.setMotivation(L)},[L]);let em=(0,n.w)(async()=>{if("add"===i){let e=!0;O&&(e=eu?"yearly"===eu:"yearly"===ep),ed.setState({isYearly:e})}});return((0,T.useEffect)(()=>{o.K.inited&&em()},[em,O,o.K.inited]),"add"===i)?(0,a.jsxs)($,{onDisposed:t,vm:ed,children:[(0,a.jsx)(M,{vm:ed}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(z,{vm:ed}),(0,a.jsx)(er,{vm:ed})]}),(0,a.jsx)(V,{vm:ed,className:"mt-[20px]"})]}):(0,a.jsxs)(Q,{onDisposed:t,vm:ed,children:[(0,a.jsxs)(F,{children:[(0,a.jsx)(ee,{vm:ed}),(0,a.jsx)(z,{vm:ed}),(0,a.jsx)(er,{vm:ed})]}),(0,a.jsx)(F,{children:(0,a.jsx)(R,{vm:ed})}),(0,a.jsx)(V,{vm:ed}),O&&(0,a.jsx)(J,{className:"-mb-2",vm:ed})]})}},22609:(e,t,i)=>{"use strict";i.d(t,{I:()=>y});var a=i(2635),r=i(76743),s=i(90293),n=i(33890),l=i(51416),o=i(75958),c=i(9205),d=i(59496),u=i(91452),p=i(40757),m=i(27846),x=i(72551),h=i(21731),v=i(57271),f=i(12150),g=i(53120),w=i(86588);function y(e){let{onDisposed:t,onDisposedAll:i}=e,{open:y}=(0,l.s)(g.u),b=(0,u.GV)(p.R.selectors.isTeamAccount),C=(0,u.GV)(x.u.selectors.listTeamResponse),S=(0,u.GV)(p.R.selectors.userInfo),{switchAccount:j}=(0,m.As)(),{open:I}=(0,l.s)(s.p),N=(0,o.w)(async(e,a)=>{if((null==S?void 0:S.userId)!==e){try{i&&i(),await j(e)}catch(e){(0,c.oR)({title:d.P.formatErrorToString(e),variant:"error"})}setTimeout(()=>{null==a||a()},300)}t()}),k=(0,o.w)(()=>{I({variant:"alert",title:v.I.t("Personal account required"),content:v.I.t("Teams can only be created from a personal account. Switch to your personal profile to continue."),confirmText:v.I.t("Switch to personal"),onConfirm:async()=>((null==C?void 0:C.userId)&&N(null==C?void 0:C.userId,()=>{y({type:"add",motivation:{page:"profile",event:"upgrade",reason:"upgrade"}})}),!0),onCancel:()=>{}})});return(0,a.jsx)(n.l,{onDisposed:t,title:v.I.t("Select a workspace"),width:450,className:"flex flex-col max-[80%] sm:max-h-[680px] bg-[var(--background-gray-main)]",children:(0,a.jsxs)("div",{className:"w-full px-5 pt-3 pb-5 flex flex-col gap-5 flex-1 overflow-hidden",children:[(0,a.jsx)(w.k,{className:"flex-1 overflow-y-auto",onClick:async e=>{N(e)}}),(0,a.jsx)(r.A,{size:"large",icon:(0,a.jsx)(f.A,{size:18,color:"var(--icon-primary)"}),className:(0,h.cn)("w-full flex-shrink-0","flex min-w-[100px] min-h-10 max-h-10 py-2 px-4 justify-center items-center gap-1.5","rounded-[10px] bg-[var(--fill-white)] shadow-[0px_0.5px_3px_0px_var(--shadow-S)]","hover:bg-[var(--Button-primary-white)] hover:opacity-70 active:opacity-60 disabled:opacity-50! transition-opacity"),onClick:()=>{b?k():y({type:"add",motivation:{page:"profile",event:"upgrade",reason:"upgrade"}})},children:v.I.t("Create a team")})]})})}},86588:(e,t,i)=>{"use strict";i.d(t,{k:()=>m});var a=i(2635),r=i(87001);function s(e){let{color:t="var(--icon-primary)",size:i=24,...r}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:i,height:i,color:t,...r,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.145 6.83709C19.5111 7.2032 19.5111 7.7968 19.145 8.16291L10.6071 16.7008C10.241 17.067 9.64737 17.067 9.28125 16.7008L4.77459 12.1942C4.40847 11.8281 4.40847 11.2345 4.77459 10.8684C5.1407 10.5022 5.7343 10.5022 6.10041 10.8684L9.94416 14.7121L17.8192 6.83709C18.1853 6.47097 18.7789 6.47097 19.145 6.83709Z",fill:"currentColor"})})}s._id="50fb207e5e99a90a2dda21e764ef4f25";var n=i(91452),l=i(40757),o=i(72551),c=i(21731),d=i(14496),u=i(57271),p=i(1566);function m(e){let{className:t,onClick:i,showArrow:m,itemsClassName:x}=e,h=(0,n.GV)(o.u.selectors.listTeamResponse),v=(0,n.GV)(l.R.selectors.userInfo);if(!h)return null;let f=(null==v?void 0:v.userId)===h.userId;return(0,a.jsxs)("div",{className:(0,c.cn)("flex py-2 px-3 flex-col items-start gap-2 flex-grow","rounded-[16px] border border-[var(--border-dark)] bg-[var(--background-menu-white)]","w-full h-full bg-[var(--background-menu-white)] rounded-2xl border border-[var(--border-dark)] flex flex-col","relative overflow-hidden",t),children:[(0,a.jsxs)("div",{className:(0,c.cn)("flex pt-4 pr-1 pb-4 pl-2 items-center gap-4","rounded-[12px]","hover:bg-[var(--fill-tsp-white-light)] transition-colors duration-200","cursor-pointer","w-full",null==x?void 0:x.container),onClick:()=>{i(h.userId)},children:[(0,a.jsx)(r.eu,{size:(null==x?void 0:x.avatar)||40,avatar:h.userAvatar,name:h.userName,className:"rounded-[99px] border-0.5 border-[var(--border-main)] overflow-hidden"}),(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-0.5 flex-1 break-all",null==x?void 0:x.rightContainer),children:[(0,a.jsx)("div",{className:(0,c.cn)("text-[var(--text-primary)] text-sm font-semibold",null==x?void 0:x.name),children:h.userName}),(0,a.jsx)("div",{className:(0,c.cn)("text-[var(--text-tertiary)] text-xs",null==x?void 0:x.description),children:u.I.t("Personal")})]}),(0,a.jsxs)(a.Fragment,{children:[" ",f?(0,a.jsx)(s,{color:"var(--icon-tertiary)"}):m?(0,a.jsx)(p.A,{size:24,color:"var(--icon-tertiary)"}):null]})]}),(null==h?void 0:h.teams.length)>0&&(0,a.jsx)("div",{className:(0,c.cn)("w-full flex-shrink-0 h-[1px] bg-[var(--border-main)]",null==x?void 0:x.divider)}),null==h?void 0:h.teams.map(e=>{let{userId:t,avatar:n,name:l,type:o}=e,h=(null==v?void 0:v.userId)===e.userId;return(0,a.jsxs)("div",{className:(0,c.cn)("flex pt-4 pr-1 pb-4 pl-2 items-center gap-4","rounded-[12px]","hover:bg-[var(--fill-tsp-white-light)] transition-colors duration-200","cursor-pointer","w-full",null==x?void 0:x.container),onClick:()=>{i(t)},children:[(0,a.jsx)(r.eu,{avatar:n,name:l,size:(null==x?void 0:x.avatar)||40,className:"rounded-[8px] border-0.5 border-[var(--theme-border-primary)] bg-transparent overflow-hidden"}),(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-0.5 flex-1 break-all",null==x?void 0:x.rightContainer),children:[(0,a.jsx)("div",{className:(0,c.cn)("text-[var(--text-primary)] text-sm font-semibold",null==x?void 0:x.name),children:l}),(0,a.jsx)("div",{className:(0,c.cn)("text-[var(--text-tertiary)] text-xs",null==x?void 0:x.description),children:o===d.YV.EDU?u.I.t("School"):u.I.t("Team")})]}),(0,a.jsx)(a.Fragment,{children:h?(0,a.jsx)(s,{color:"var(--icon-tertiary)"}):m?(0,a.jsx)(p.A,{size:24,color:"var(--icon-tertiary)"}):null})]},t)})]})}},47727:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var a=i(2635),r=i(76743),s=i(33890),n=i(53708),l=i(51416);function o(e){let{color:t="var(--icon-primary)",size:i=16,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,color:t,...r,children:[(0,a.jsx)("path",{d:"M41.7781 39.9389C39.111 37.2718 35.4937 35.7734 31.7218 35.7734C27.9499 35.7734 24.3326 37.2718 21.6655 39.9389C18.9984 42.606 17.5 46.2234 17.5 49.9952",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M31.7226 35.7733C36.6317 35.7733 40.6112 31.7938 40.6112 26.8847C40.6112 21.9757 36.6317 17.9961 31.7226 17.9961C26.8136 17.9961 22.834 21.9757 22.834 26.8847C22.834 31.7938 26.8136 35.7733 31.7226 35.7733Z",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M55 28V14C55 10.6863 52.3137 8 49 8H14C10.6863 8 8 10.6863 8 14V55C8 58.3137 10.6863 61 14 61H35.5",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M60.3088 47.9502H45.5891C44.4278 47.9502 43.4863 48.8917 43.4863 50.053V57.4128C43.4863 58.5742 44.4278 59.5156 45.5891 59.5156H60.3088C61.4701 59.5156 62.4116 58.5742 62.4116 57.4128V50.053C62.4116 48.8917 61.4701 47.9502 60.3088 47.9502Z",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M47.6973 47.9499V43.7443C47.6973 42.3501 48.2511 41.0129 49.237 40.027C50.2229 39.0412 51.56 38.4873 52.9543 38.4873C54.3485 38.4873 55.6857 39.0412 56.6715 40.027C57.6574 41.0129 58.2113 42.3501 58.2113 43.7443V47.9499",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}o._id="f96e9c8a0943c1514af08b56951bbfd9";var c=i(91452),d=i(72551),u=i(25850),p=i(14496),m=i(57271),x=i(53120),h=i(22609);function v(e){let{onDisposed:t,limitType:i}=e,{open:v}=(0,l.s)(h.I),{open:f}=(0,l.s)(x.u),g=(0,c.GV)(d.u.selectors.role)===p.mb.OWNER,w=(0,n.W)(()=>"schedule"===i?g?m.I.t("Your teams subscription plan has expired, and you cannot create new tasks. You can switch to another account or renew your subscription to restore data and access."):m.I.t("Your teams subscription plan has expired, and you cannot create new tasks. Please switch workspace to use {product}.",{product:u.KR}):g?m.I.t("Your teams subscription plan has expired. You can switch to another account or renew your subscription to restore data and access."):m.I.t("Your teams subscription plan has expired. Please switch workspace to use {product}.",{product:u.KR}));return(0,a.jsx)(s.l,{width:460,onDisposed:t,closeIconVisible:!0,headerClassName:"py-0 ps-4 md:pl-8 pe-[15%] w-full",title:null,className:"flex pt-8 flex-col items-center gap-2 max-w-[90%] bg-[var(--background-gray-main)] shadow-[0px_8px_32px_0px_var(--shadow-XS)] overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col items-center px-[32px] pb-[32px]",children:[(0,a.jsx)(o,{size:72}),(0,a.jsx)("div",{className:"mt-[28px] text-[var(--text-primary)] text-2xl font-[600] leading-[30px]",children:m.I.t("Team locked")}),(0,a.jsx)("div",{className:"mt-[8px] text-[var(--text-tertiary)] text-center  text-sm leading-[22px]",children:w}),(0,a.jsxs)("div",{className:"mt-[40px] flex gap-3 items-center justify-between w-full",children:[(0,a.jsx)(r.A,{className:"flex-1",color:g?"gray":"black",onClick:()=>{v(),e.onDisposed()},children:m.I.t("Switch team")}),g&&(0,a.jsx)(r.A,{className:"flex-1",color:"black",onClick:()=>{f({type:"edit",motivation:{page:"profile",event:"upgrade",reason:"upgrade"}})},children:m.I.t("Resubscribe")})]})]})})}},93347:(e,t,i)=>{"use strict";i.d(t,{F:()=>d});var a=i(16834),r=i(12766),s=i(59496),n=i(24990),l=i(47488),o=i(62121),c=i(71804);let d=(0,c.v4)(r.a.rpcServerUrl,{handlePermissionDenied:e=>{if(e instanceof c.T$){let t;let i=(0,s.O)(e);switch(null==i?void 0:i.debug.code){case a.mF.USER_REMOVED_FROM_TEAM:case a.mF.TEAM_DISSOLVE:t=null==i?void 0:i.debug.code}t&&l.T.emit("permissionDenied",{code:t,message:null==i?void 0:i.message})}},handleUnauth:()=>{},beforeRequest:async e=>{o.G.isRunInServerSide||await (0,n.q)(e)}})},81820:(e,t,i)=>{"use strict";i.d(t,{d:()=>l});var a=i(62121),r=i(21731);function s(e){try{var t,i,a,s,n,l;let o=(0,r.hU)();if("Android"===o){if(!(null===(t=window.flutter_inappwebview)||void 0===t?void 0:t.callHandler))throw Error("[receiveMsgFromApp][Android] JSBridge method not exist");return window.flutter_inappwebview.callHandler("android",e)}if(!(null===(s=window.webkit)||void 0===s?void 0:null===(a=s.messageHandlers)||void 0===a?void 0:null===(i=a.nativeHandler)||void 0===i?void 0:i.postMessage))throw Error("[receiveMsgFromApp][IOS] JSBridge method not exist");return null===(n=(l=window.webkit.messageHandlers.nativeHandler).postMessage)||void 0===n?void 0:n.call(l,JSON.stringify(e))}catch(e){console.error("[receiveMsgFromApp] error: ".concat(e.toString()))}}function n(e){try{var t,i,a,s,n,l,o,c;let d=(0,r.hU)();if("Android"===d){if(!(null===(t=window.flutter_inappwebview)||void 0===t?void 0:t.callHandler))throw Error("[SendMsgToApp][Android] JSBridge method not exist");null===(a=window.flutter_inappwebview)||void 0===a||null===(i=a.callHandler)||void 0===i||i.call(a,"android",e);return}if(!(null===(l=window.webkit)||void 0===l?void 0:null===(n=l.messageHandlers)||void 0===n?void 0:null===(s=n.nativeHandler)||void 0===s?void 0:s.postMessage))throw Error("[SendMsgToApp][IOS] JSBridge method not exist");null===(o=(c=window.webkit.messageHandlers.nativeHandler).postMessage)||void 0===o||o.call(c,JSON.stringify(e));return}catch(e){console.error("[SendMsgToApp] error: ".concat(e.toString()))}}let l={isInApp:()=>{var e,t;return!a.G.isRunInServerSide&&!!(null===(t=window)||void 0===t?void 0:null===(e=t.manusAppEnv)||void 0===e?void 0:e.manusApp)},isIosApp:()=>{var e,t,i,r,s;return!a.G.isRunInServerSide&&!!((null===(t=window)||void 0===t?void 0:null===(e=t.manusAppEnv)||void 0===e?void 0:e.manusApp)&&(null===(s=window.webkit)||void 0===s?void 0:null===(r=s.messageHandlers)||void 0===r?void 0:null===(i=r.nativeHandler)||void 0===i?void 0:i.postMessage))},isAndroidApp:()=>{var e,t,i;return!a.G.isRunInServerSide&&!!((null===(t=window)||void 0===t?void 0:null===(e=t.manusAppEnv)||void 0===e?void 0:e.manusApp)&&(null===(i=window.flutter_inappwebview)||void 0===i?void 0:i.callHandler))},setSession:e=>{n({event:"setSession",data:e})},openPlaybook:e=>{n({event:"openSession",data:e})},openMakeYourVersion:e=>{n({event:"makeYourVersion",data:e})},closeWebview:e=>{n({event:"closeWebview",data:e})},closeWebPage:e=>{n({event:"closeWebPage",data:e})},getVisitorInfo:()=>s({event:"getVisitorInfo"}),terminateTakeover:e=>{n({event:"terminateTakeover",data:e})},shareLink:e=>n({event:"shareUrl",data:e}),changeTheme:()=>n({event:"changeTheme",data:{}}),getPasteBoardString:()=>s({event:"getPasteBoardString"})}},93165:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a={src:"https://files.manuscdn.com/webapp/_next/static/media/BasicMembershipIcon.3f518a85.svg",height:18,width:18,blurWidth:0,blurHeight:0}},81762:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a={src:"https://files.manuscdn.com/webapp/_next/static/media/ProMembershipIcon.dafb0037.svg",height:18,width:18,blurWidth:0,blurHeight:0}},61086:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a={src:"https://files.manuscdn.com/webapp/_next/static/media/StarterMembershipIcon.970b13cd.svg",height:18,width:18,blurWidth:0,blurHeight:0}}}]);